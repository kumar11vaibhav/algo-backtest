2025-06-02 12:18:41,890 - root - INFO - Starting paper trading session...
2025-06-02 12:18:41,890 - root - DEBUG - Checking market hours...
2025-06-02 12:18:44,828 - root - DEBUG - Market open: True
2025-06-02 12:18:44,828 - root - DEBUG - Fetching current market data...
2025-06-02 12:18:44,828 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:18:44,837 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-06-02 12:18:44,838 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:18:44,842 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-06-02 12:18:44,842 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:18:45,336 - root - INFO - Successfully fetched price for ^NSEI: 24667.19921875
2025-06-02 12:18:45,336 - root - DEBUG - Got spot price: 24667.19921875
2025-06-02 12:18:45,336 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:18:45,337 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:18:45.336098 to 2025-06-02 12:18:45.336098
2025-06-02 12:18:45,340 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:18:45,641 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:18:46,083 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:18:46,345 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:18:46,346 - yfinance - ERROR - ['NSEI.BO']: HTTPError('HTTP Error 404: ')
2025-06-02 12:18:46,377 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:18:46,378 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:18:46,378 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:18:46,378 - root - DEBUG - Getting strike price...
2025-06-02 12:18:46,378 - root - INFO - Current spot: 24667.19921875, Selected strike: 24300
2025-06-02 12:18:46,378 - root - DEBUG - Current time in IST: 12:18:46.378951
2025-06-02 12:18:46,379 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:18:46,381 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:19:46,385 - root - DEBUG - Checking market hours...
2025-06-02 12:19:46,386 - root - DEBUG - Market open: True
2025-06-02 12:19:46,386 - root - DEBUG - Fetching current market data...
2025-06-02 12:19:46,386 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:19:46,387 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:19:48,034 - root - INFO - Successfully fetched price for ^NSEI: 24676.05078125
2025-06-02 12:19:48,034 - root - DEBUG - Got spot price: 24676.05078125
2025-06-02 12:19:48,034 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:19:48,034 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:19:48.034706 to 2025-06-02 12:19:48.034706
2025-06-02 12:19:48,039 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:19:48,175 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:19:48,387 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:19:48,388 - yfinance - ERROR - ['NSEI.BO']: HTTPError('HTTP Error 404: ')
2025-06-02 12:19:48,395 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:19:48,395 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:19:48,395 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:19:48,396 - root - DEBUG - Getting strike price...
2025-06-02 12:19:48,396 - root - INFO - Current spot: 24676.05078125, Selected strike: 24300
2025-06-02 12:19:48,396 - root - DEBUG - Current time in IST: 12:19:48.396825
2025-06-02 12:19:48,396 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:19:48,397 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:20:48,403 - root - DEBUG - Checking market hours...
2025-06-02 12:20:48,403 - root - DEBUG - Market open: True
2025-06-02 12:20:48,403 - root - DEBUG - Fetching current market data...
2025-06-02 12:20:48,404 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:20:48,405 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:20:48,593 - root - INFO - Successfully fetched price for ^NSEI: 24685.400390625
2025-06-02 12:20:48,593 - root - DEBUG - Got spot price: 24685.400390625
2025-06-02 12:20:48,593 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:20:48,594 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:20:48.594497 to 2025-06-02 12:20:48.594497
2025-06-02 12:20:48,597 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:20:48,622 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:20:48,622 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:20:48,624 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:20:48,624 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:20:48,624 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:20:48,624 - root - DEBUG - Getting strike price...
2025-06-02 12:20:48,624 - root - INFO - Current spot: 24685.400390625, Selected strike: 24300
2025-06-02 12:20:48,625 - root - DEBUG - Current time in IST: 12:20:48.624456
2025-06-02 12:20:48,625 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:20:48,625 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:21:48,632 - root - DEBUG - Checking market hours...
2025-06-02 12:21:48,633 - root - DEBUG - Market open: True
2025-06-02 12:21:48,633 - root - DEBUG - Fetching current market data...
2025-06-02 12:21:48,633 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:21:48,634 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:21:48,862 - root - INFO - Successfully fetched price for ^NSEI: 24683.849609375
2025-06-02 12:21:48,862 - root - DEBUG - Got spot price: 24683.849609375
2025-06-02 12:21:48,863 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:21:48,863 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:21:48.863435 to 2025-06-02 12:21:48.863435
2025-06-02 12:21:48,867 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:21:48,883 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:21:48,883 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:21:48,890 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:21:48,890 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:21:48,890 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:21:48,891 - root - DEBUG - Getting strike price...
2025-06-02 12:21:48,891 - root - INFO - Current spot: 24683.849609375, Selected strike: 24300
2025-06-02 12:21:48,891 - root - DEBUG - Current time in IST: 12:21:48.891185
2025-06-02 12:21:48,891 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:21:48,891 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:22:48,903 - root - DEBUG - Checking market hours...
2025-06-02 12:22:48,903 - root - DEBUG - Market open: True
2025-06-02 12:22:48,904 - root - DEBUG - Fetching current market data...
2025-06-02 12:22:48,904 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:22:48,905 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:22:49,170 - root - INFO - Successfully fetched price for ^NSEI: 24676.849609375
2025-06-02 12:22:49,170 - root - DEBUG - Got spot price: 24676.849609375
2025-06-02 12:22:49,170 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:22:49,170 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:22:49.170932 to 2025-06-02 12:22:49.170932
2025-06-02 12:22:49,175 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:22:49,198 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:22:49,198 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:22:49,205 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:22:49,205 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:22:49,205 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:22:49,205 - root - DEBUG - Getting strike price...
2025-06-02 12:22:49,205 - root - INFO - Current spot: 24676.849609375, Selected strike: 24300
2025-06-02 12:22:49,205 - root - DEBUG - Current time in IST: 12:22:49.205549
2025-06-02 12:22:49,205 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:22:49,206 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:23:49,208 - root - DEBUG - Checking market hours...
2025-06-02 12:23:49,208 - root - DEBUG - Market open: True
2025-06-02 12:23:49,209 - root - DEBUG - Fetching current market data...
2025-06-02 12:23:49,209 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:23:49,210 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:23:49,395 - root - INFO - Successfully fetched price for ^NSEI: 24676.099609375
2025-06-02 12:23:49,396 - root - DEBUG - Got spot price: 24676.099609375
2025-06-02 12:23:49,396 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:23:49,396 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:23:49.396562 to 2025-06-02 12:23:49.396562
2025-06-02 12:23:49,400 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:23:49,426 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:23:49,426 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:23:49,428 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:23:49,428 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:23:49,428 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:23:49,428 - root - DEBUG - Getting strike price...
2025-06-02 12:23:49,428 - root - INFO - Current spot: 24676.099609375, Selected strike: 24300
2025-06-02 12:23:49,428 - root - DEBUG - Current time in IST: 12:23:49.428536
2025-06-02 12:23:49,428 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:23:49,428 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:24:49,441 - root - DEBUG - Checking market hours...
2025-06-02 12:24:49,442 - root - DEBUG - Market open: True
2025-06-02 12:24:49,442 - root - DEBUG - Fetching current market data...
2025-06-02 12:24:49,442 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:24:49,443 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:24:49,751 - root - INFO - Successfully fetched price for ^NSEI: 24674.349609375
2025-06-02 12:24:49,752 - root - DEBUG - Got spot price: 24674.349609375
2025-06-02 12:24:49,752 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:24:49,752 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:24:49.752946 to 2025-06-02 12:24:49.752946
2025-06-02 12:24:49,757 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:24:49,768 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:24:49,769 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:24:49,773 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:24:49,773 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:24:49,774 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:24:49,774 - root - DEBUG - Getting strike price...
2025-06-02 12:24:49,774 - root - INFO - Current spot: 24674.349609375, Selected strike: 24300
2025-06-02 12:24:49,774 - root - DEBUG - Current time in IST: 12:24:49.774427
2025-06-02 12:24:49,774 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:24:49,774 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:25:49,780 - root - DEBUG - Checking market hours...
2025-06-02 12:25:49,781 - root - DEBUG - Market open: True
2025-06-02 12:25:49,781 - root - DEBUG - Fetching current market data...
2025-06-02 12:25:49,781 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:25:49,783 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:25:49,986 - root - INFO - Successfully fetched price for ^NSEI: 24674.900390625
2025-06-02 12:25:49,986 - root - DEBUG - Got spot price: 24674.900390625
2025-06-02 12:25:49,986 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:25:49,986 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:25:49.986841 to 2025-06-02 12:25:49.986841
2025-06-02 12:25:49,990 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:25:50,000 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:25:50,000 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:25:50,004 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:25:50,004 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:25:50,004 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:25:50,004 - root - DEBUG - Getting strike price...
2025-06-02 12:25:50,004 - root - INFO - Current spot: 24674.900390625, Selected strike: 24300
2025-06-02 12:25:50,004 - root - DEBUG - Current time in IST: 12:25:50.004421
2025-06-02 12:25:50,004 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:25:50,005 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:26:50,009 - root - DEBUG - Checking market hours...
2025-06-02 12:26:50,009 - root - DEBUG - Market open: True
2025-06-02 12:26:50,009 - root - DEBUG - Fetching current market data...
2025-06-02 12:26:50,009 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:26:50,010 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:26:50,202 - root - INFO - Successfully fetched price for ^NSEI: 24673.400390625
2025-06-02 12:26:50,202 - root - DEBUG - Got spot price: 24673.400390625
2025-06-02 12:26:50,202 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:26:50,202 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:26:50.202187 to 2025-06-02 12:26:50.202187
2025-06-02 12:26:50,209 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:26:50,226 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:26:50,226 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:26:50,230 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:26:50,230 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:26:50,231 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:26:50,231 - root - DEBUG - Getting strike price...
2025-06-02 12:26:50,231 - root - INFO - Current spot: 24673.400390625, Selected strike: 24300
2025-06-02 12:26:50,231 - root - DEBUG - Current time in IST: 12:26:50.231639
2025-06-02 12:26:50,231 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:26:50,231 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:27:50,246 - root - DEBUG - Checking market hours...
2025-06-02 12:27:50,246 - root - DEBUG - Market open: True
2025-06-02 12:27:50,246 - root - DEBUG - Fetching current market data...
2025-06-02 12:27:50,246 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:27:50,246 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:27:50,416 - root - INFO - Successfully fetched price for ^NSEI: 24671.5
2025-06-02 12:27:50,417 - root - DEBUG - Got spot price: 24671.5
2025-06-02 12:27:50,417 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:27:50,417 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:27:50.417357 to 2025-06-02 12:27:50.417357
2025-06-02 12:27:50,420 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:27:50,431 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:27:50,432 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:27:50,436 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:27:50,436 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:27:50,437 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:27:50,437 - root - DEBUG - Getting strike price...
2025-06-02 12:27:50,437 - root - INFO - Current spot: 24671.5, Selected strike: 24300
2025-06-02 12:27:50,437 - root - DEBUG - Current time in IST: 12:27:50.437540
2025-06-02 12:27:50,437 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:27:50,438 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:28:50,438 - root - DEBUG - Checking market hours...
2025-06-02 12:28:50,438 - root - DEBUG - Market open: True
2025-06-02 12:28:50,438 - root - DEBUG - Fetching current market data...
2025-06-02 12:28:50,438 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:28:50,440 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:28:50,586 - root - INFO - Successfully fetched price for ^NSEI: 24668.5
2025-06-02 12:28:50,586 - root - DEBUG - Got spot price: 24668.5
2025-06-02 12:28:50,587 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:28:50,587 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:28:50.587603 to 2025-06-02 12:28:50.587603
2025-06-02 12:28:50,590 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:28:50,610 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:28:50,611 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:28:50,612 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:28:50,612 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:28:50,612 - root - DEBUG - Getting strike price...
2025-06-02 12:28:50,612 - root - INFO - Current spot: 24668.5, Selected strike: 24300
2025-06-02 12:28:50,612 - root - DEBUG - Current time in IST: 12:28:50.612918
2025-06-02 12:28:50,612 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:28:50,613 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:29:50,615 - root - DEBUG - Checking market hours...
2025-06-02 12:29:50,616 - root - DEBUG - Market open: True
2025-06-02 12:29:50,616 - root - DEBUG - Fetching current market data...
2025-06-02 12:29:50,616 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:29:50,618 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:29:50,878 - root - INFO - Successfully fetched price for ^NSEI: 24670.94921875
2025-06-02 12:29:50,878 - root - DEBUG - Got spot price: 24670.94921875
2025-06-02 12:29:50,878 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:29:50,879 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:29:50.879189 to 2025-06-02 12:29:50.879189
2025-06-02 12:29:50,882 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:29:50,894 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:29:50,895 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:29:50,895 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:29:50,895 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:29:50,895 - root - DEBUG - Getting strike price...
2025-06-02 12:29:50,895 - root - INFO - Current spot: 24670.94921875, Selected strike: 24300
2025-06-02 12:29:50,895 - root - DEBUG - Current time in IST: 12:29:50.895437
2025-06-02 12:29:50,895 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:29:50,896 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:30:50,914 - root - DEBUG - Checking market hours...
2025-06-02 12:30:50,914 - root - DEBUG - Market open: True
2025-06-02 12:30:50,914 - root - DEBUG - Fetching current market data...
2025-06-02 12:30:50,914 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:30:50,915 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:30:51,141 - root - INFO - Successfully fetched price for ^NSEI: 24673.849609375
2025-06-02 12:30:51,141 - root - DEBUG - Got spot price: 24673.849609375
2025-06-02 12:30:51,141 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:30:51,141 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:30:51.141325 to 2025-06-02 12:30:51.141325
2025-06-02 12:30:51,144 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:30:51,158 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:30:51,158 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:30:51,158 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:30:51,158 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:30:51,158 - root - DEBUG - Getting strike price...
2025-06-02 12:30:51,158 - root - INFO - Current spot: 24673.849609375, Selected strike: 24300
2025-06-02 12:30:51,158 - root - DEBUG - Current time in IST: 12:30:51.158770
2025-06-02 12:30:51,158 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:30:51,158 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:30:57,454 - root - INFO - Loaded previous state. Balance: 60000
2025-06-02 12:30:57,454 - root - INFO - Starting paper trading session...
2025-06-02 12:30:57,454 - root - DEBUG - Checking market hours...
2025-06-02 12:30:57,510 - root - DEBUG - Market open: True
2025-06-02 12:30:57,510 - root - DEBUG - Fetching current market data...
2025-06-02 12:30:57,510 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:30:57,525 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-06-02 12:30:57,526 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:30:57,536 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-06-02 12:30:57,536 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:30:57,859 - root - INFO - Successfully fetched price for ^NSEI: 24676.599609375
2025-06-02 12:30:57,860 - root - DEBUG - Got spot price: 24676.599609375
2025-06-02 12:30:57,860 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:30:57,860 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:30:57.860866 to 2025-06-02 12:30:57.860866
2025-06-02 12:30:57,864 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:30:57,977 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:30:59,844 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:31:00,153 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:31:00,153 - yfinance - ERROR - ['NSEI.BO']: HTTPError('HTTP Error 404: ')
2025-06-02 12:31:00,158 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:31:00,158 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:31:00,159 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:31:00,159 - root - DEBUG - Getting strike price...
2025-06-02 12:31:00,159 - root - INFO - Current spot: 24676.599609375, Selected strike: 24300
2025-06-02 12:31:00,159 - root - DEBUG - Current time in IST: 12:31:00.159345
2025-06-02 12:31:00,159 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:31:00,160 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:31:51,170 - root - DEBUG - Checking market hours...
2025-06-02 12:31:51,171 - root - DEBUG - Market open: True
2025-06-02 12:31:51,171 - root - DEBUG - Fetching current market data...
2025-06-02 12:31:51,171 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:31:51,172 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:31:51,384 - root - INFO - Successfully fetched price for ^NSEI: 24676.849609375
2025-06-02 12:31:51,384 - root - DEBUG - Got spot price: 24676.849609375
2025-06-02 12:31:51,384 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:31:51,384 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:31:51.384120 to 2025-06-02 12:31:51.384120
2025-06-02 12:31:51,387 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:31:51,405 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:31:51,406 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:31:51,406 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:31:51,406 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:31:51,406 - root - DEBUG - Getting strike price...
2025-06-02 12:31:51,406 - root - INFO - Current spot: 24676.849609375, Selected strike: 24300
2025-06-02 12:31:51,406 - root - DEBUG - Current time in IST: 12:31:51.406089
2025-06-02 12:31:51,407 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:31:51,408 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:32:00,173 - root - DEBUG - Checking market hours...
2025-06-02 12:32:00,173 - root - DEBUG - Market open: True
2025-06-02 12:32:00,173 - root - DEBUG - Fetching current market data...
2025-06-02 12:32:00,174 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:32:00,175 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:32:00,290 - root - INFO - Successfully fetched price for ^NSEI: 24676.849609375
2025-06-02 12:32:00,290 - root - DEBUG - Got spot price: 24676.849609375
2025-06-02 12:32:00,291 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:32:00,291 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:32:00.291181 to 2025-06-02 12:32:00.291181
2025-06-02 12:32:00,293 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:32:00,495 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:32:00,840 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:32:00,840 - yfinance - ERROR - ['NSEI.BO']: HTTPError('HTTP Error 404: ')
2025-06-02 12:32:00,846 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:32:00,847 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:32:00,847 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:32:00,847 - root - DEBUG - Getting strike price...
2025-06-02 12:32:00,847 - root - INFO - Current spot: 24676.849609375, Selected strike: 24300
2025-06-02 12:32:00,847 - root - DEBUG - Current time in IST: 12:32:00.847044
2025-06-02 12:32:00,847 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:32:00,847 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:32:51,418 - root - DEBUG - Checking market hours...
2025-06-02 12:32:51,418 - root - DEBUG - Market open: True
2025-06-02 12:32:51,418 - root - DEBUG - Fetching current market data...
2025-06-02 12:32:51,418 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:32:51,419 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:32:51,604 - root - INFO - Successfully fetched price for ^NSEI: 24683.5
2025-06-02 12:32:51,605 - root - DEBUG - Got spot price: 24683.5
2025-06-02 12:32:51,605 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:32:51,605 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:32:51.605420 to 2025-06-02 12:32:51.605420
2025-06-02 12:32:51,609 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:32:51,620 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:32:51,621 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:32:51,622 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:32:51,622 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:32:51,622 - root - DEBUG - Getting strike price...
2025-06-02 12:32:51,622 - root - INFO - Current spot: 24683.5, Selected strike: 24300
2025-06-02 12:32:51,622 - root - DEBUG - Current time in IST: 12:32:51.622963
2025-06-02 12:32:51,623 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:32:51,623 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:33:00,852 - root - DEBUG - Checking market hours...
2025-06-02 12:33:00,854 - root - DEBUG - Market open: True
2025-06-02 12:33:00,854 - root - DEBUG - Fetching current market data...
2025-06-02 12:33:00,854 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:33:00,856 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:33:01,012 - root - INFO - Successfully fetched price for ^NSEI: 24684.55078125
2025-06-02 12:33:01,012 - root - DEBUG - Got spot price: 24684.55078125
2025-06-02 12:33:01,012 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:33:01,012 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:33:01.012924 to 2025-06-02 12:33:01.012924
2025-06-02 12:33:01,015 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:33:01,037 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:33:01,038 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:33:01,046 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:33:01,046 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:33:01,046 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:33:01,046 - root - DEBUG - Getting strike price...
2025-06-02 12:33:01,046 - root - INFO - Current spot: 24684.55078125, Selected strike: 24300
2025-06-02 12:33:01,046 - root - DEBUG - Current time in IST: 12:33:01.046590
2025-06-02 12:33:01,049 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:33:01,049 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:33:51,637 - root - DEBUG - Checking market hours...
2025-06-02 12:33:51,637 - root - DEBUG - Market open: True
2025-06-02 12:33:51,638 - root - DEBUG - Fetching current market data...
2025-06-02 12:33:51,638 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:33:51,641 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:33:51,887 - root - INFO - Successfully fetched price for ^NSEI: 24708.55078125
2025-06-02 12:33:51,888 - root - DEBUG - Got spot price: 24708.55078125
2025-06-02 12:33:51,888 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:33:51,888 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:33:51.888790 to 2025-06-02 12:33:51.888790
2025-06-02 12:33:51,892 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:33:51,915 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:33:51,916 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:33:51,916 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:33:51,916 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:33:51,916 - root - DEBUG - Getting strike price...
2025-06-02 12:33:51,917 - root - INFO - Current spot: 24708.55078125, Selected strike: 24400
2025-06-02 12:33:51,917 - root - DEBUG - Current time in IST: 12:33:51.917651
2025-06-02 12:33:51,917 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:33:51,917 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:34:01,050 - root - DEBUG - Checking market hours...
2025-06-02 12:34:01,050 - root - DEBUG - Market open: True
2025-06-02 12:34:01,050 - root - DEBUG - Fetching current market data...
2025-06-02 12:34:01,050 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:34:01,052 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:34:01,278 - root - INFO - Successfully fetched price for ^NSEI: 24710.94921875
2025-06-02 12:34:01,278 - root - DEBUG - Got spot price: 24710.94921875
2025-06-02 12:34:01,278 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:34:01,278 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:34:01.278581 to 2025-06-02 12:34:01.278581
2025-06-02 12:34:01,281 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:34:01,297 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:34:01,297 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:34:01,302 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:34:01,302 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:34:01,302 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:34:01,302 - root - DEBUG - Getting strike price...
2025-06-02 12:34:01,302 - root - INFO - Current spot: 24710.94921875, Selected strike: 24400
2025-06-02 12:34:01,302 - root - DEBUG - Current time in IST: 12:34:01.302726
2025-06-02 12:34:01,302 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:34:01,303 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:34:51,926 - root - DEBUG - Checking market hours...
2025-06-02 12:34:51,927 - root - DEBUG - Market open: True
2025-06-02 12:34:51,927 - root - DEBUG - Fetching current market data...
2025-06-02 12:34:51,927 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:34:51,928 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:34:52,128 - root - INFO - Successfully fetched price for ^NSEI: 24713.400390625
2025-06-02 12:34:52,128 - root - DEBUG - Got spot price: 24713.400390625
2025-06-02 12:34:52,128 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:34:52,129 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:34:52.128527 to 2025-06-02 12:34:52.128527
2025-06-02 12:34:52,132 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:34:52,144 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:34:52,144 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:34:52,145 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:34:52,145 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:34:52,145 - root - DEBUG - Getting strike price...
2025-06-02 12:34:52,145 - root - INFO - Current spot: 24713.400390625, Selected strike: 24400
2025-06-02 12:34:52,145 - root - DEBUG - Current time in IST: 12:34:52.145069
2025-06-02 12:34:52,145 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:34:52,145 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:35:01,317 - root - DEBUG - Checking market hours...
2025-06-02 12:35:01,317 - root - DEBUG - Market open: True
2025-06-02 12:35:01,317 - root - DEBUG - Fetching current market data...
2025-06-02 12:35:01,317 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:35:01,319 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:35:01,601 - root - INFO - Successfully fetched price for ^NSEI: 24717.94921875
2025-06-02 12:35:01,602 - root - DEBUG - Got spot price: 24717.94921875
2025-06-02 12:35:01,602 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:35:01,602 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:35:01.602915 to 2025-06-02 12:35:01.602915
2025-06-02 12:35:01,606 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:35:01,629 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:35:01,630 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:35:01,634 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:35:01,635 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:35:01,635 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:35:01,635 - root - DEBUG - Getting strike price...
2025-06-02 12:35:01,635 - root - INFO - Current spot: 24717.94921875, Selected strike: 24400
2025-06-02 12:35:01,635 - root - DEBUG - Current time in IST: 12:35:01.635755
2025-06-02 12:35:01,635 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:35:01,636 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:35:52,156 - root - DEBUG - Checking market hours...
2025-06-02 12:35:52,156 - root - DEBUG - Market open: True
2025-06-02 12:35:52,156 - root - DEBUG - Fetching current market data...
2025-06-02 12:35:52,156 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:35:52,157 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:35:52,346 - root - INFO - Successfully fetched price for ^NSEI: 24722.94921875
2025-06-02 12:35:52,346 - root - DEBUG - Got spot price: 24722.94921875
2025-06-02 12:35:52,346 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:35:52,346 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:35:52.346699 to 2025-06-02 12:35:52.346699
2025-06-02 12:35:52,349 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:35:52,359 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:35:52,359 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:35:52,359 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:35:52,359 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:35:52,359 - root - DEBUG - Getting strike price...
2025-06-02 12:35:52,359 - root - INFO - Current spot: 24722.94921875, Selected strike: 24400
2025-06-02 12:35:52,359 - root - DEBUG - Current time in IST: 12:35:52.359290
2025-06-02 12:35:52,359 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:35:52,360 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:36:01,644 - root - DEBUG - Checking market hours...
2025-06-02 12:36:01,645 - root - DEBUG - Market open: True
2025-06-02 12:36:01,645 - root - DEBUG - Fetching current market data...
2025-06-02 12:36:01,645 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:36:01,646 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:36:01,825 - root - INFO - Successfully fetched price for ^NSEI: 24725.25
2025-06-02 12:36:01,826 - root - DEBUG - Got spot price: 24725.25
2025-06-02 12:36:01,826 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:36:01,826 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:36:01.826131 to 2025-06-02 12:36:01.826131
2025-06-02 12:36:01,829 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:36:01,844 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:36:01,844 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:36:01,849 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:36:01,849 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:36:01,850 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:36:01,850 - root - DEBUG - Getting strike price...
2025-06-02 12:36:01,850 - root - INFO - Current spot: 24725.25, Selected strike: 24400
2025-06-02 12:36:01,850 - root - DEBUG - Current time in IST: 12:36:01.850385
2025-06-02 12:36:01,850 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:36:01,850 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:36:52,370 - root - DEBUG - Checking market hours...
2025-06-02 12:36:52,370 - root - DEBUG - Market open: True
2025-06-02 12:36:52,370 - root - DEBUG - Fetching current market data...
2025-06-02 12:36:52,370 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:36:52,371 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:36:52,547 - root - INFO - Successfully fetched price for ^NSEI: 24713.400390625
2025-06-02 12:36:52,548 - root - DEBUG - Got spot price: 24713.400390625
2025-06-02 12:36:52,548 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:36:52,548 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:36:52.548135 to 2025-06-02 12:36:52.548135
2025-06-02 12:36:52,554 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:36:52,571 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:36:52,572 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:36:52,572 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:36:52,572 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:36:52,572 - root - DEBUG - Getting strike price...
2025-06-02 12:36:52,572 - root - INFO - Current spot: 24713.400390625, Selected strike: 24400
2025-06-02 12:36:52,572 - root - DEBUG - Current time in IST: 12:36:52.572728
2025-06-02 12:36:52,572 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:36:52,572 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:37:01,865 - root - DEBUG - Checking market hours...
2025-06-02 12:37:01,865 - root - DEBUG - Market open: True
2025-06-02 12:37:01,866 - root - DEBUG - Fetching current market data...
2025-06-02 12:37:01,866 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:37:01,867 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:37:02,003 - root - INFO - Successfully fetched price for ^NSEI: 24712.69921875
2025-06-02 12:37:02,003 - root - DEBUG - Got spot price: 24712.69921875
2025-06-02 12:37:02,004 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:37:02,004 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:37:02.004005 to 2025-06-02 12:37:02.004005
2025-06-02 12:37:02,007 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:37:02,022 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:37:02,022 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:37:02,027 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:37:02,028 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:37:02,028 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:37:02,028 - root - DEBUG - Getting strike price...
2025-06-02 12:37:02,028 - root - INFO - Current spot: 24712.69921875, Selected strike: 24400
2025-06-02 12:37:02,028 - root - DEBUG - Current time in IST: 12:37:02.028193
2025-06-02 12:37:02,028 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:37:02,028 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:37:52,577 - root - DEBUG - Checking market hours...
2025-06-02 12:37:52,577 - root - DEBUG - Market open: True
2025-06-02 12:37:52,577 - root - DEBUG - Fetching current market data...
2025-06-02 12:37:52,578 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:37:52,579 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:37:52,753 - root - INFO - Successfully fetched price for ^NSEI: 24729.75
2025-06-02 12:37:52,753 - root - DEBUG - Got spot price: 24729.75
2025-06-02 12:37:52,753 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:37:52,754 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:37:52.753513 to 2025-06-02 12:37:52.753513
2025-06-02 12:37:52,758 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:37:52,778 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:37:52,780 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:37:52,780 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:37:52,780 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:37:52,780 - root - DEBUG - Getting strike price...
2025-06-02 12:37:52,780 - root - INFO - Current spot: 24729.75, Selected strike: 24400
2025-06-02 12:37:52,781 - root - DEBUG - Current time in IST: 12:37:52.781446
2025-06-02 12:37:52,781 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:37:52,781 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:38:02,043 - root - DEBUG - Checking market hours...
2025-06-02 12:38:02,043 - root - DEBUG - Market open: True
2025-06-02 12:38:02,044 - root - DEBUG - Fetching current market data...
2025-06-02 12:38:02,044 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:38:02,045 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:38:02,212 - root - INFO - Successfully fetched price for ^NSEI: 24729.05078125
2025-06-02 12:38:02,213 - root - DEBUG - Got spot price: 24729.05078125
2025-06-02 12:38:02,213 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:38:02,213 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:38:02.213455 to 2025-06-02 12:38:02.213455
2025-06-02 12:38:02,216 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:38:02,228 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:38:02,229 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:38:02,233 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:38:02,233 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:38:02,233 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:38:02,233 - root - DEBUG - Getting strike price...
2025-06-02 12:38:02,233 - root - INFO - Current spot: 24729.05078125, Selected strike: 24400
2025-06-02 12:38:02,233 - root - DEBUG - Current time in IST: 12:38:02.233747
2025-06-02 12:38:02,233 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:38:02,234 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:38:52,795 - root - DEBUG - Checking market hours...
2025-06-02 12:38:52,796 - root - DEBUG - Market open: True
2025-06-02 12:38:52,796 - root - DEBUG - Fetching current market data...
2025-06-02 12:38:52,796 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:38:52,797 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:38:52,978 - root - INFO - Successfully fetched price for ^NSEI: 24729.0
2025-06-02 12:38:52,980 - root - DEBUG - Got spot price: 24729.0
2025-06-02 12:38:52,980 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:38:52,980 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:38:52.980420 to 2025-06-02 12:38:52.980420
2025-06-02 12:38:52,983 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:38:52,998 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:38:52,998 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:38:52,998 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:38:52,998 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:38:52,998 - root - DEBUG - Getting strike price...
2025-06-02 12:38:52,998 - root - INFO - Current spot: 24729.0, Selected strike: 24400
2025-06-02 12:38:52,999 - root - DEBUG - Current time in IST: 12:38:52.999760
2025-06-02 12:38:52,999 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:38:52,999 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:39:02,235 - root - DEBUG - Checking market hours...
2025-06-02 12:39:02,235 - root - DEBUG - Market open: True
2025-06-02 12:39:02,235 - root - DEBUG - Fetching current market data...
2025-06-02 12:39:02,235 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:39:02,236 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:39:02,462 - root - INFO - Successfully fetched price for ^NSEI: 24729.900390625
2025-06-02 12:39:02,462 - root - DEBUG - Got spot price: 24729.900390625
2025-06-02 12:39:02,463 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:39:02,463 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:39:02.463795 to 2025-06-02 12:39:02.463795
2025-06-02 12:39:02,466 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:39:02,485 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:39:02,485 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:39:02,491 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:39:02,491 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:39:02,491 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:39:02,492 - root - DEBUG - Getting strike price...
2025-06-02 12:39:02,492 - root - INFO - Current spot: 24729.900390625, Selected strike: 24400
2025-06-02 12:39:02,492 - root - DEBUG - Current time in IST: 12:39:02.492863
2025-06-02 12:39:02,492 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:39:02,493 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:39:53,009 - root - DEBUG - Checking market hours...
2025-06-02 12:39:53,010 - root - DEBUG - Market open: True
2025-06-02 12:39:53,011 - root - DEBUG - Fetching current market data...
2025-06-02 12:39:53,011 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:39:53,013 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:39:53,212 - root - INFO - Successfully fetched price for ^NSEI: 24730.099609375
2025-06-02 12:39:53,213 - root - DEBUG - Got spot price: 24730.099609375
2025-06-02 12:39:53,213 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:39:53,213 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:39:53.213347 to 2025-06-02 12:39:53.213347
2025-06-02 12:39:53,216 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:39:53,228 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:39:53,229 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:39:53,229 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:39:53,229 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:39:53,229 - root - DEBUG - Getting strike price...
2025-06-02 12:39:53,229 - root - INFO - Current spot: 24730.099609375, Selected strike: 24400
2025-06-02 12:39:53,229 - root - DEBUG - Current time in IST: 12:39:53.229530
2025-06-02 12:39:53,229 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:39:53,230 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:40:02,501 - root - DEBUG - Checking market hours...
2025-06-02 12:40:02,502 - root - DEBUG - Market open: True
2025-06-02 12:40:02,502 - root - DEBUG - Fetching current market data...
2025-06-02 12:40:02,502 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:40:02,503 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:40:02,598 - root - INFO - Successfully fetched price for ^NSEI: 24730.099609375
2025-06-02 12:40:02,598 - root - DEBUG - Got spot price: 24730.099609375
2025-06-02 12:40:02,599 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:40:02,599 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:40:02.599385 to 2025-06-02 12:40:02.599385
2025-06-02 12:40:02,602 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:40:02,625 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:40:02,625 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:40:02,629 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:40:02,629 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:40:02,629 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:40:02,629 - root - DEBUG - Getting strike price...
2025-06-02 12:40:02,630 - root - INFO - Current spot: 24730.099609375, Selected strike: 24400
2025-06-02 12:40:02,630 - root - DEBUG - Current time in IST: 12:40:02.630697
2025-06-02 12:40:02,630 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:40:02,631 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:40:53,232 - root - DEBUG - Checking market hours...
2025-06-02 12:40:53,232 - root - DEBUG - Market open: True
2025-06-02 12:40:53,232 - root - DEBUG - Fetching current market data...
2025-06-02 12:40:53,232 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:40:53,233 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:40:53,480 - root - INFO - Successfully fetched price for ^NSEI: 24723.150390625
2025-06-02 12:40:53,480 - root - DEBUG - Got spot price: 24723.150390625
2025-06-02 12:40:53,480 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:40:53,480 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:40:53.480325 to 2025-06-02 12:40:53.480325
2025-06-02 12:40:53,484 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:40:53,496 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:40:53,497 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:40:53,497 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:40:53,497 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:40:53,497 - root - DEBUG - Getting strike price...
2025-06-02 12:40:53,497 - root - INFO - Current spot: 24723.150390625, Selected strike: 24400
2025-06-02 12:40:53,497 - root - DEBUG - Current time in IST: 12:40:53.497595
2025-06-02 12:40:53,498 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:40:53,498 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:41:02,644 - root - DEBUG - Checking market hours...
2025-06-02 12:41:02,644 - root - DEBUG - Market open: True
2025-06-02 12:41:02,645 - root - DEBUG - Fetching current market data...
2025-06-02 12:41:02,645 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:41:02,645 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:41:02,834 - root - INFO - Successfully fetched price for ^NSEI: 24723.0
2025-06-02 12:41:02,834 - root - DEBUG - Got spot price: 24723.0
2025-06-02 12:41:02,835 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:41:02,835 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:41:02.835531 to 2025-06-02 12:41:02.835531
2025-06-02 12:41:02,839 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:41:02,860 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:41:02,861 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:41:02,864 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:41:02,864 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:41:02,864 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:41:02,864 - root - DEBUG - Getting strike price...
2025-06-02 12:41:02,864 - root - INFO - Current spot: 24723.0, Selected strike: 24400
2025-06-02 12:41:02,864 - root - DEBUG - Current time in IST: 12:41:02.864216
2025-06-02 12:41:02,864 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:41:02,865 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:41:53,500 - root - DEBUG - Checking market hours...
2025-06-02 12:41:53,501 - root - DEBUG - Market open: True
2025-06-02 12:41:53,501 - root - DEBUG - Fetching current market data...
2025-06-02 12:41:53,501 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:41:53,501 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:41:53,701 - root - INFO - Successfully fetched price for ^NSEI: 24720.69921875
2025-06-02 12:41:53,701 - root - DEBUG - Got spot price: 24720.69921875
2025-06-02 12:41:53,701 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:41:53,702 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:41:53.701522 to 2025-06-02 12:41:53.701522
2025-06-02 12:41:53,704 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:41:53,719 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:41:53,721 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:41:53,721 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:41:53,721 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:41:53,721 - root - DEBUG - Getting strike price...
2025-06-02 12:41:53,721 - root - INFO - Current spot: 24720.69921875, Selected strike: 24400
2025-06-02 12:41:53,722 - root - DEBUG - Current time in IST: 12:41:53.722131
2025-06-02 12:41:53,722 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:41:53,722 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:42:02,876 - root - DEBUG - Checking market hours...
2025-06-02 12:42:02,878 - root - DEBUG - Market open: True
2025-06-02 12:42:02,878 - root - DEBUG - Fetching current market data...
2025-06-02 12:42:02,878 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:42:02,879 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:42:03,069 - root - INFO - Successfully fetched price for ^NSEI: 24717.94921875
2025-06-02 12:42:03,069 - root - DEBUG - Got spot price: 24717.94921875
2025-06-02 12:42:03,069 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:42:03,069 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:42:03.069843 to 2025-06-02 12:42:03.069843
2025-06-02 12:42:03,073 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:42:03,095 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:42:03,095 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:42:03,100 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:42:03,100 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:42:03,100 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:42:03,100 - root - DEBUG - Getting strike price...
2025-06-02 12:42:03,100 - root - INFO - Current spot: 24717.94921875, Selected strike: 24400
2025-06-02 12:42:03,100 - root - DEBUG - Current time in IST: 12:42:03.100667
2025-06-02 12:42:03,100 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:42:03,102 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:42:53,722 - root - DEBUG - Checking market hours...
2025-06-02 12:42:53,722 - root - DEBUG - Market open: True
2025-06-02 12:42:53,722 - root - DEBUG - Fetching current market data...
2025-06-02 12:42:53,722 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:42:53,723 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:42:54,043 - root - INFO - Successfully fetched price for ^NSEI: 24717.5
2025-06-02 12:42:54,043 - root - DEBUG - Got spot price: 24717.5
2025-06-02 12:42:54,043 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:42:54,044 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:42:54.043780 to 2025-06-02 12:42:54.043780
2025-06-02 12:42:54,048 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:42:54,064 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:42:54,065 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:42:54,065 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:42:54,065 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:42:54,065 - root - DEBUG - Getting strike price...
2025-06-02 12:42:54,065 - root - INFO - Current spot: 24717.5, Selected strike: 24400
2025-06-02 12:42:54,065 - root - DEBUG - Current time in IST: 12:42:54.065381
2025-06-02 12:42:54,066 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:42:54,066 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:43:03,115 - root - DEBUG - Checking market hours...
2025-06-02 12:43:03,116 - root - DEBUG - Market open: True
2025-06-02 12:43:03,116 - root - DEBUG - Fetching current market data...
2025-06-02 12:43:03,116 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:43:03,117 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:43:03,457 - root - INFO - Successfully fetched price for ^NSEI: 24719.900390625
2025-06-02 12:43:03,458 - root - DEBUG - Got spot price: 24719.900390625
2025-06-02 12:43:03,458 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:43:03,458 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:43:03.458572 to 2025-06-02 12:43:03.458572
2025-06-02 12:43:03,461 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:43:03,472 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:43:03,472 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:43:03,476 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:43:03,476 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:43:03,476 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:43:03,477 - root - DEBUG - Getting strike price...
2025-06-02 12:43:03,477 - root - INFO - Current spot: 24719.900390625, Selected strike: 24400
2025-06-02 12:43:03,477 - root - DEBUG - Current time in IST: 12:43:03.477725
2025-06-02 12:43:03,477 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:43:03,478 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:43:54,076 - root - DEBUG - Checking market hours...
2025-06-02 12:43:54,077 - root - DEBUG - Market open: True
2025-06-02 12:43:54,077 - root - DEBUG - Fetching current market data...
2025-06-02 12:43:54,077 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:43:54,077 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:43:54,306 - root - INFO - Successfully fetched price for ^NSEI: 24725.25
2025-06-02 12:43:54,307 - root - DEBUG - Got spot price: 24725.25
2025-06-02 12:43:54,307 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:43:54,307 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:43:54.307274 to 2025-06-02 12:43:54.307274
2025-06-02 12:43:54,310 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:43:54,324 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:43:54,324 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:43:54,325 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:43:54,325 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:43:54,325 - root - DEBUG - Getting strike price...
2025-06-02 12:43:54,325 - root - INFO - Current spot: 24725.25, Selected strike: 24400
2025-06-02 12:43:54,325 - root - DEBUG - Current time in IST: 12:43:54.325604
2025-06-02 12:43:54,325 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:43:54,325 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:44:03,493 - root - DEBUG - Checking market hours...
2025-06-02 12:44:03,493 - root - DEBUG - Market open: True
2025-06-02 12:44:03,493 - root - DEBUG - Fetching current market data...
2025-06-02 12:44:03,493 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:44:03,495 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:44:03,695 - root - INFO - Successfully fetched price for ^NSEI: 24725.55078125
2025-06-02 12:44:03,696 - root - DEBUG - Got spot price: 24725.55078125
2025-06-02 12:44:03,696 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:44:03,696 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:44:03.696994 to 2025-06-02 12:44:03.696994
2025-06-02 12:44:03,702 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:44:03,723 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:44:03,724 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:44:03,724 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:44:03,724 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:44:03,724 - root - DEBUG - Getting strike price...
2025-06-02 12:44:03,724 - root - INFO - Current spot: 24725.55078125, Selected strike: 24400
2025-06-02 12:44:03,724 - root - DEBUG - Current time in IST: 12:44:03.724522
2025-06-02 12:44:03,724 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:44:03,724 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:44:54,335 - root - DEBUG - Checking market hours...
2025-06-02 12:44:54,336 - root - DEBUG - Market open: True
2025-06-02 12:44:54,336 - root - DEBUG - Fetching current market data...
2025-06-02 12:44:54,336 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:44:54,337 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:44:54,526 - root - INFO - Successfully fetched price for ^NSEI: 24722.44921875
2025-06-02 12:44:54,527 - root - DEBUG - Got spot price: 24722.44921875
2025-06-02 12:44:54,527 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:44:54,527 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:44:54.527873 to 2025-06-02 12:44:54.527873
2025-06-02 12:44:54,530 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:44:54,555 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:44:54,558 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:44:54,558 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:44:54,558 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:44:54,558 - root - DEBUG - Getting strike price...
2025-06-02 12:44:54,558 - root - INFO - Current spot: 24722.44921875, Selected strike: 24400
2025-06-02 12:44:54,558 - root - DEBUG - Current time in IST: 12:44:54.558922
2025-06-02 12:44:54,558 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:44:54,559 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:45:03,731 - root - DEBUG - Checking market hours...
2025-06-02 12:45:03,732 - root - DEBUG - Market open: True
2025-06-02 12:45:03,732 - root - DEBUG - Fetching current market data...
2025-06-02 12:45:03,732 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:45:03,733 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:45:03,931 - root - INFO - Successfully fetched price for ^NSEI: 24723.849609375
2025-06-02 12:45:03,932 - root - DEBUG - Got spot price: 24723.849609375
2025-06-02 12:45:03,932 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:45:03,932 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:45:03.932941 to 2025-06-02 12:45:03.932941
2025-06-02 12:45:03,936 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:45:03,952 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:45:03,957 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:45:03,957 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:45:03,958 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:45:03,958 - root - DEBUG - Getting strike price...
2025-06-02 12:45:03,958 - root - INFO - Current spot: 24723.849609375, Selected strike: 24400
2025-06-02 12:45:03,958 - root - DEBUG - Current time in IST: 12:45:03.958760
2025-06-02 12:45:03,958 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:45:03,958 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:45:10,728 - root - INFO - Loaded previous state. Balance: 60000
2025-06-02 12:45:10,728 - root - INFO - Starting paper trading session...
2025-06-02 12:45:10,729 - root - DEBUG - Checking market hours...
2025-06-02 12:45:10,899 - root - DEBUG - Market open: True
2025-06-02 12:45:10,899 - root - DEBUG - Fetching current market data...
2025-06-02 12:45:10,899 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:45:10,902 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-06-02 12:45:10,902 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:45:10,904 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-06-02 12:45:10,904 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:45:11,154 - root - INFO - Successfully fetched price for ^NSEI: 24726.44921875
2025-06-02 12:45:11,154 - root - DEBUG - Got spot price: 24726.44921875
2025-06-02 12:45:11,154 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:45:11,154 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:45:11.154402 to 2025-06-02 12:45:11.154402
2025-06-02 12:45:11,158 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:45:11,278 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:45:11,513 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:45:11,694 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:45:11,694 - yfinance - ERROR - ['NSEI.BO']: HTTPError('HTTP Error 404: ')
2025-06-02 12:45:11,698 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:45:11,698 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:45:11,698 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:45:11,698 - root - DEBUG - Getting strike price...
2025-06-02 12:45:11,698 - root - INFO - Current spot: 24726.44921875, Selected strike: 24400
2025-06-02 12:45:11,698 - root - DEBUG - Current time in IST: 12:45:11.698684
2025-06-02 12:45:11,698 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:45:11,699 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:45:54,565 - root - DEBUG - Checking market hours...
2025-06-02 12:45:54,566 - root - DEBUG - Market open: True
2025-06-02 12:45:54,566 - root - DEBUG - Fetching current market data...
2025-06-02 12:45:54,566 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:45:54,567 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:45:54,746 - root - INFO - Successfully fetched price for ^NSEI: 24718.599609375
2025-06-02 12:45:54,747 - root - DEBUG - Got spot price: 24718.599609375
2025-06-02 12:45:54,747 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:45:54,747 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:45:54.747140 to 2025-06-02 12:45:54.747140
2025-06-02 12:45:54,750 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:45:54,767 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:45:54,768 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:45:54,769 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:45:54,769 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:45:54,769 - root - DEBUG - Getting strike price...
2025-06-02 12:45:54,769 - root - INFO - Current spot: 24718.599609375, Selected strike: 24400
2025-06-02 12:45:54,769 - root - DEBUG - Current time in IST: 12:45:54.769887
2025-06-02 12:45:54,769 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:45:54,770 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:46:03,967 - root - DEBUG - Checking market hours...
2025-06-02 12:46:03,967 - root - DEBUG - Market open: True
2025-06-02 12:46:03,968 - root - DEBUG - Fetching current market data...
2025-06-02 12:46:03,968 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:46:03,969 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:46:04,273 - root - INFO - Successfully fetched price for ^NSEI: 24720.80078125
2025-06-02 12:46:04,273 - root - DEBUG - Got spot price: 24720.80078125
2025-06-02 12:46:04,273 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:46:04,274 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:46:04.274376 to 2025-06-02 12:46:04.274376
2025-06-02 12:46:04,277 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:46:04,293 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:46:04,294 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:46:04,294 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:46:04,294 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:46:04,294 - root - DEBUG - Getting strike price...
2025-06-02 12:46:04,294 - root - INFO - Current spot: 24720.80078125, Selected strike: 24400
2025-06-02 12:46:04,295 - root - DEBUG - Current time in IST: 12:46:04.295519
2025-06-02 12:46:04,295 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:46:04,295 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:46:11,701 - root - DEBUG - Checking market hours...
2025-06-02 12:46:11,701 - root - DEBUG - Market open: True
2025-06-02 12:46:11,702 - root - DEBUG - Fetching current market data...
2025-06-02 12:46:11,702 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:46:11,703 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:46:11,814 - root - INFO - Successfully fetched price for ^NSEI: 24720.80078125
2025-06-02 12:46:11,815 - root - DEBUG - Got spot price: 24720.80078125
2025-06-02 12:46:11,815 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:46:11,815 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:46:11.815696 to 2025-06-02 12:46:11.815696
2025-06-02 12:46:11,818 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:46:12,104 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:46:12,339 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:46:12,339 - yfinance - ERROR - ['NSEI.BO']: HTTPError('HTTP Error 404: ')
2025-06-02 12:46:12,344 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:46:12,345 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:46:12,345 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:46:12,345 - root - DEBUG - Getting strike price...
2025-06-02 12:46:12,345 - root - INFO - Current spot: 24720.80078125, Selected strike: 24400
2025-06-02 12:46:12,345 - root - DEBUG - Current time in IST: 12:46:12.345187
2025-06-02 12:46:12,345 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:46:12,346 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:46:54,776 - root - DEBUG - Checking market hours...
2025-06-02 12:46:54,777 - root - DEBUG - Market open: True
2025-06-02 12:46:54,777 - root - DEBUG - Fetching current market data...
2025-06-02 12:46:54,777 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:46:54,778 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:46:54,968 - root - INFO - Successfully fetched price for ^NSEI: 24722.05078125
2025-06-02 12:46:54,969 - root - DEBUG - Got spot price: 24722.05078125
2025-06-02 12:46:54,969 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:46:54,969 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:46:54.969970 to 2025-06-02 12:46:54.969970
2025-06-02 12:46:54,973 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:46:54,993 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:46:54,994 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:46:54,995 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:46:54,995 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:46:54,995 - root - DEBUG - Getting strike price...
2025-06-02 12:46:54,995 - root - INFO - Current spot: 24722.05078125, Selected strike: 24400
2025-06-02 12:46:54,995 - root - DEBUG - Current time in IST: 12:46:54.995527
2025-06-02 12:46:54,995 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:46:54,995 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:47:04,297 - root - DEBUG - Checking market hours...
2025-06-02 12:47:04,298 - root - DEBUG - Market open: True
2025-06-02 12:47:04,298 - root - DEBUG - Fetching current market data...
2025-06-02 12:47:04,298 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:47:04,299 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:47:04,456 - root - INFO - Successfully fetched price for ^NSEI: 24722.349609375
2025-06-02 12:47:04,457 - root - DEBUG - Got spot price: 24722.349609375
2025-06-02 12:47:04,457 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:47:04,457 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:47:04.457122 to 2025-06-02 12:47:04.457122
2025-06-02 12:47:04,460 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:47:04,483 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:47:04,484 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:47:04,484 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:47:04,484 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:47:04,485 - root - DEBUG - Getting strike price...
2025-06-02 12:47:04,485 - root - INFO - Current spot: 24722.349609375, Selected strike: 24400
2025-06-02 12:47:04,485 - root - DEBUG - Current time in IST: 12:47:04.485970
2025-06-02 12:47:04,485 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:47:04,486 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:47:12,360 - root - DEBUG - Checking market hours...
2025-06-02 12:47:12,360 - root - DEBUG - Market open: True
2025-06-02 12:47:12,360 - root - DEBUG - Fetching current market data...
2025-06-02 12:47:12,360 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:47:12,362 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:47:12,508 - root - INFO - Successfully fetched price for ^NSEI: 24721.69921875
2025-06-02 12:47:12,509 - root - DEBUG - Got spot price: 24721.69921875
2025-06-02 12:47:12,509 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:47:12,509 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:47:12.509963 to 2025-06-02 12:47:12.509963
2025-06-02 12:47:12,513 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:47:12,532 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:47:12,532 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:47:12,535 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:47:12,536 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:47:12,536 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:47:12,536 - root - DEBUG - Getting strike price...
2025-06-02 12:47:12,536 - root - INFO - Current spot: 24721.69921875, Selected strike: 24400
2025-06-02 12:47:12,536 - root - DEBUG - Current time in IST: 12:47:12.536980
2025-06-02 12:47:12,536 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:47:12,537 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:47:54,996 - root - DEBUG - Checking market hours...
2025-06-02 12:47:54,996 - root - DEBUG - Market open: True
2025-06-02 12:47:54,996 - root - DEBUG - Fetching current market data...
2025-06-02 12:47:54,996 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:47:54,997 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:47:55,163 - root - INFO - Successfully fetched price for ^NSEI: 24726.30078125
2025-06-02 12:47:55,163 - root - DEBUG - Got spot price: 24726.30078125
2025-06-02 12:47:55,163 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:47:55,163 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:47:55.163620 to 2025-06-02 12:47:55.163620
2025-06-02 12:47:55,167 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:47:55,182 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:47:55,183 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:47:55,183 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:47:55,183 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:47:55,183 - root - DEBUG - Getting strike price...
2025-06-02 12:47:55,183 - root - INFO - Current spot: 24726.30078125, Selected strike: 24400
2025-06-02 12:47:55,183 - root - DEBUG - Current time in IST: 12:47:55.183718
2025-06-02 12:47:55,183 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:47:55,184 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:48:04,498 - root - DEBUG - Checking market hours...
2025-06-02 12:48:04,499 - root - DEBUG - Market open: True
2025-06-02 12:48:04,499 - root - DEBUG - Fetching current market data...
2025-06-02 12:48:04,499 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:48:04,500 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:48:04,641 - root - INFO - Successfully fetched price for ^NSEI: 24726.19921875
2025-06-02 12:48:04,642 - root - DEBUG - Got spot price: 24726.19921875
2025-06-02 12:48:04,642 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:48:04,642 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:48:04.642671 to 2025-06-02 12:48:04.642671
2025-06-02 12:48:04,645 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:48:04,670 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:48:04,673 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:48:04,674 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:48:04,674 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:48:04,674 - root - DEBUG - Getting strike price...
2025-06-02 12:48:04,675 - root - INFO - Current spot: 24726.19921875, Selected strike: 24400
2025-06-02 12:48:04,675 - root - DEBUG - Current time in IST: 12:48:04.675276
2025-06-02 12:48:04,675 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:48:04,677 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:48:12,540 - root - DEBUG - Checking market hours...
2025-06-02 12:48:12,540 - root - DEBUG - Market open: True
2025-06-02 12:48:12,541 - root - DEBUG - Fetching current market data...
2025-06-02 12:48:12,541 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:48:12,542 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:48:12,627 - root - INFO - Successfully fetched price for ^NSEI: 24726.19921875
2025-06-02 12:48:12,628 - root - DEBUG - Got spot price: 24726.19921875
2025-06-02 12:48:12,628 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:48:12,628 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:48:12.628403 to 2025-06-02 12:48:12.628403
2025-06-02 12:48:12,631 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:48:12,650 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:48:12,650 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:48:12,655 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:48:12,655 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:48:12,655 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:48:12,655 - root - DEBUG - Getting strike price...
2025-06-02 12:48:12,655 - root - INFO - Current spot: 24726.19921875, Selected strike: 24400
2025-06-02 12:48:12,655 - root - DEBUG - Current time in IST: 12:48:12.655406
2025-06-02 12:48:12,655 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:48:12,655 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:48:55,185 - root - DEBUG - Checking market hours...
2025-06-02 12:48:55,185 - root - DEBUG - Market open: True
2025-06-02 12:48:55,186 - root - DEBUG - Fetching current market data...
2025-06-02 12:48:55,187 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:48:55,189 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:48:55,492 - root - INFO - Successfully fetched price for ^NSEI: 24727.099609375
2025-06-02 12:48:55,493 - root - DEBUG - Got spot price: 24727.099609375
2025-06-02 12:48:55,493 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:48:55,493 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:48:55.493786 to 2025-06-02 12:48:55.493786
2025-06-02 12:48:55,498 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:48:55,511 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:48:55,511 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:48:55,511 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:48:55,511 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:48:55,512 - root - DEBUG - Getting strike price...
2025-06-02 12:48:55,512 - root - INFO - Current spot: 24727.099609375, Selected strike: 24400
2025-06-02 12:48:55,512 - root - DEBUG - Current time in IST: 12:48:55.512027
2025-06-02 12:48:55,512 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:48:55,512 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:49:04,677 - root - DEBUG - Checking market hours...
2025-06-02 12:49:04,677 - root - DEBUG - Market open: True
2025-06-02 12:49:04,677 - root - DEBUG - Fetching current market data...
2025-06-02 12:49:04,677 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:49:04,679 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:49:05,052 - root - INFO - Successfully fetched price for ^NSEI: 24727.05078125
2025-06-02 12:49:05,053 - root - DEBUG - Got spot price: 24727.05078125
2025-06-02 12:49:05,053 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:49:05,053 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:49:05.053306 to 2025-06-02 12:49:05.053306
2025-06-02 12:49:05,055 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:49:05,069 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:49:05,070 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:49:05,070 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:49:05,070 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:49:05,070 - root - DEBUG - Getting strike price...
2025-06-02 12:49:05,070 - root - INFO - Current spot: 24727.05078125, Selected strike: 24400
2025-06-02 12:49:05,070 - root - DEBUG - Current time in IST: 12:49:05.070723
2025-06-02 12:49:05,070 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:49:05,070 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:49:12,663 - root - DEBUG - Checking market hours...
2025-06-02 12:49:12,663 - root - DEBUG - Market open: True
2025-06-02 12:49:12,664 - root - DEBUG - Fetching current market data...
2025-06-02 12:49:12,664 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:49:12,665 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:49:12,821 - root - INFO - Successfully fetched price for ^NSEI: 24728.25
2025-06-02 12:49:12,821 - root - DEBUG - Got spot price: 24728.25
2025-06-02 12:49:12,822 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:49:12,822 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:49:12.822640 to 2025-06-02 12:49:12.822640
2025-06-02 12:49:12,825 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:49:12,834 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:49:12,835 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:49:12,839 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:49:12,839 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:49:12,839 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:49:12,839 - root - DEBUG - Getting strike price...
2025-06-02 12:49:12,839 - root - INFO - Current spot: 24728.25, Selected strike: 24400
2025-06-02 12:49:12,839 - root - DEBUG - Current time in IST: 12:49:12.839841
2025-06-02 12:49:12,839 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:49:12,840 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:49:55,525 - root - DEBUG - Checking market hours...
2025-06-02 12:49:55,525 - root - DEBUG - Market open: True
2025-06-02 12:49:55,525 - root - DEBUG - Fetching current market data...
2025-06-02 12:49:55,526 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:49:55,526 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:49:55,736 - root - INFO - Successfully fetched price for ^NSEI: 24731.150390625
2025-06-02 12:49:55,736 - root - DEBUG - Got spot price: 24731.150390625
2025-06-02 12:49:55,736 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:49:55,736 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:49:55.736622 to 2025-06-02 12:49:55.736622
2025-06-02 12:49:55,739 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:49:55,758 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:49:55,759 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:49:55,759 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:49:55,759 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:49:55,759 - root - DEBUG - Getting strike price...
2025-06-02 12:49:55,759 - root - INFO - Current spot: 24731.150390625, Selected strike: 24400
2025-06-02 12:49:55,759 - root - DEBUG - Current time in IST: 12:49:55.759025
2025-06-02 12:49:55,759 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:49:55,760 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:50:05,073 - root - DEBUG - Checking market hours...
2025-06-02 12:50:05,074 - root - DEBUG - Market open: True
2025-06-02 12:50:05,074 - root - DEBUG - Fetching current market data...
2025-06-02 12:50:05,074 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:50:05,081 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:50:09,576 - root - INFO - Successfully fetched price for ^NSEI: 24732.05078125
2025-06-02 12:50:09,576 - root - DEBUG - Got spot price: 24732.05078125
2025-06-02 12:50:09,576 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:50:09,577 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:50:09.577455 to 2025-06-02 12:50:09.577455
2025-06-02 12:50:09,580 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:50:09,604 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:50:09,604 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:50:09,604 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:50:09,604 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:50:09,604 - root - DEBUG - Getting strike price...
2025-06-02 12:50:09,604 - root - INFO - Current spot: 24732.05078125, Selected strike: 24400
2025-06-02 12:50:09,604 - root - DEBUG - Current time in IST: 12:50:09.604671
2025-06-02 12:50:09,604 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:50:09,604 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:50:12,840 - root - DEBUG - Checking market hours...
2025-06-02 12:50:12,840 - root - DEBUG - Market open: True
2025-06-02 12:50:12,840 - root - DEBUG - Fetching current market data...
2025-06-02 12:50:12,840 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:50:12,842 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:50:13,024 - root - INFO - Successfully fetched price for ^NSEI: 24731.69921875
2025-06-02 12:50:13,024 - root - DEBUG - Got spot price: 24731.69921875
2025-06-02 12:50:13,025 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:50:13,026 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:50:13.025779 to 2025-06-02 12:50:13.025779
2025-06-02 12:50:13,029 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:50:13,041 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:50:13,041 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:50:13,046 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:50:13,046 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:50:13,046 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:50:13,047 - root - DEBUG - Getting strike price...
2025-06-02 12:50:13,047 - root - INFO - Current spot: 24731.69921875, Selected strike: 24400
2025-06-02 12:50:13,047 - root - DEBUG - Current time in IST: 12:50:13.047067
2025-06-02 12:50:13,047 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:50:13,047 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:50:55,775 - root - DEBUG - Checking market hours...
2025-06-02 12:50:55,776 - root - DEBUG - Market open: True
2025-06-02 12:50:55,776 - root - DEBUG - Fetching current market data...
2025-06-02 12:50:55,776 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:50:55,777 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:50:55,924 - root - INFO - Successfully fetched price for ^NSEI: 24729.099609375
2025-06-02 12:50:55,924 - root - DEBUG - Got spot price: 24729.099609375
2025-06-02 12:50:55,924 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:50:55,925 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:50:55.924085 to 2025-06-02 12:50:55.924085
2025-06-02 12:50:55,926 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:50:55,946 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:50:55,946 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:50:55,946 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:50:55,947 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:50:55,947 - root - DEBUG - Getting strike price...
2025-06-02 12:50:55,947 - root - INFO - Current spot: 24729.099609375, Selected strike: 24400
2025-06-02 12:50:55,948 - root - DEBUG - Current time in IST: 12:50:55.948690
2025-06-02 12:50:55,948 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:50:55,948 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:51:09,609 - root - DEBUG - Checking market hours...
2025-06-02 12:51:09,610 - root - DEBUG - Market open: True
2025-06-02 12:51:09,610 - root - DEBUG - Fetching current market data...
2025-06-02 12:51:09,610 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:51:09,611 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:51:09,878 - root - INFO - Successfully fetched price for ^NSEI: 24731.80078125
2025-06-02 12:51:09,878 - root - DEBUG - Got spot price: 24731.80078125
2025-06-02 12:51:09,878 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:51:09,878 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:51:09.878464 to 2025-06-02 12:51:09.878464
2025-06-02 12:51:09,881 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:51:09,893 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:51:09,894 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:51:09,894 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:51:09,894 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:51:09,894 - root - DEBUG - Getting strike price...
2025-06-02 12:51:09,894 - root - INFO - Current spot: 24731.80078125, Selected strike: 24400
2025-06-02 12:51:09,894 - root - DEBUG - Current time in IST: 12:51:09.894403
2025-06-02 12:51:09,895 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:51:09,896 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:51:13,058 - root - DEBUG - Checking market hours...
2025-06-02 12:51:13,058 - root - DEBUG - Market open: True
2025-06-02 12:51:13,059 - root - DEBUG - Fetching current market data...
2025-06-02 12:51:13,059 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:51:13,059 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:51:13,201 - root - INFO - Successfully fetched price for ^NSEI: 24732.5
2025-06-02 12:51:13,201 - root - DEBUG - Got spot price: 24732.5
2025-06-02 12:51:13,201 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:51:13,202 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:51:13.202486 to 2025-06-02 12:51:13.202486
2025-06-02 12:51:13,205 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:51:13,228 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:51:13,228 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:51:13,234 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:51:13,234 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:51:13,234 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:51:13,235 - root - DEBUG - Getting strike price...
2025-06-02 12:51:13,235 - root - INFO - Current spot: 24732.5, Selected strike: 24400
2025-06-02 12:51:13,235 - root - DEBUG - Current time in IST: 12:51:13.235056
2025-06-02 12:51:13,235 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:51:13,236 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:51:55,963 - root - DEBUG - Checking market hours...
2025-06-02 12:51:55,964 - root - DEBUG - Market open: True
2025-06-02 12:51:55,964 - root - DEBUG - Fetching current market data...
2025-06-02 12:51:55,964 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:51:55,965 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:51:56,185 - root - INFO - Successfully fetched price for ^NSEI: 24732.44921875
2025-06-02 12:51:56,185 - root - DEBUG - Got spot price: 24732.44921875
2025-06-02 12:51:56,185 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:51:56,185 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:51:56.185313 to 2025-06-02 12:51:56.185313
2025-06-02 12:51:56,190 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:51:56,212 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:51:56,213 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:51:56,214 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:51:56,215 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:51:56,215 - root - DEBUG - Getting strike price...
2025-06-02 12:51:56,215 - root - INFO - Current spot: 24732.44921875, Selected strike: 24400
2025-06-02 12:51:56,215 - root - DEBUG - Current time in IST: 12:51:56.215672
2025-06-02 12:51:56,215 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:51:56,218 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:52:09,903 - root - DEBUG - Checking market hours...
2025-06-02 12:52:09,903 - root - DEBUG - Market open: True
2025-06-02 12:52:09,903 - root - DEBUG - Fetching current market data...
2025-06-02 12:52:09,903 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:52:09,904 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:52:10,036 - root - INFO - Successfully fetched price for ^NSEI: 24733.25
2025-06-02 12:52:10,038 - root - DEBUG - Got spot price: 24733.25
2025-06-02 12:52:10,038 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:52:10,038 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:52:10.038185 to 2025-06-02 12:52:10.038185
2025-06-02 12:52:10,041 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:52:10,059 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:52:10,059 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:52:10,060 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:52:10,060 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:52:10,060 - root - DEBUG - Getting strike price...
2025-06-02 12:52:10,060 - root - INFO - Current spot: 24733.25, Selected strike: 24400
2025-06-02 12:52:10,060 - root - DEBUG - Current time in IST: 12:52:10.060371
2025-06-02 12:52:10,060 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:52:10,060 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:52:13,244 - root - DEBUG - Checking market hours...
2025-06-02 12:52:13,245 - root - DEBUG - Market open: True
2025-06-02 12:52:13,245 - root - DEBUG - Fetching current market data...
2025-06-02 12:52:13,245 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:52:13,246 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:52:13,333 - root - INFO - Successfully fetched price for ^NSEI: 24733.25
2025-06-02 12:52:13,333 - root - DEBUG - Got spot price: 24733.25
2025-06-02 12:52:13,333 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:52:13,334 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:52:13.333406 to 2025-06-02 12:52:13.333406
2025-06-02 12:52:13,337 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:52:13,352 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:52:13,353 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:52:13,355 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:52:13,355 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:52:13,355 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:52:13,355 - root - DEBUG - Getting strike price...
2025-06-02 12:52:13,355 - root - INFO - Current spot: 24733.25, Selected strike: 24400
2025-06-02 12:52:13,355 - root - DEBUG - Current time in IST: 12:52:13.355863
2025-06-02 12:52:13,355 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:52:13,355 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:52:56,229 - root - DEBUG - Checking market hours...
2025-06-02 12:52:56,229 - root - DEBUG - Market open: True
2025-06-02 12:52:56,229 - root - DEBUG - Fetching current market data...
2025-06-02 12:52:56,229 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:52:56,230 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:52:56,422 - root - INFO - Successfully fetched price for ^NSEI: 24733.150390625
2025-06-02 12:52:56,422 - root - DEBUG - Got spot price: 24733.150390625
2025-06-02 12:52:56,422 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:52:56,422 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:52:56.422682 to 2025-06-02 12:52:56.422682
2025-06-02 12:52:56,424 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:52:56,448 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:52:56,448 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:52:56,449 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:52:56,449 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:52:56,449 - root - DEBUG - Getting strike price...
2025-06-02 12:52:56,449 - root - INFO - Current spot: 24733.150390625, Selected strike: 24400
2025-06-02 12:52:56,449 - root - DEBUG - Current time in IST: 12:52:56.449294
2025-06-02 12:52:56,449 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:52:56,449 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:53:10,073 - root - DEBUG - Checking market hours...
2025-06-02 12:53:10,073 - root - DEBUG - Market open: True
2025-06-02 12:53:10,074 - root - DEBUG - Fetching current market data...
2025-06-02 12:53:10,074 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:53:10,075 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:53:10,268 - root - INFO - Successfully fetched price for ^NSEI: 24731.900390625
2025-06-02 12:53:10,268 - root - DEBUG - Got spot price: 24731.900390625
2025-06-02 12:53:10,268 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:53:10,268 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:53:10.268968 to 2025-06-02 12:53:10.268968
2025-06-02 12:53:10,272 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:53:10,291 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:53:10,292 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:53:10,292 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:53:10,292 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:53:10,293 - root - DEBUG - Getting strike price...
2025-06-02 12:53:10,293 - root - INFO - Current spot: 24731.900390625, Selected strike: 24400
2025-06-02 12:53:10,293 - root - DEBUG - Current time in IST: 12:53:10.293701
2025-06-02 12:53:10,293 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:53:10,293 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:53:13,367 - root - DEBUG - Checking market hours...
2025-06-02 12:53:13,368 - root - DEBUG - Market open: True
2025-06-02 12:53:13,368 - root - DEBUG - Fetching current market data...
2025-06-02 12:53:13,368 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:53:13,370 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:53:13,508 - root - INFO - Successfully fetched price for ^NSEI: 24731.900390625
2025-06-02 12:53:13,508 - root - DEBUG - Got spot price: 24731.900390625
2025-06-02 12:53:13,508 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:53:13,509 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:53:13.509871 to 2025-06-02 12:53:13.509871
2025-06-02 12:53:13,513 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:53:13,523 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:53:13,524 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:53:13,524 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:53:13,524 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:53:13,524 - root - DEBUG - Getting strike price...
2025-06-02 12:53:13,525 - root - INFO - Current spot: 24731.900390625, Selected strike: 24400
2025-06-02 12:53:13,525 - root - DEBUG - Current time in IST: 12:53:13.525365
2025-06-02 12:53:13,525 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:53:13,525 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:53:56,458 - root - DEBUG - Checking market hours...
2025-06-02 12:53:56,458 - root - DEBUG - Market open: True
2025-06-02 12:53:56,459 - root - DEBUG - Fetching current market data...
2025-06-02 12:53:56,459 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:53:56,459 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:53:56,639 - root - INFO - Successfully fetched price for ^NSEI: 24730.150390625
2025-06-02 12:53:56,639 - root - DEBUG - Got spot price: 24730.150390625
2025-06-02 12:53:56,639 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:53:56,640 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:53:56.640615 to 2025-06-02 12:53:56.640615
2025-06-02 12:53:56,646 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:53:56,660 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:53:56,661 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:53:56,661 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:53:56,661 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:53:56,661 - root - DEBUG - Getting strike price...
2025-06-02 12:53:56,661 - root - INFO - Current spot: 24730.150390625, Selected strike: 24400
2025-06-02 12:53:56,661 - root - DEBUG - Current time in IST: 12:53:56.661539
2025-06-02 12:53:56,662 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:53:56,662 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:54:10,301 - root - DEBUG - Checking market hours...
2025-06-02 12:54:10,301 - root - DEBUG - Market open: True
2025-06-02 12:54:10,301 - root - DEBUG - Fetching current market data...
2025-06-02 12:54:10,301 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:54:10,303 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:54:10,447 - root - INFO - Successfully fetched price for ^NSEI: 24730.55078125
2025-06-02 12:54:10,447 - root - DEBUG - Got spot price: 24730.55078125
2025-06-02 12:54:10,447 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:54:10,448 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:54:10.447884 to 2025-06-02 12:54:10.447884
2025-06-02 12:54:10,467 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:54:10,488 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:54:10,494 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:54:10,494 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:54:10,494 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:54:10,494 - root - DEBUG - Getting strike price...
2025-06-02 12:54:10,495 - root - INFO - Current spot: 24730.55078125, Selected strike: 24400
2025-06-02 12:54:10,495 - root - DEBUG - Current time in IST: 12:54:10.495766
2025-06-02 12:54:10,495 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:54:10,495 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:54:13,538 - root - DEBUG - Checking market hours...
2025-06-02 12:54:13,538 - root - DEBUG - Market open: True
2025-06-02 12:54:13,538 - root - DEBUG - Fetching current market data...
2025-06-02 12:54:13,538 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:54:13,539 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:54:13,607 - root - INFO - Successfully fetched price for ^NSEI: 24730.55078125
2025-06-02 12:54:13,608 - root - DEBUG - Got spot price: 24730.55078125
2025-06-02 12:54:13,608 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:54:13,608 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:54:13.608985 to 2025-06-02 12:54:13.608985
2025-06-02 12:54:13,614 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:54:13,631 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:54:13,631 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:54:13,631 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:54:13,631 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:54:13,632 - root - DEBUG - Getting strike price...
2025-06-02 12:54:13,632 - root - INFO - Current spot: 24730.55078125, Selected strike: 24400
2025-06-02 12:54:13,632 - root - DEBUG - Current time in IST: 12:54:13.632643
2025-06-02 12:54:13,632 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:54:13,633 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:54:42,666 - root - INFO - Loaded previous state. Balance: 60000
2025-06-02 12:54:42,666 - root - INFO - Starting paper trading session...
2025-06-02 12:54:42,666 - root - DEBUG - Checking market hours...
2025-06-02 12:54:42,708 - root - DEBUG - Market open: True
2025-06-02 12:54:42,708 - root - DEBUG - Fetching current market data...
2025-06-02 12:54:42,708 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:54:42,711 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-06-02 12:54:42,711 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:54:42,717 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-06-02 12:54:42,718 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:54:43,078 - root - INFO - Successfully fetched price for ^NSEI: 24731.69921875
2025-06-02 12:54:43,079 - root - DEBUG - Got spot price: 24731.69921875
2025-06-02 12:54:43,079 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:54:43,079 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:54:43.079197 to 2025-06-02 12:54:43.079197
2025-06-02 12:54:43,082 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:54:43,193 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:54:43,593 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:54:43,925 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:54:43,925 - yfinance - ERROR - ['NSEI.BO']: HTTPError('HTTP Error 404: ')
2025-06-02 12:54:43,930 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:54:43,930 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:54:43,930 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:54:43,931 - root - DEBUG - Getting strike price...
2025-06-02 12:54:43,931 - root - INFO - Current spot: 24731.69921875, Selected strike: 24400
2025-06-02 12:54:43,932 - root - DEBUG - Current time in IST: 12:54:43.932098
2025-06-02 12:54:43,932 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:54:43,933 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:54:56,665 - root - DEBUG - Checking market hours...
2025-06-02 12:54:56,665 - root - DEBUG - Market open: True
2025-06-02 12:54:56,665 - root - DEBUG - Fetching current market data...
2025-06-02 12:54:56,665 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:54:56,667 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:54:56,795 - root - INFO - Successfully fetched price for ^NSEI: 24731.650390625
2025-06-02 12:54:56,795 - root - DEBUG - Got spot price: 24731.650390625
2025-06-02 12:54:56,795 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:54:56,795 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:54:56.795952 to 2025-06-02 12:54:56.795952
2025-06-02 12:54:56,799 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:54:56,820 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:54:56,844 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:54:56,844 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:54:56,845 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:54:56,845 - root - DEBUG - Getting strike price...
2025-06-02 12:54:56,845 - root - INFO - Current spot: 24731.650390625, Selected strike: 24400
2025-06-02 12:54:56,845 - root - DEBUG - Current time in IST: 12:54:56.845254
2025-06-02 12:54:56,845 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:54:56,846 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:55:10,505 - root - DEBUG - Checking market hours...
2025-06-02 12:55:10,505 - root - DEBUG - Market open: True
2025-06-02 12:55:10,505 - root - DEBUG - Fetching current market data...
2025-06-02 12:55:10,506 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:55:10,509 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:55:10,666 - root - INFO - Successfully fetched price for ^NSEI: 24730.349609375
2025-06-02 12:55:10,666 - root - DEBUG - Got spot price: 24730.349609375
2025-06-02 12:55:10,666 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:55:10,666 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:55:10.666721 to 2025-06-02 12:55:10.666721
2025-06-02 12:55:10,669 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:55:10,694 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:55:10,695 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:55:10,695 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:55:10,695 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:55:10,695 - root - DEBUG - Getting strike price...
2025-06-02 12:55:10,696 - root - INFO - Current spot: 24730.349609375, Selected strike: 24400
2025-06-02 12:55:10,696 - root - DEBUG - Current time in IST: 12:55:10.696450
2025-06-02 12:55:10,696 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:55:10,697 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:55:13,647 - root - DEBUG - Checking market hours...
2025-06-02 12:55:13,648 - root - DEBUG - Market open: True
2025-06-02 12:55:13,648 - root - DEBUG - Fetching current market data...
2025-06-02 12:55:13,648 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:55:13,650 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:55:13,860 - root - INFO - Successfully fetched price for ^NSEI: 24731.55078125
2025-06-02 12:55:13,860 - root - DEBUG - Got spot price: 24731.55078125
2025-06-02 12:55:13,860 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:55:13,860 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:55:13.860088 to 2025-06-02 12:55:13.860088
2025-06-02 12:55:13,864 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:55:13,881 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:55:13,883 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:55:13,883 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:55:13,883 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:55:13,883 - root - DEBUG - Getting strike price...
2025-06-02 12:55:13,883 - root - INFO - Current spot: 24731.55078125, Selected strike: 24400
2025-06-02 12:55:13,883 - root - DEBUG - Current time in IST: 12:55:13.883145
2025-06-02 12:55:13,883 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:55:13,884 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:55:43,938 - root - DEBUG - Checking market hours...
2025-06-02 12:55:43,939 - root - DEBUG - Market open: True
2025-06-02 12:55:43,939 - root - DEBUG - Fetching current market data...
2025-06-02 12:55:43,940 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:55:43,941 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:55:44,092 - root - INFO - Successfully fetched price for ^NSEI: 24720.94921875
2025-06-02 12:55:44,093 - root - DEBUG - Got spot price: 24720.94921875
2025-06-02 12:55:44,093 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:55:44,093 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:55:44.093180 to 2025-06-02 12:55:44.093180
2025-06-02 12:55:44,097 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:55:44,281 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 12:55:44,512 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:55:44,512 - yfinance - ERROR - ['NSEI.BO']: HTTPError('HTTP Error 404: ')
2025-06-02 12:55:44,516 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:55:44,516 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:55:44,517 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:55:44,517 - root - DEBUG - Getting strike price...
2025-06-02 12:55:44,517 - root - INFO - Current spot: 24720.94921875, Selected strike: 24400
2025-06-02 12:55:44,517 - root - DEBUG - Current time in IST: 12:55:44.517026
2025-06-02 12:55:44,517 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:55:44,517 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:55:56,859 - root - DEBUG - Checking market hours...
2025-06-02 12:55:56,860 - root - DEBUG - Market open: True
2025-06-02 12:55:56,860 - root - DEBUG - Fetching current market data...
2025-06-02 12:55:56,861 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:55:56,862 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:55:56,996 - root - INFO - Successfully fetched price for ^NSEI: 24719.44921875
2025-06-02 12:55:56,996 - root - DEBUG - Got spot price: 24719.44921875
2025-06-02 12:55:56,996 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:55:56,997 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:55:56.996368 to 2025-06-02 12:55:56.996368
2025-06-02 12:55:56,999 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:55:57,013 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:55:57,015 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:55:57,015 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:55:57,015 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:55:57,015 - root - DEBUG - Getting strike price...
2025-06-02 12:55:57,015 - root - INFO - Current spot: 24719.44921875, Selected strike: 24400
2025-06-02 12:55:57,015 - root - DEBUG - Current time in IST: 12:55:57.015330
2025-06-02 12:55:57,015 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:55:57,016 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:56:10,712 - root - DEBUG - Checking market hours...
2025-06-02 12:56:10,712 - root - DEBUG - Market open: True
2025-06-02 12:56:10,714 - root - DEBUG - Fetching current market data...
2025-06-02 12:56:10,714 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:56:10,717 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:56:10,874 - root - INFO - Successfully fetched price for ^NSEI: 24711.05078125
2025-06-02 12:56:10,874 - root - DEBUG - Got spot price: 24711.05078125
2025-06-02 12:56:10,874 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:56:10,874 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:56:10.874268 to 2025-06-02 12:56:10.874268
2025-06-02 12:56:10,876 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:56:10,896 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:56:10,897 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:56:10,897 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:56:10,897 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:56:10,897 - root - DEBUG - Getting strike price...
2025-06-02 12:56:10,897 - root - INFO - Current spot: 24711.05078125, Selected strike: 24400
2025-06-02 12:56:10,897 - root - DEBUG - Current time in IST: 12:56:10.897718
2025-06-02 12:56:10,897 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:56:10,898 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:56:13,886 - root - DEBUG - Checking market hours...
2025-06-02 12:56:13,886 - root - DEBUG - Market open: True
2025-06-02 12:56:13,886 - root - DEBUG - Fetching current market data...
2025-06-02 12:56:13,886 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:56:13,886 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:56:14,074 - root - INFO - Successfully fetched price for ^NSEI: 24710.75
2025-06-02 12:56:14,074 - root - DEBUG - Got spot price: 24710.75
2025-06-02 12:56:14,074 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:56:14,075 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:56:14.074583 to 2025-06-02 12:56:14.074583
2025-06-02 12:56:14,079 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:56:14,103 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:56:14,104 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:56:14,104 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:56:14,105 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:56:14,105 - root - DEBUG - Getting strike price...
2025-06-02 12:56:14,105 - root - INFO - Current spot: 24710.75, Selected strike: 24400
2025-06-02 12:56:14,105 - root - DEBUG - Current time in IST: 12:56:14.105997
2025-06-02 12:56:14,105 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:56:14,105 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:56:44,534 - root - DEBUG - Checking market hours...
2025-06-02 12:56:44,534 - root - DEBUG - Market open: True
2025-06-02 12:56:44,534 - root - DEBUG - Fetching current market data...
2025-06-02 12:56:44,534 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:56:44,535 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:56:44,846 - root - INFO - Successfully fetched price for ^NSEI: 24714.19921875
2025-06-02 12:56:44,846 - root - DEBUG - Got spot price: 24714.19921875
2025-06-02 12:56:44,846 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:56:44,846 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:56:44.846665 to 2025-06-02 12:56:44.846665
2025-06-02 12:56:44,849 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:56:44,873 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:56:44,873 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:56:44,877 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:56:44,877 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:56:44,877 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:56:44,877 - root - DEBUG - Getting strike price...
2025-06-02 12:56:44,877 - root - INFO - Current spot: 24714.19921875, Selected strike: 24400
2025-06-02 12:56:44,877 - root - DEBUG - Current time in IST: 12:56:44.877413
2025-06-02 12:56:44,877 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:56:44,878 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:56:57,023 - root - DEBUG - Checking market hours...
2025-06-02 12:56:57,023 - root - DEBUG - Market open: True
2025-06-02 12:56:57,023 - root - DEBUG - Fetching current market data...
2025-06-02 12:56:57,023 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:56:57,025 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:56:57,210 - root - INFO - Successfully fetched price for ^NSEI: 24714.5
2025-06-02 12:56:57,210 - root - DEBUG - Got spot price: 24714.5
2025-06-02 12:56:57,210 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:56:57,211 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:56:57.210592 to 2025-06-02 12:56:57.210592
2025-06-02 12:56:57,214 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:56:57,228 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:56:57,229 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:56:57,229 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:56:57,229 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:56:57,229 - root - DEBUG - Getting strike price...
2025-06-02 12:56:57,229 - root - INFO - Current spot: 24714.5, Selected strike: 24400
2025-06-02 12:56:57,229 - root - DEBUG - Current time in IST: 12:56:57.229138
2025-06-02 12:56:57,229 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:56:57,229 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:57:10,898 - root - DEBUG - Checking market hours...
2025-06-02 12:57:10,898 - root - DEBUG - Market open: True
2025-06-02 12:57:10,898 - root - DEBUG - Fetching current market data...
2025-06-02 12:57:10,898 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:57:10,899 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:57:11,037 - root - INFO - Successfully fetched price for ^NSEI: 24716.44921875
2025-06-02 12:57:11,037 - root - DEBUG - Got spot price: 24716.44921875
2025-06-02 12:57:11,037 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:57:11,038 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:57:11.037204 to 2025-06-02 12:57:11.037204
2025-06-02 12:57:11,042 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:57:11,052 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:57:11,052 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:57:11,052 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:57:11,052 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:57:11,052 - root - DEBUG - Getting strike price...
2025-06-02 12:57:11,052 - root - INFO - Current spot: 24716.44921875, Selected strike: 24400
2025-06-02 12:57:11,053 - root - DEBUG - Current time in IST: 12:57:11.053556
2025-06-02 12:57:11,053 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:57:11,053 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:57:14,118 - root - DEBUG - Checking market hours...
2025-06-02 12:57:14,118 - root - DEBUG - Market open: True
2025-06-02 12:57:14,118 - root - DEBUG - Fetching current market data...
2025-06-02 12:57:14,118 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:57:14,119 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:57:14,397 - root - INFO - Successfully fetched price for ^NSEI: 24714.30078125
2025-06-02 12:57:14,397 - root - DEBUG - Got spot price: 24714.30078125
2025-06-02 12:57:14,397 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:57:14,397 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:57:14.397178 to 2025-06-02 12:57:14.397178
2025-06-02 12:57:14,401 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:57:14,411 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:57:14,411 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:57:14,411 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:57:14,411 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:57:14,411 - root - DEBUG - Getting strike price...
2025-06-02 12:57:14,411 - root - INFO - Current spot: 24714.30078125, Selected strike: 24400
2025-06-02 12:57:14,411 - root - DEBUG - Current time in IST: 12:57:14.411783
2025-06-02 12:57:14,411 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:57:14,412 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:57:44,893 - root - DEBUG - Checking market hours...
2025-06-02 12:57:44,893 - root - DEBUG - Market open: True
2025-06-02 12:57:44,893 - root - DEBUG - Fetching current market data...
2025-06-02 12:57:44,893 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:57:44,895 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:57:45,086 - root - INFO - Successfully fetched price for ^NSEI: 24707.05078125
2025-06-02 12:57:45,086 - root - DEBUG - Got spot price: 24707.05078125
2025-06-02 12:57:45,086 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:57:45,087 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:57:45.086492 to 2025-06-02 12:57:45.086492
2025-06-02 12:57:45,089 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:57:45,111 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:57:45,111 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:57:45,117 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:57:45,117 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:57:45,118 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:57:45,118 - root - DEBUG - Getting strike price...
2025-06-02 12:57:45,118 - root - INFO - Current spot: 24707.05078125, Selected strike: 24400
2025-06-02 12:57:45,118 - root - DEBUG - Current time in IST: 12:57:45.118943
2025-06-02 12:57:45,118 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:57:45,119 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:57:57,238 - root - DEBUG - Checking market hours...
2025-06-02 12:57:57,239 - root - DEBUG - Market open: True
2025-06-02 12:57:57,239 - root - DEBUG - Fetching current market data...
2025-06-02 12:57:57,239 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:57:57,241 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:57:57,392 - root - INFO - Successfully fetched price for ^NSEI: 24704.650390625
2025-06-02 12:57:57,392 - root - DEBUG - Got spot price: 24704.650390625
2025-06-02 12:57:57,392 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:57:57,392 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:57:57.392311 to 2025-06-02 12:57:57.392311
2025-06-02 12:57:57,396 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:57:57,410 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:57:57,411 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:57:57,411 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:57:57,411 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:57:57,412 - root - DEBUG - Getting strike price...
2025-06-02 12:57:57,412 - root - INFO - Current spot: 24704.650390625, Selected strike: 24400
2025-06-02 12:57:57,412 - root - DEBUG - Current time in IST: 12:57:57.412660
2025-06-02 12:57:57,412 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:57:57,412 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:58:11,058 - root - DEBUG - Checking market hours...
2025-06-02 12:58:11,058 - root - DEBUG - Market open: True
2025-06-02 12:58:11,058 - root - DEBUG - Fetching current market data...
2025-06-02 12:58:11,058 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:58:11,060 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:58:11,236 - root - INFO - Successfully fetched price for ^NSEI: 24707.55078125
2025-06-02 12:58:11,236 - root - DEBUG - Got spot price: 24707.55078125
2025-06-02 12:58:11,236 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:58:11,236 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:58:11.236417 to 2025-06-02 12:58:11.236417
2025-06-02 12:58:11,239 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:58:11,260 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:58:11,261 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:58:11,261 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:58:11,261 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:58:11,261 - root - DEBUG - Getting strike price...
2025-06-02 12:58:11,261 - root - INFO - Current spot: 24707.55078125, Selected strike: 24400
2025-06-02 12:58:11,261 - root - DEBUG - Current time in IST: 12:58:11.261097
2025-06-02 12:58:11,261 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:58:11,262 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:58:14,424 - root - DEBUG - Checking market hours...
2025-06-02 12:58:14,425 - root - DEBUG - Market open: True
2025-06-02 12:58:14,425 - root - DEBUG - Fetching current market data...
2025-06-02 12:58:14,425 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:58:14,426 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:58:14,702 - root - INFO - Successfully fetched price for ^NSEI: 24706.05078125
2025-06-02 12:58:14,703 - root - DEBUG - Got spot price: 24706.05078125
2025-06-02 12:58:14,703 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:58:14,703 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:58:14.703069 to 2025-06-02 12:58:14.703069
2025-06-02 12:58:14,707 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:58:14,722 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:58:14,723 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:58:14,723 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:58:14,723 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:58:14,723 - root - DEBUG - Getting strike price...
2025-06-02 12:58:14,723 - root - INFO - Current spot: 24706.05078125, Selected strike: 24400
2025-06-02 12:58:14,723 - root - DEBUG - Current time in IST: 12:58:14.723264
2025-06-02 12:58:14,724 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:58:14,724 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:58:45,127 - root - DEBUG - Checking market hours...
2025-06-02 12:58:45,127 - root - DEBUG - Market open: True
2025-06-02 12:58:45,128 - root - DEBUG - Fetching current market data...
2025-06-02 12:58:45,128 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:58:45,129 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:58:45,344 - root - INFO - Successfully fetched price for ^NSEI: 24698.19921875
2025-06-02 12:58:45,345 - root - DEBUG - Got spot price: 24698.19921875
2025-06-02 12:58:45,345 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:58:45,345 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:58:45.345654 to 2025-06-02 12:58:45.345654
2025-06-02 12:58:45,350 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:58:45,362 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:58:45,362 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:58:45,365 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:58:45,365 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:58:45,365 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:58:45,365 - root - DEBUG - Getting strike price...
2025-06-02 12:58:45,365 - root - INFO - Current spot: 24698.19921875, Selected strike: 24300
2025-06-02 12:58:45,365 - root - DEBUG - Current time in IST: 12:58:45.365067
2025-06-02 12:58:45,365 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:58:45,366 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:58:57,422 - root - DEBUG - Checking market hours...
2025-06-02 12:58:57,422 - root - DEBUG - Market open: True
2025-06-02 12:58:57,422 - root - DEBUG - Fetching current market data...
2025-06-02 12:58:57,422 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:58:57,424 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:58:57,579 - root - INFO - Successfully fetched price for ^NSEI: 24698.44921875
2025-06-02 12:58:57,581 - root - DEBUG - Got spot price: 24698.44921875
2025-06-02 12:58:57,581 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:58:57,581 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:58:57.581306 to 2025-06-02 12:58:57.581306
2025-06-02 12:58:57,626 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:58:57,641 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:58:57,641 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:58:57,642 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:58:57,642 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:58:57,642 - root - DEBUG - Getting strike price...
2025-06-02 12:58:57,642 - root - INFO - Current spot: 24698.44921875, Selected strike: 24300
2025-06-02 12:58:57,642 - root - DEBUG - Current time in IST: 12:58:57.642199
2025-06-02 12:58:57,642 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:58:57,645 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:59:11,274 - root - DEBUG - Checking market hours...
2025-06-02 12:59:11,274 - root - DEBUG - Market open: True
2025-06-02 12:59:11,275 - root - DEBUG - Fetching current market data...
2025-06-02 12:59:11,275 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:59:11,276 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:59:11,480 - root - INFO - Successfully fetched price for ^NSEI: 24698.900390625
2025-06-02 12:59:11,480 - root - DEBUG - Got spot price: 24698.900390625
2025-06-02 12:59:11,480 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:59:11,480 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:59:11.480305 to 2025-06-02 12:59:11.480305
2025-06-02 12:59:11,483 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:59:11,507 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:59:11,508 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:59:11,508 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:59:11,508 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:59:11,508 - root - DEBUG - Getting strike price...
2025-06-02 12:59:11,509 - root - INFO - Current spot: 24698.900390625, Selected strike: 24300
2025-06-02 12:59:11,509 - root - DEBUG - Current time in IST: 12:59:11.509388
2025-06-02 12:59:11,509 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:59:11,509 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:59:14,732 - root - DEBUG - Checking market hours...
2025-06-02 12:59:14,733 - root - DEBUG - Market open: True
2025-06-02 12:59:14,733 - root - DEBUG - Fetching current market data...
2025-06-02 12:59:14,733 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:59:14,734 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:59:14,919 - root - INFO - Successfully fetched price for ^NSEI: 24698.099609375
2025-06-02 12:59:14,919 - root - DEBUG - Got spot price: 24698.099609375
2025-06-02 12:59:14,919 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:59:14,919 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:59:14.919839 to 2025-06-02 12:59:14.919839
2025-06-02 12:59:14,923 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:59:14,934 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:59:14,934 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:59:14,934 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:59:14,934 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:59:14,934 - root - DEBUG - Getting strike price...
2025-06-02 12:59:14,934 - root - INFO - Current spot: 24698.099609375, Selected strike: 24300
2025-06-02 12:59:14,934 - root - DEBUG - Current time in IST: 12:59:14.934991
2025-06-02 12:59:14,934 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:59:14,935 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:59:45,377 - root - DEBUG - Checking market hours...
2025-06-02 12:59:45,377 - root - DEBUG - Market open: True
2025-06-02 12:59:45,378 - root - DEBUG - Fetching current market data...
2025-06-02 12:59:45,378 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:59:45,378 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:59:45,683 - root - INFO - Successfully fetched price for ^NSEI: 24686.650390625
2025-06-02 12:59:45,683 - root - DEBUG - Got spot price: 24686.650390625
2025-06-02 12:59:45,683 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:59:45,684 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:59:45.683488 to 2025-06-02 12:59:45.683488
2025-06-02 12:59:45,687 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:59:45,705 - yfinance - ERROR - 
1 Failed download:
2025-06-02 12:59:45,706 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 12:59:45,711 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 12:59:45,711 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:59:45,711 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:59:45,711 - root - DEBUG - Getting strike price...
2025-06-02 12:59:45,711 - root - INFO - Current spot: 24686.650390625, Selected strike: 24300
2025-06-02 12:59:45,711 - root - DEBUG - Current time in IST: 12:59:45.711906
2025-06-02 12:59:45,712 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:59:45,713 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 12:59:57,655 - root - DEBUG - Checking market hours...
2025-06-02 12:59:57,655 - root - DEBUG - Market open: True
2025-06-02 12:59:57,655 - root - DEBUG - Fetching current market data...
2025-06-02 12:59:57,655 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 12:59:57,656 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 12:59:57,813 - root - INFO - Successfully fetched price for ^NSEI: 24684.94921875
2025-06-02 12:59:57,813 - root - DEBUG - Got spot price: 24684.94921875
2025-06-02 12:59:57,813 - root - DEBUG - Calculating historical volatility...
2025-06-02 12:59:57,814 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 12:59:57.813284 to 2025-06-02 12:59:57.813284
2025-06-02 12:59:57,816 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 12:59:57,827 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 12:59:57,828 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 12:59:57,828 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 12:59:57,828 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 12:59:57,828 - root - DEBUG - Getting strike price...
2025-06-02 12:59:57,828 - root - INFO - Current spot: 24684.94921875, Selected strike: 24300
2025-06-02 12:59:57,829 - root - DEBUG - Current time in IST: 12:59:57.829809
2025-06-02 12:59:57,829 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 12:59:57,830 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:00:11,522 - root - DEBUG - Checking market hours...
2025-06-02 13:00:11,523 - root - DEBUG - Market open: True
2025-06-02 13:00:11,523 - root - DEBUG - Fetching current market data...
2025-06-02 13:00:11,523 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:00:11,524 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:00:11,681 - root - INFO - Successfully fetched price for ^NSEI: 24686.849609375
2025-06-02 13:00:11,681 - root - DEBUG - Got spot price: 24686.849609375
2025-06-02 13:00:11,681 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:00:11,682 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:00:11.682531 to 2025-06-02 13:00:11.682531
2025-06-02 13:00:11,685 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:00:11,709 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:00:11,709 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:00:11,709 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:00:11,709 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:00:11,710 - root - DEBUG - Getting strike price...
2025-06-02 13:00:11,710 - root - INFO - Current spot: 24686.849609375, Selected strike: 24300
2025-06-02 13:00:11,710 - root - DEBUG - Current time in IST: 13:00:11.710838
2025-06-02 13:00:11,710 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:00:11,710 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:00:14,946 - root - DEBUG - Checking market hours...
2025-06-02 13:00:14,946 - root - DEBUG - Market open: True
2025-06-02 13:00:14,946 - root - DEBUG - Fetching current market data...
2025-06-02 13:00:14,946 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:00:14,949 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:00:15,076 - root - INFO - Successfully fetched price for ^NSEI: 24686.849609375
2025-06-02 13:00:15,076 - root - DEBUG - Got spot price: 24686.849609375
2025-06-02 13:00:15,076 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:00:15,077 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:00:15.076866 to 2025-06-02 13:00:15.076866
2025-06-02 13:00:15,081 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:00:15,099 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:00:15,100 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:00:15,100 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:00:15,100 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:00:15,100 - root - DEBUG - Getting strike price...
2025-06-02 13:00:15,100 - root - INFO - Current spot: 24686.849609375, Selected strike: 24300
2025-06-02 13:00:15,100 - root - DEBUG - Current time in IST: 13:00:15.100873
2025-06-02 13:00:15,100 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:00:15,101 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:00:45,717 - root - DEBUG - Checking market hours...
2025-06-02 13:00:45,717 - root - DEBUG - Market open: True
2025-06-02 13:00:45,717 - root - DEBUG - Fetching current market data...
2025-06-02 13:00:45,718 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:00:45,724 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:00:46,710 - root - INFO - Successfully fetched price for ^NSEI: 24690.349609375
2025-06-02 13:00:46,710 - root - DEBUG - Got spot price: 24690.349609375
2025-06-02 13:00:46,710 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:00:46,710 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:00:46.710722 to 2025-06-02 13:00:46.710722
2025-06-02 13:00:46,714 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:00:46,730 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:00:46,730 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:00:46,734 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:00:46,735 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:00:46,735 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:00:46,735 - root - DEBUG - Getting strike price...
2025-06-02 13:00:46,735 - root - INFO - Current spot: 24690.349609375, Selected strike: 24300
2025-06-02 13:00:46,735 - root - DEBUG - Current time in IST: 13:00:46.735689
2025-06-02 13:00:46,735 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:00:46,736 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:00:57,837 - root - DEBUG - Checking market hours...
2025-06-02 13:00:57,837 - root - DEBUG - Market open: True
2025-06-02 13:00:57,837 - root - DEBUG - Fetching current market data...
2025-06-02 13:00:57,838 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:00:57,839 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:00:58,061 - root - INFO - Successfully fetched price for ^NSEI: 24690.400390625
2025-06-02 13:00:58,061 - root - DEBUG - Got spot price: 24690.400390625
2025-06-02 13:00:58,061 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:00:58,061 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:00:58.061944 to 2025-06-02 13:00:58.061944
2025-06-02 13:00:58,072 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:00:58,086 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:00:58,087 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:00:58,087 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:00:58,087 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:00:58,087 - root - DEBUG - Getting strike price...
2025-06-02 13:00:58,087 - root - INFO - Current spot: 24690.400390625, Selected strike: 24300
2025-06-02 13:00:58,087 - root - DEBUG - Current time in IST: 13:00:58.087935
2025-06-02 13:00:58,087 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:00:58,087 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:01:11,711 - root - DEBUG - Checking market hours...
2025-06-02 13:01:11,712 - root - DEBUG - Market open: True
2025-06-02 13:01:11,712 - root - DEBUG - Fetching current market data...
2025-06-02 13:01:11,712 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:01:11,715 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:01:11,913 - root - INFO - Successfully fetched price for ^NSEI: 24697.900390625
2025-06-02 13:01:11,914 - root - DEBUG - Got spot price: 24697.900390625
2025-06-02 13:01:11,914 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:01:11,914 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:01:11.914892 to 2025-06-02 13:01:11.914892
2025-06-02 13:01:11,919 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:01:11,943 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:01:11,948 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:01:11,967 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:01:11,967 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:01:11,967 - root - DEBUG - Getting strike price...
2025-06-02 13:01:11,967 - root - INFO - Current spot: 24697.900390625, Selected strike: 24300
2025-06-02 13:01:11,967 - root - DEBUG - Current time in IST: 13:01:11.967856
2025-06-02 13:01:11,967 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:01:11,967 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:01:15,115 - root - DEBUG - Checking market hours...
2025-06-02 13:01:15,115 - root - DEBUG - Market open: True
2025-06-02 13:01:15,115 - root - DEBUG - Fetching current market data...
2025-06-02 13:01:15,115 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:01:15,116 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:01:15,324 - root - INFO - Successfully fetched price for ^NSEI: 24697.150390625
2025-06-02 13:01:15,325 - root - DEBUG - Got spot price: 24697.150390625
2025-06-02 13:01:15,325 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:01:15,325 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:01:15.325241 to 2025-06-02 13:01:15.325241
2025-06-02 13:01:15,326 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:01:15,350 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:01:15,350 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:01:15,351 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:01:15,351 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:01:15,351 - root - DEBUG - Getting strike price...
2025-06-02 13:01:15,351 - root - INFO - Current spot: 24697.150390625, Selected strike: 24300
2025-06-02 13:01:15,351 - root - DEBUG - Current time in IST: 13:01:15.351981
2025-06-02 13:01:15,351 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:01:15,351 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:01:46,744 - root - DEBUG - Checking market hours...
2025-06-02 13:01:46,744 - root - DEBUG - Market open: True
2025-06-02 13:01:46,744 - root - DEBUG - Fetching current market data...
2025-06-02 13:01:46,744 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:01:46,745 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:01:46,963 - root - INFO - Successfully fetched price for ^NSEI: 24699.30078125
2025-06-02 13:01:46,963 - root - DEBUG - Got spot price: 24699.30078125
2025-06-02 13:01:46,963 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:01:46,964 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:01:46.964308 to 2025-06-02 13:01:46.964308
2025-06-02 13:01:46,966 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:01:46,991 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:01:46,992 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:01:46,996 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:01:46,996 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:01:46,996 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:01:46,996 - root - DEBUG - Getting strike price...
2025-06-02 13:01:46,997 - root - INFO - Current spot: 24699.30078125, Selected strike: 24300
2025-06-02 13:01:46,997 - root - DEBUG - Current time in IST: 13:01:46.997027
2025-06-02 13:01:46,997 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:01:46,997 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:01:58,094 - root - DEBUG - Checking market hours...
2025-06-02 13:01:58,094 - root - DEBUG - Market open: True
2025-06-02 13:01:58,094 - root - DEBUG - Fetching current market data...
2025-06-02 13:01:58,094 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:01:58,095 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:01:58,295 - root - INFO - Successfully fetched price for ^NSEI: 24700.55078125
2025-06-02 13:01:58,295 - root - DEBUG - Got spot price: 24700.55078125
2025-06-02 13:01:58,295 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:01:58,295 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:01:58.295185 to 2025-06-02 13:01:58.295185
2025-06-02 13:01:58,299 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:01:58,311 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:01:58,335 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:01:58,335 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:01:58,335 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:01:58,335 - root - DEBUG - Getting strike price...
2025-06-02 13:01:58,335 - root - INFO - Current spot: 24700.55078125, Selected strike: 24400
2025-06-02 13:01:58,335 - root - DEBUG - Current time in IST: 13:01:58.335002
2025-06-02 13:01:58,336 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:01:58,336 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:02:11,972 - root - DEBUG - Checking market hours...
2025-06-02 13:02:11,973 - root - DEBUG - Market open: True
2025-06-02 13:02:11,973 - root - DEBUG - Fetching current market data...
2025-06-02 13:02:11,973 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:02:11,974 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:02:12,179 - root - INFO - Successfully fetched price for ^NSEI: 24699.349609375
2025-06-02 13:02:12,179 - root - DEBUG - Got spot price: 24699.349609375
2025-06-02 13:02:12,179 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:02:12,179 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:02:12.179303 to 2025-06-02 13:02:12.179303
2025-06-02 13:02:12,182 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:02:12,204 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:02:12,205 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:02:12,205 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:02:12,205 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:02:12,205 - root - DEBUG - Getting strike price...
2025-06-02 13:02:12,205 - root - INFO - Current spot: 24699.349609375, Selected strike: 24300
2025-06-02 13:02:12,206 - root - DEBUG - Current time in IST: 13:02:12.206871
2025-06-02 13:02:12,206 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:02:12,206 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:02:15,357 - root - DEBUG - Checking market hours...
2025-06-02 13:02:15,358 - root - DEBUG - Market open: True
2025-06-02 13:02:15,358 - root - DEBUG - Fetching current market data...
2025-06-02 13:02:15,358 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:02:15,359 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:02:15,492 - root - INFO - Successfully fetched price for ^NSEI: 24699.349609375
2025-06-02 13:02:15,492 - root - DEBUG - Got spot price: 24699.349609375
2025-06-02 13:02:15,492 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:02:15,493 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:02:15.492032 to 2025-06-02 13:02:15.492032
2025-06-02 13:02:15,496 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:02:15,514 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:02:15,514 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:02:15,514 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:02:15,514 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:02:15,516 - root - DEBUG - Getting strike price...
2025-06-02 13:02:15,516 - root - INFO - Current spot: 24699.349609375, Selected strike: 24300
2025-06-02 13:02:15,516 - root - DEBUG - Current time in IST: 13:02:15.516215
2025-06-02 13:02:15,516 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:02:15,516 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:02:47,002 - root - DEBUG - Checking market hours...
2025-06-02 13:02:47,002 - root - DEBUG - Market open: True
2025-06-02 13:02:47,002 - root - DEBUG - Fetching current market data...
2025-06-02 13:02:47,003 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:02:47,004 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:02:47,171 - root - INFO - Successfully fetched price for ^NSEI: 24701.400390625
2025-06-02 13:02:47,171 - root - DEBUG - Got spot price: 24701.400390625
2025-06-02 13:02:47,171 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:02:47,172 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:02:47.172887 to 2025-06-02 13:02:47.172887
2025-06-02 13:02:47,179 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:02:47,189 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:02:47,190 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:02:47,197 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:02:47,197 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:02:47,197 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:02:47,197 - root - DEBUG - Getting strike price...
2025-06-02 13:02:47,197 - root - INFO - Current spot: 24701.400390625, Selected strike: 24400
2025-06-02 13:02:47,197 - root - DEBUG - Current time in IST: 13:02:47.197905
2025-06-02 13:02:47,197 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:02:47,198 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:02:58,347 - root - DEBUG - Checking market hours...
2025-06-02 13:02:58,347 - root - DEBUG - Market open: True
2025-06-02 13:02:58,347 - root - DEBUG - Fetching current market data...
2025-06-02 13:02:58,347 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:02:58,349 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:02:58,486 - root - INFO - Successfully fetched price for ^NSEI: 24705.55078125
2025-06-02 13:02:58,486 - root - DEBUG - Got spot price: 24705.55078125
2025-06-02 13:02:58,486 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:02:58,486 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:02:58.486331 to 2025-06-02 13:02:58.486331
2025-06-02 13:02:58,489 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:02:58,502 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:02:58,502 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:02:58,502 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:02:58,502 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:02:58,502 - root - DEBUG - Getting strike price...
2025-06-02 13:02:58,502 - root - INFO - Current spot: 24705.55078125, Selected strike: 24400
2025-06-02 13:02:58,503 - root - DEBUG - Current time in IST: 13:02:58.503339
2025-06-02 13:02:58,503 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:02:58,503 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:03:12,218 - root - DEBUG - Checking market hours...
2025-06-02 13:03:12,218 - root - DEBUG - Market open: True
2025-06-02 13:03:12,218 - root - DEBUG - Fetching current market data...
2025-06-02 13:03:12,219 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:03:12,220 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:03:12,364 - root - INFO - Successfully fetched price for ^NSEI: 24707.0
2025-06-02 13:03:12,364 - root - DEBUG - Got spot price: 24707.0
2025-06-02 13:03:12,364 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:03:12,365 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:03:12.364329 to 2025-06-02 13:03:12.364329
2025-06-02 13:03:12,367 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:03:12,390 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:03:12,391 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:03:12,391 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:03:12,392 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:03:12,392 - root - DEBUG - Getting strike price...
2025-06-02 13:03:12,392 - root - INFO - Current spot: 24707.0, Selected strike: 24400
2025-06-02 13:03:12,392 - root - DEBUG - Current time in IST: 13:03:12.392038
2025-06-02 13:03:12,392 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:03:12,393 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:03:15,531 - root - DEBUG - Checking market hours...
2025-06-02 13:03:15,532 - root - DEBUG - Market open: True
2025-06-02 13:03:15,532 - root - DEBUG - Fetching current market data...
2025-06-02 13:03:15,532 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:03:15,533 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:03:16,536 - root - INFO - Successfully fetched price for ^NSEI: 24706.349609375
2025-06-02 13:03:16,536 - root - DEBUG - Got spot price: 24706.349609375
2025-06-02 13:03:16,536 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:03:16,536 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:03:16.536106 to 2025-06-02 13:03:16.536106
2025-06-02 13:03:16,539 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:03:16,557 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:03:16,558 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:03:16,558 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:03:16,558 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:03:16,558 - root - DEBUG - Getting strike price...
2025-06-02 13:03:16,558 - root - INFO - Current spot: 24706.349609375, Selected strike: 24400
2025-06-02 13:03:16,558 - root - DEBUG - Current time in IST: 13:03:16.558279
2025-06-02 13:03:16,558 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:03:16,558 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:03:47,206 - root - DEBUG - Checking market hours...
2025-06-02 13:03:47,206 - root - DEBUG - Market open: True
2025-06-02 13:03:47,206 - root - DEBUG - Fetching current market data...
2025-06-02 13:03:47,206 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:03:47,207 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:03:47,393 - root - INFO - Successfully fetched price for ^NSEI: 24708.0
2025-06-02 13:03:47,394 - root - DEBUG - Got spot price: 24708.0
2025-06-02 13:03:47,394 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:03:47,394 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:03:47.394119 to 2025-06-02 13:03:47.394119
2025-06-02 13:03:47,399 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:03:47,427 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:03:47,428 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:03:47,431 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:03:47,431 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:03:47,431 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:03:47,431 - root - DEBUG - Getting strike price...
2025-06-02 13:03:47,431 - root - INFO - Current spot: 24708.0, Selected strike: 24400
2025-06-02 13:03:47,431 - root - DEBUG - Current time in IST: 13:03:47.431604
2025-06-02 13:03:47,431 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:03:47,431 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:03:58,516 - root - DEBUG - Checking market hours...
2025-06-02 13:03:58,516 - root - DEBUG - Market open: True
2025-06-02 13:03:58,516 - root - DEBUG - Fetching current market data...
2025-06-02 13:03:58,516 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:03:58,518 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:03:58,727 - root - INFO - Successfully fetched price for ^NSEI: 24712.05078125
2025-06-02 13:03:58,728 - root - DEBUG - Got spot price: 24712.05078125
2025-06-02 13:03:58,728 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:03:58,728 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:03:58.728223 to 2025-06-02 13:03:58.728223
2025-06-02 13:03:58,732 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:03:58,750 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:03:58,751 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:03:58,751 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:03:58,751 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:03:58,751 - root - DEBUG - Getting strike price...
2025-06-02 13:03:58,752 - root - INFO - Current spot: 24712.05078125, Selected strike: 24400
2025-06-02 13:03:58,752 - root - DEBUG - Current time in IST: 13:03:58.752103
2025-06-02 13:03:58,752 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:03:58,752 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:04:12,406 - root - DEBUG - Checking market hours...
2025-06-02 13:04:12,407 - root - DEBUG - Market open: True
2025-06-02 13:04:12,407 - root - DEBUG - Fetching current market data...
2025-06-02 13:04:12,408 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:04:12,417 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:04:12,591 - root - INFO - Successfully fetched price for ^NSEI: 24713.849609375
2025-06-02 13:04:12,591 - root - DEBUG - Got spot price: 24713.849609375
2025-06-02 13:04:12,591 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:04:12,592 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:04:12.592914 to 2025-06-02 13:04:12.592914
2025-06-02 13:04:12,597 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:04:12,608 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:04:12,608 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:04:12,609 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:04:12,609 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:04:12,609 - root - DEBUG - Getting strike price...
2025-06-02 13:04:12,609 - root - INFO - Current spot: 24713.849609375, Selected strike: 24400
2025-06-02 13:04:12,609 - root - DEBUG - Current time in IST: 13:04:12.609834
2025-06-02 13:04:12,609 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:04:12,609 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:04:16,572 - root - DEBUG - Checking market hours...
2025-06-02 13:04:16,572 - root - DEBUG - Market open: True
2025-06-02 13:04:16,572 - root - DEBUG - Fetching current market data...
2025-06-02 13:04:16,573 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:04:16,585 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:04:16,750 - root - INFO - Successfully fetched price for ^NSEI: 24713.69921875
2025-06-02 13:04:16,750 - root - DEBUG - Got spot price: 24713.69921875
2025-06-02 13:04:16,750 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:04:16,751 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:04:16.750513 to 2025-06-02 13:04:16.750513
2025-06-02 13:04:16,755 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:04:16,773 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:04:16,773 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:04:16,773 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:04:16,773 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:04:16,774 - root - DEBUG - Getting strike price...
2025-06-02 13:04:16,774 - root - INFO - Current spot: 24713.69921875, Selected strike: 24400
2025-06-02 13:04:16,774 - root - DEBUG - Current time in IST: 13:04:16.774319
2025-06-02 13:04:16,774 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:04:16,774 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:04:47,433 - root - DEBUG - Checking market hours...
2025-06-02 13:04:47,433 - root - DEBUG - Market open: True
2025-06-02 13:04:47,433 - root - DEBUG - Fetching current market data...
2025-06-02 13:04:47,433 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:04:47,434 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:04:47,737 - root - INFO - Successfully fetched price for ^NSEI: 24705.19921875
2025-06-02 13:04:47,738 - root - DEBUG - Got spot price: 24705.19921875
2025-06-02 13:04:47,738 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:04:47,738 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:04:47.738049 to 2025-06-02 13:04:47.738049
2025-06-02 13:04:47,741 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:04:47,760 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:04:47,760 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:04:47,766 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:04:47,767 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:04:47,767 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:04:47,767 - root - DEBUG - Getting strike price...
2025-06-02 13:04:47,767 - root - INFO - Current spot: 24705.19921875, Selected strike: 24400
2025-06-02 13:04:47,767 - root - DEBUG - Current time in IST: 13:04:47.767540
2025-06-02 13:04:47,767 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:04:47,768 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:04:58,759 - root - DEBUG - Checking market hours...
2025-06-02 13:04:58,759 - root - DEBUG - Market open: True
2025-06-02 13:04:58,759 - root - DEBUG - Fetching current market data...
2025-06-02 13:04:58,759 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:04:58,761 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:04:58,978 - root - INFO - Successfully fetched price for ^NSEI: 24705.150390625
2025-06-02 13:04:58,978 - root - DEBUG - Got spot price: 24705.150390625
2025-06-02 13:04:58,978 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:04:58,978 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:04:58.978511 to 2025-06-02 13:04:58.978511
2025-06-02 13:04:58,980 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:04:58,993 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:04:58,994 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:04:58,995 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:04:58,995 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:04:58,995 - root - DEBUG - Getting strike price...
2025-06-02 13:04:58,995 - root - INFO - Current spot: 24705.150390625, Selected strike: 24400
2025-06-02 13:04:58,995 - root - DEBUG - Current time in IST: 13:04:58.995202
2025-06-02 13:04:58,996 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:04:58,996 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:05:12,622 - root - DEBUG - Checking market hours...
2025-06-02 13:05:12,622 - root - DEBUG - Market open: True
2025-06-02 13:05:12,622 - root - DEBUG - Fetching current market data...
2025-06-02 13:05:12,623 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:05:12,624 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:05:12,799 - root - INFO - Successfully fetched price for ^NSEI: 24701.099609375
2025-06-02 13:05:12,800 - root - DEBUG - Got spot price: 24701.099609375
2025-06-02 13:05:12,800 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:05:12,800 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:05:12.800226 to 2025-06-02 13:05:12.800226
2025-06-02 13:05:12,804 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:05:12,824 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:05:12,824 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:05:12,825 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:05:12,825 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:05:12,825 - root - DEBUG - Getting strike price...
2025-06-02 13:05:12,825 - root - INFO - Current spot: 24701.099609375, Selected strike: 24400
2025-06-02 13:05:12,825 - root - DEBUG - Current time in IST: 13:05:12.825474
2025-06-02 13:05:12,825 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:05:12,826 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:05:16,780 - root - DEBUG - Checking market hours...
2025-06-02 13:05:16,781 - root - DEBUG - Market open: True
2025-06-02 13:05:16,781 - root - DEBUG - Fetching current market data...
2025-06-02 13:05:16,781 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:05:16,782 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:05:16,969 - root - INFO - Successfully fetched price for ^NSEI: 24700.80078125
2025-06-02 13:05:16,969 - root - DEBUG - Got spot price: 24700.80078125
2025-06-02 13:05:16,969 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:05:16,969 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:05:16.969411 to 2025-06-02 13:05:16.969411
2025-06-02 13:05:16,973 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:05:16,997 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:05:16,998 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:05:16,998 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:05:16,999 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:05:16,999 - root - DEBUG - Getting strike price...
2025-06-02 13:05:16,999 - root - INFO - Current spot: 24700.80078125, Selected strike: 24400
2025-06-02 13:05:16,999 - root - DEBUG - Current time in IST: 13:05:16.999106
2025-06-02 13:05:16,999 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:05:16,999 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:05:47,768 - root - DEBUG - Checking market hours...
2025-06-02 13:05:47,768 - root - DEBUG - Market open: True
2025-06-02 13:05:47,769 - root - DEBUG - Fetching current market data...
2025-06-02 13:05:47,769 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:05:47,770 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:05:48,472 - root - INFO - Successfully fetched price for ^NSEI: 24700.0
2025-06-02 13:05:48,472 - root - DEBUG - Got spot price: 24700.0
2025-06-02 13:05:48,472 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:05:48,472 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:05:48.472589 to 2025-06-02 13:05:48.472589
2025-06-02 13:05:48,476 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:05:48,497 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:05:48,497 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:05:48,504 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:05:48,504 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:05:48,504 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:05:48,504 - root - DEBUG - Getting strike price...
2025-06-02 13:05:48,504 - root - INFO - Current spot: 24700.0, Selected strike: 24400
2025-06-02 13:05:48,504 - root - DEBUG - Current time in IST: 13:05:48.504823
2025-06-02 13:05:48,505 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:05:48,505 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:05:59,008 - root - DEBUG - Checking market hours...
2025-06-02 13:05:59,009 - root - DEBUG - Market open: True
2025-06-02 13:05:59,009 - root - DEBUG - Fetching current market data...
2025-06-02 13:05:59,009 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:05:59,011 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:05:59,229 - root - INFO - Successfully fetched price for ^NSEI: 24699.849609375
2025-06-02 13:05:59,229 - root - DEBUG - Got spot price: 24699.849609375
2025-06-02 13:05:59,229 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:05:59,229 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:05:59.229492 to 2025-06-02 13:05:59.229492
2025-06-02 13:05:59,233 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:05:59,255 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:05:59,256 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:05:59,256 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:05:59,256 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:05:59,256 - root - DEBUG - Getting strike price...
2025-06-02 13:05:59,256 - root - INFO - Current spot: 24699.849609375, Selected strike: 24300
2025-06-02 13:05:59,256 - root - DEBUG - Current time in IST: 13:05:59.256287
2025-06-02 13:05:59,257 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:05:59,257 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:06:12,841 - root - DEBUG - Checking market hours...
2025-06-02 13:06:12,841 - root - DEBUG - Market open: True
2025-06-02 13:06:12,842 - root - DEBUG - Fetching current market data...
2025-06-02 13:06:12,842 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:06:12,843 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:06:12,970 - root - INFO - Successfully fetched price for ^NSEI: 24700.400390625
2025-06-02 13:06:12,970 - root - DEBUG - Got spot price: 24700.400390625
2025-06-02 13:06:12,970 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:06:12,970 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:06:12.970599 to 2025-06-02 13:06:12.970599
2025-06-02 13:06:12,974 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:06:12,997 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:06:12,999 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:06:12,999 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:06:12,999 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:06:12,999 - root - DEBUG - Getting strike price...
2025-06-02 13:06:12,999 - root - INFO - Current spot: 24700.400390625, Selected strike: 24400
2025-06-02 13:06:13,000 - root - DEBUG - Current time in IST: 13:06:13.000159
2025-06-02 13:06:13,000 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:06:13,000 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:06:17,002 - root - DEBUG - Checking market hours...
2025-06-02 13:06:17,002 - root - DEBUG - Market open: True
2025-06-02 13:06:17,003 - root - DEBUG - Fetching current market data...
2025-06-02 13:06:17,003 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:06:17,004 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:06:17,144 - root - INFO - Successfully fetched price for ^NSEI: 24700.400390625
2025-06-02 13:06:17,145 - root - DEBUG - Got spot price: 24700.400390625
2025-06-02 13:06:17,145 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:06:17,145 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:06:17.145355 to 2025-06-02 13:06:17.145355
2025-06-02 13:06:17,149 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:06:17,160 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:06:17,161 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:06:17,161 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:06:17,161 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:06:17,161 - root - DEBUG - Getting strike price...
2025-06-02 13:06:17,161 - root - INFO - Current spot: 24700.400390625, Selected strike: 24400
2025-06-02 13:06:17,162 - root - DEBUG - Current time in IST: 13:06:17.162463
2025-06-02 13:06:17,162 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:06:17,162 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:06:48,514 - root - DEBUG - Checking market hours...
2025-06-02 13:06:48,515 - root - DEBUG - Market open: True
2025-06-02 13:06:48,515 - root - DEBUG - Fetching current market data...
2025-06-02 13:06:48,515 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:06:48,516 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:06:48,811 - root - INFO - Successfully fetched price for ^NSEI: 24698.94921875
2025-06-02 13:06:48,811 - root - DEBUG - Got spot price: 24698.94921875
2025-06-02 13:06:48,811 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:06:48,811 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:06:48.811134 to 2025-06-02 13:06:48.811134
2025-06-02 13:06:48,815 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:06:48,825 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:06:48,825 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:06:48,829 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:06:48,829 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:06:48,831 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:06:48,831 - root - DEBUG - Getting strike price...
2025-06-02 13:06:48,831 - root - INFO - Current spot: 24698.94921875, Selected strike: 24300
2025-06-02 13:06:48,831 - root - DEBUG - Current time in IST: 13:06:48.831054
2025-06-02 13:06:48,831 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:06:48,831 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:06:59,268 - root - DEBUG - Checking market hours...
2025-06-02 13:06:59,269 - root - DEBUG - Market open: True
2025-06-02 13:06:59,269 - root - DEBUG - Fetching current market data...
2025-06-02 13:06:59,269 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:06:59,270 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:06:59,692 - root - INFO - Successfully fetched price for ^NSEI: 24698.30078125
2025-06-02 13:06:59,692 - root - DEBUG - Got spot price: 24698.30078125
2025-06-02 13:06:59,692 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:06:59,692 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:06:59.692344 to 2025-06-02 13:06:59.692344
2025-06-02 13:06:59,696 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:06:59,706 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:06:59,706 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:06:59,706 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:06:59,706 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:06:59,706 - root - DEBUG - Getting strike price...
2025-06-02 13:06:59,706 - root - INFO - Current spot: 24698.30078125, Selected strike: 24300
2025-06-02 13:06:59,707 - root - DEBUG - Current time in IST: 13:06:59.707609
2025-06-02 13:06:59,707 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:06:59,707 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:07:13,009 - root - DEBUG - Checking market hours...
2025-06-02 13:07:13,009 - root - DEBUG - Market open: True
2025-06-02 13:07:13,010 - root - DEBUG - Fetching current market data...
2025-06-02 13:07:13,010 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:07:13,012 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:07:13,147 - root - INFO - Successfully fetched price for ^NSEI: 24700.25
2025-06-02 13:07:13,147 - root - DEBUG - Got spot price: 24700.25
2025-06-02 13:07:13,147 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:07:13,147 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:07:13.147096 to 2025-06-02 13:07:13.147096
2025-06-02 13:07:13,150 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:07:13,166 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:07:13,166 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:07:13,167 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:07:13,167 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:07:13,168 - root - DEBUG - Getting strike price...
2025-06-02 13:07:13,168 - root - INFO - Current spot: 24700.25, Selected strike: 24400
2025-06-02 13:07:13,168 - root - DEBUG - Current time in IST: 13:07:13.168336
2025-06-02 13:07:13,168 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:07:13,168 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:07:17,164 - root - DEBUG - Checking market hours...
2025-06-02 13:07:17,164 - root - DEBUG - Market open: True
2025-06-02 13:07:17,165 - root - DEBUG - Fetching current market data...
2025-06-02 13:07:17,165 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:07:17,171 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:07:17,355 - root - INFO - Successfully fetched price for ^NSEI: 24700.44921875
2025-06-02 13:07:17,373 - root - DEBUG - Got spot price: 24700.44921875
2025-06-02 13:07:17,373 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:07:17,374 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:07:17.374883 to 2025-06-02 13:07:17.374883
2025-06-02 13:07:17,380 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:07:17,397 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:07:17,398 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:07:17,398 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:07:17,398 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:07:17,398 - root - DEBUG - Getting strike price...
2025-06-02 13:07:17,398 - root - INFO - Current spot: 24700.44921875, Selected strike: 24400
2025-06-02 13:07:17,398 - root - DEBUG - Current time in IST: 13:07:17.398113
2025-06-02 13:07:17,399 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:07:17,399 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:07:48,843 - root - DEBUG - Checking market hours...
2025-06-02 13:07:48,844 - root - DEBUG - Market open: True
2025-06-02 13:07:48,844 - root - DEBUG - Fetching current market data...
2025-06-02 13:07:48,844 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:07:48,846 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:07:49,052 - root - INFO - Successfully fetched price for ^NSEI: 24698.55078125
2025-06-02 13:07:49,052 - root - DEBUG - Got spot price: 24698.55078125
2025-06-02 13:07:49,053 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:07:49,053 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:07:49.053906 to 2025-06-02 13:07:49.053906
2025-06-02 13:07:49,061 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:07:49,078 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:07:49,078 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:07:49,090 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:07:49,090 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:07:49,090 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:07:49,093 - root - DEBUG - Getting strike price...
2025-06-02 13:07:49,093 - root - INFO - Current spot: 24698.55078125, Selected strike: 24300
2025-06-02 13:07:49,094 - root - DEBUG - Current time in IST: 13:07:49.094262
2025-06-02 13:07:49,094 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:07:49,094 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:07:59,716 - root - DEBUG - Checking market hours...
2025-06-02 13:07:59,716 - root - DEBUG - Market open: True
2025-06-02 13:07:59,716 - root - DEBUG - Fetching current market data...
2025-06-02 13:07:59,716 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:07:59,718 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:07:59,951 - root - INFO - Successfully fetched price for ^NSEI: 24699.400390625
2025-06-02 13:07:59,951 - root - DEBUG - Got spot price: 24699.400390625
2025-06-02 13:07:59,951 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:07:59,952 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:07:59.951431 to 2025-06-02 13:07:59.951431
2025-06-02 13:07:59,954 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:07:59,965 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:07:59,965 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:07:59,965 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:07:59,965 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:07:59,965 - root - DEBUG - Getting strike price...
2025-06-02 13:07:59,965 - root - INFO - Current spot: 24699.400390625, Selected strike: 24300
2025-06-02 13:07:59,966 - root - DEBUG - Current time in IST: 13:07:59.966469
2025-06-02 13:07:59,966 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:07:59,966 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:08:13,170 - root - DEBUG - Checking market hours...
2025-06-02 13:08:13,171 - root - DEBUG - Market open: True
2025-06-02 13:08:13,171 - root - DEBUG - Fetching current market data...
2025-06-02 13:08:13,171 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:08:13,172 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:08:13,361 - root - INFO - Successfully fetched price for ^NSEI: 24693.30078125
2025-06-02 13:08:13,361 - root - DEBUG - Got spot price: 24693.30078125
2025-06-02 13:08:13,361 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:08:13,361 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:08:13.361161 to 2025-06-02 13:08:13.361161
2025-06-02 13:08:13,364 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:08:13,388 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:08:13,389 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:08:13,389 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:08:13,389 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:08:13,389 - root - DEBUG - Getting strike price...
2025-06-02 13:08:13,389 - root - INFO - Current spot: 24693.30078125, Selected strike: 24300
2025-06-02 13:08:13,389 - root - DEBUG - Current time in IST: 13:08:13.389397
2025-06-02 13:08:13,389 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:08:13,389 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:08:17,404 - root - DEBUG - Checking market hours...
2025-06-02 13:08:17,405 - root - DEBUG - Market open: True
2025-06-02 13:08:17,405 - root - DEBUG - Fetching current market data...
2025-06-02 13:08:17,405 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:08:17,409 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:08:17,581 - root - INFO - Successfully fetched price for ^NSEI: 24694.94921875
2025-06-02 13:08:17,582 - root - DEBUG - Got spot price: 24694.94921875
2025-06-02 13:08:17,582 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:08:17,582 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:08:17.582915 to 2025-06-02 13:08:17.582915
2025-06-02 13:08:17,584 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:08:17,608 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:08:17,608 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:08:17,608 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:08:17,608 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:08:17,608 - root - DEBUG - Getting strike price...
2025-06-02 13:08:17,608 - root - INFO - Current spot: 24694.94921875, Selected strike: 24300
2025-06-02 13:08:17,608 - root - DEBUG - Current time in IST: 13:08:17.608904
2025-06-02 13:08:17,608 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:08:17,608 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:08:49,095 - root - DEBUG - Checking market hours...
2025-06-02 13:08:49,095 - root - DEBUG - Market open: True
2025-06-02 13:08:49,095 - root - DEBUG - Fetching current market data...
2025-06-02 13:08:49,095 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:08:49,096 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:08:49,287 - root - INFO - Successfully fetched price for ^NSEI: 24696.849609375
2025-06-02 13:08:49,287 - root - DEBUG - Got spot price: 24696.849609375
2025-06-02 13:08:49,287 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:08:49,287 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:08:49.287122 to 2025-06-02 13:08:49.287122
2025-06-02 13:08:49,302 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:08:49,311 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:08:49,311 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:08:49,312 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:08:49,312 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:08:49,312 - root - DEBUG - Getting strike price...
2025-06-02 13:08:49,312 - root - INFO - Current spot: 24696.849609375, Selected strike: 24300
2025-06-02 13:08:49,312 - root - DEBUG - Current time in IST: 13:08:49.312682
2025-06-02 13:08:49,312 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:08:49,312 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:08:59,979 - root - DEBUG - Checking market hours...
2025-06-02 13:08:59,980 - root - DEBUG - Market open: True
2025-06-02 13:08:59,980 - root - DEBUG - Fetching current market data...
2025-06-02 13:08:59,981 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:08:59,982 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:09:00,212 - root - INFO - Successfully fetched price for ^NSEI: 24695.05078125
2025-06-02 13:09:00,212 - root - DEBUG - Got spot price: 24695.05078125
2025-06-02 13:09:00,212 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:09:00,212 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:09:00.212791 to 2025-06-02 13:09:00.212791
2025-06-02 13:09:00,216 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:09:00,227 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:09:00,228 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:09:00,228 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:09:00,228 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:09:00,228 - root - DEBUG - Getting strike price...
2025-06-02 13:09:00,229 - root - INFO - Current spot: 24695.05078125, Selected strike: 24300
2025-06-02 13:09:00,229 - root - DEBUG - Current time in IST: 13:09:00.229218
2025-06-02 13:09:00,229 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:09:00,229 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:09:13,393 - root - DEBUG - Checking market hours...
2025-06-02 13:09:13,393 - root - DEBUG - Market open: True
2025-06-02 13:09:13,393 - root - DEBUG - Fetching current market data...
2025-06-02 13:09:13,393 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:09:13,395 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:09:13,574 - root - INFO - Successfully fetched price for ^NSEI: 24698.599609375
2025-06-02 13:09:13,575 - root - DEBUG - Got spot price: 24698.599609375
2025-06-02 13:09:13,575 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:09:13,575 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:09:13.575254 to 2025-06-02 13:09:13.575254
2025-06-02 13:09:13,578 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:09:13,594 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:09:13,596 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:09:13,596 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:09:13,596 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:09:13,596 - root - DEBUG - Getting strike price...
2025-06-02 13:09:13,596 - root - INFO - Current spot: 24698.599609375, Selected strike: 24300
2025-06-02 13:09:13,596 - root - DEBUG - Current time in IST: 13:09:13.596836
2025-06-02 13:09:13,596 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:09:13,597 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:09:17,611 - root - DEBUG - Checking market hours...
2025-06-02 13:09:17,611 - root - DEBUG - Market open: True
2025-06-02 13:09:17,612 - root - DEBUG - Fetching current market data...
2025-06-02 13:09:17,612 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:09:17,614 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:09:17,772 - root - INFO - Successfully fetched price for ^NSEI: 24698.94921875
2025-06-02 13:09:17,772 - root - DEBUG - Got spot price: 24698.94921875
2025-06-02 13:09:17,772 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:09:17,772 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:09:17.772487 to 2025-06-02 13:09:17.772487
2025-06-02 13:09:17,775 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:09:17,798 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:09:17,799 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:09:17,799 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:09:17,800 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:09:17,800 - root - DEBUG - Getting strike price...
2025-06-02 13:09:17,800 - root - INFO - Current spot: 24698.94921875, Selected strike: 24300
2025-06-02 13:09:17,800 - root - DEBUG - Current time in IST: 13:09:17.800483
2025-06-02 13:09:17,800 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:09:17,801 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:09:49,313 - root - DEBUG - Checking market hours...
2025-06-02 13:09:49,313 - root - DEBUG - Market open: True
2025-06-02 13:09:49,313 - root - DEBUG - Fetching current market data...
2025-06-02 13:09:49,313 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:09:49,314 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:09:49,519 - root - INFO - Successfully fetched price for ^NSEI: 24698.099609375
2025-06-02 13:09:49,519 - root - DEBUG - Got spot price: 24698.099609375
2025-06-02 13:09:49,519 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:09:49,520 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:09:49.520422 to 2025-06-02 13:09:49.520422
2025-06-02 13:09:49,529 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:09:49,546 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:09:49,547 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:09:49,547 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:09:49,547 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:09:49,547 - root - DEBUG - Getting strike price...
2025-06-02 13:09:49,547 - root - INFO - Current spot: 24698.099609375, Selected strike: 24300
2025-06-02 13:09:49,547 - root - DEBUG - Current time in IST: 13:09:49.547439
2025-06-02 13:09:49,547 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:09:49,548 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:10:00,237 - root - DEBUG - Checking market hours...
2025-06-02 13:10:00,237 - root - DEBUG - Market open: True
2025-06-02 13:10:00,237 - root - DEBUG - Fetching current market data...
2025-06-02 13:10:00,237 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:10:00,239 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:10:00,368 - root - INFO - Successfully fetched price for ^NSEI: 24697.650390625
2025-06-02 13:10:00,368 - root - DEBUG - Got spot price: 24697.650390625
2025-06-02 13:10:00,368 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:10:00,369 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:10:00.368390 to 2025-06-02 13:10:00.368390
2025-06-02 13:10:00,371 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:10:00,393 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:10:00,395 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:10:00,395 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:10:00,395 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:10:00,395 - root - DEBUG - Getting strike price...
2025-06-02 13:10:00,396 - root - INFO - Current spot: 24697.650390625, Selected strike: 24300
2025-06-02 13:10:00,396 - root - DEBUG - Current time in IST: 13:10:00.396857
2025-06-02 13:10:00,396 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:10:00,396 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:10:13,603 - root - DEBUG - Checking market hours...
2025-06-02 13:10:13,604 - root - DEBUG - Market open: True
2025-06-02 13:10:13,604 - root - DEBUG - Fetching current market data...
2025-06-02 13:10:13,604 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:10:13,608 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:10:13,792 - root - INFO - Successfully fetched price for ^NSEI: 24696.349609375
2025-06-02 13:10:13,793 - root - DEBUG - Got spot price: 24696.349609375
2025-06-02 13:10:13,793 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:10:13,793 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:10:13.793439 to 2025-06-02 13:10:13.793439
2025-06-02 13:10:13,796 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:10:13,821 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:10:13,822 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:10:13,823 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:10:13,823 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:10:13,823 - root - DEBUG - Getting strike price...
2025-06-02 13:10:13,823 - root - INFO - Current spot: 24696.349609375, Selected strike: 24300
2025-06-02 13:10:13,823 - root - DEBUG - Current time in IST: 13:10:13.823066
2025-06-02 13:10:13,823 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:10:13,824 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:10:17,815 - root - DEBUG - Checking market hours...
2025-06-02 13:10:17,816 - root - DEBUG - Market open: True
2025-06-02 13:10:17,816 - root - DEBUG - Fetching current market data...
2025-06-02 13:10:17,816 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:10:17,818 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:10:18,125 - root - INFO - Successfully fetched price for ^NSEI: 24694.75
2025-06-02 13:10:18,125 - root - DEBUG - Got spot price: 24694.75
2025-06-02 13:10:18,125 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:10:18,126 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:10:18.125518 to 2025-06-02 13:10:18.125518
2025-06-02 13:10:18,131 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:10:18,143 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:10:18,144 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:10:18,144 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:10:18,144 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:10:18,144 - root - DEBUG - Getting strike price...
2025-06-02 13:10:18,144 - root - INFO - Current spot: 24694.75, Selected strike: 24300
2025-06-02 13:10:18,144 - root - DEBUG - Current time in IST: 13:10:18.144882
2025-06-02 13:10:18,144 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:10:18,145 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:10:49,558 - root - DEBUG - Checking market hours...
2025-06-02 13:10:49,558 - root - DEBUG - Market open: True
2025-06-02 13:10:49,558 - root - DEBUG - Fetching current market data...
2025-06-02 13:10:49,558 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:10:49,559 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:10:49,744 - root - INFO - Successfully fetched price for ^NSEI: 24695.69921875
2025-06-02 13:10:49,744 - root - DEBUG - Got spot price: 24695.69921875
2025-06-02 13:10:49,744 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:10:49,744 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:10:49.744955 to 2025-06-02 13:10:49.744955
2025-06-02 13:10:49,747 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:10:49,759 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:10:49,760 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:10:49,760 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:10:49,760 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:10:49,761 - root - DEBUG - Getting strike price...
2025-06-02 13:10:49,761 - root - INFO - Current spot: 24695.69921875, Selected strike: 24300
2025-06-02 13:10:49,762 - root - DEBUG - Current time in IST: 13:10:49.761151
2025-06-02 13:10:49,762 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:10:49,762 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:11:00,422 - root - DEBUG - Checking market hours...
2025-06-02 13:11:00,423 - root - DEBUG - Market open: True
2025-06-02 13:11:00,423 - root - DEBUG - Fetching current market data...
2025-06-02 13:11:00,423 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:11:00,424 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:11:00,640 - root - INFO - Successfully fetched price for ^NSEI: 24693.30078125
2025-06-02 13:11:00,640 - root - DEBUG - Got spot price: 24693.30078125
2025-06-02 13:11:00,640 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:11:00,641 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:11:00.640685 to 2025-06-02 13:11:00.640685
2025-06-02 13:11:00,649 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:11:00,675 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:11:00,676 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:11:00,676 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:11:00,676 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:11:00,676 - root - DEBUG - Getting strike price...
2025-06-02 13:11:00,676 - root - INFO - Current spot: 24693.30078125, Selected strike: 24300
2025-06-02 13:11:00,676 - root - DEBUG - Current time in IST: 13:11:00.676045
2025-06-02 13:11:00,676 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:11:00,676 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:11:13,829 - root - DEBUG - Checking market hours...
2025-06-02 13:11:13,830 - root - DEBUG - Market open: True
2025-06-02 13:11:13,830 - root - DEBUG - Fetching current market data...
2025-06-02 13:11:13,830 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:11:13,831 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:11:14,057 - root - INFO - Successfully fetched price for ^NSEI: 24695.30078125
2025-06-02 13:11:14,057 - root - DEBUG - Got spot price: 24695.30078125
2025-06-02 13:11:14,057 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:11:14,058 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:11:14.057537 to 2025-06-02 13:11:14.057537
2025-06-02 13:11:14,062 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:11:14,078 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:11:14,079 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:11:14,079 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:11:14,079 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:11:14,079 - root - DEBUG - Getting strike price...
2025-06-02 13:11:14,079 - root - INFO - Current spot: 24695.30078125, Selected strike: 24300
2025-06-02 13:11:14,080 - root - DEBUG - Current time in IST: 13:11:14.080959
2025-06-02 13:11:14,080 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:11:14,080 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:11:18,148 - root - DEBUG - Checking market hours...
2025-06-02 13:11:18,148 - root - DEBUG - Market open: True
2025-06-02 13:11:18,148 - root - DEBUG - Fetching current market data...
2025-06-02 13:11:18,148 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:11:18,149 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:11:18,232 - root - INFO - Successfully fetched price for ^NSEI: 24695.30078125
2025-06-02 13:11:18,232 - root - DEBUG - Got spot price: 24695.30078125
2025-06-02 13:11:18,233 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:11:18,233 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:11:18.233176 to 2025-06-02 13:11:18.233176
2025-06-02 13:11:18,237 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:11:18,255 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:11:18,256 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:11:18,256 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:11:18,256 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:11:18,256 - root - DEBUG - Getting strike price...
2025-06-02 13:11:18,257 - root - INFO - Current spot: 24695.30078125, Selected strike: 24300
2025-06-02 13:11:18,257 - root - DEBUG - Current time in IST: 13:11:18.257961
2025-06-02 13:11:18,257 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:11:18,257 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:11:49,775 - root - DEBUG - Checking market hours...
2025-06-02 13:11:49,775 - root - DEBUG - Market open: True
2025-06-02 13:11:49,775 - root - DEBUG - Fetching current market data...
2025-06-02 13:11:49,775 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:11:49,776 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:11:49,965 - root - INFO - Successfully fetched price for ^NSEI: 24695.94921875
2025-06-02 13:11:49,965 - root - DEBUG - Got spot price: 24695.94921875
2025-06-02 13:11:49,965 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:11:49,965 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:11:49.965435 to 2025-06-02 13:11:49.965435
2025-06-02 13:11:49,970 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:11:49,993 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:11:49,994 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:11:49,994 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:11:49,994 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:11:49,994 - root - DEBUG - Getting strike price...
2025-06-02 13:11:49,994 - root - INFO - Current spot: 24695.94921875, Selected strike: 24300
2025-06-02 13:11:49,995 - root - DEBUG - Current time in IST: 13:11:49.995828
2025-06-02 13:11:49,996 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:11:49,996 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:12:00,688 - root - DEBUG - Checking market hours...
2025-06-02 13:12:00,688 - root - DEBUG - Market open: True
2025-06-02 13:12:00,688 - root - DEBUG - Fetching current market data...
2025-06-02 13:12:00,688 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:12:00,689 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:12:00,841 - root - INFO - Successfully fetched price for ^NSEI: 24697.5
2025-06-02 13:12:00,841 - root - DEBUG - Got spot price: 24697.5
2025-06-02 13:12:00,841 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:12:00,842 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:12:00.841769 to 2025-06-02 13:12:00.841769
2025-06-02 13:12:00,848 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:12:00,860 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:12:00,860 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:12:00,861 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:12:00,861 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:12:00,861 - root - DEBUG - Getting strike price...
2025-06-02 13:12:00,861 - root - INFO - Current spot: 24697.5, Selected strike: 24300
2025-06-02 13:12:00,861 - root - DEBUG - Current time in IST: 13:12:00.861423
2025-06-02 13:12:00,861 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:12:00,861 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:12:14,094 - root - DEBUG - Checking market hours...
2025-06-02 13:12:14,094 - root - DEBUG - Market open: True
2025-06-02 13:12:14,094 - root - DEBUG - Fetching current market data...
2025-06-02 13:12:14,094 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:12:14,095 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:12:14,243 - root - INFO - Successfully fetched price for ^NSEI: 24697.05078125
2025-06-02 13:12:14,244 - root - DEBUG - Got spot price: 24697.05078125
2025-06-02 13:12:14,244 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:12:14,244 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:12:14.244644 to 2025-06-02 13:12:14.244644
2025-06-02 13:12:14,246 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:12:14,263 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:12:14,264 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:12:14,264 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:12:14,264 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:12:14,264 - root - DEBUG - Getting strike price...
2025-06-02 13:12:14,264 - root - INFO - Current spot: 24697.05078125, Selected strike: 24300
2025-06-02 13:12:14,264 - root - DEBUG - Current time in IST: 13:12:14.264437
2025-06-02 13:12:14,264 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:12:14,265 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:12:18,264 - root - DEBUG - Checking market hours...
2025-06-02 13:12:18,265 - root - DEBUG - Market open: True
2025-06-02 13:12:18,265 - root - DEBUG - Fetching current market data...
2025-06-02 13:12:18,266 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:12:18,267 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:12:18,397 - root - INFO - Successfully fetched price for ^NSEI: 24698.44921875
2025-06-02 13:12:18,397 - root - DEBUG - Got spot price: 24698.44921875
2025-06-02 13:12:18,397 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:12:18,398 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:12:18.398057 to 2025-06-02 13:12:18.398057
2025-06-02 13:12:18,400 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:12:18,420 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:12:18,421 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:12:18,421 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:12:18,421 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:12:18,421 - root - DEBUG - Getting strike price...
2025-06-02 13:12:18,421 - root - INFO - Current spot: 24698.44921875, Selected strike: 24300
2025-06-02 13:12:18,421 - root - DEBUG - Current time in IST: 13:12:18.421286
2025-06-02 13:12:18,421 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:12:18,422 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:12:50,008 - root - DEBUG - Checking market hours...
2025-06-02 13:12:50,008 - root - DEBUG - Market open: True
2025-06-02 13:12:50,008 - root - DEBUG - Fetching current market data...
2025-06-02 13:12:50,008 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:12:50,010 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:12:50,232 - root - INFO - Successfully fetched price for ^NSEI: 24697.69921875
2025-06-02 13:12:50,233 - root - DEBUG - Got spot price: 24697.69921875
2025-06-02 13:12:50,233 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:12:50,233 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:12:50.233072 to 2025-06-02 13:12:50.233072
2025-06-02 13:12:50,238 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:12:50,254 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:12:50,255 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:12:50,255 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:12:50,255 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:12:50,255 - root - DEBUG - Getting strike price...
2025-06-02 13:12:50,255 - root - INFO - Current spot: 24697.69921875, Selected strike: 24300
2025-06-02 13:12:50,255 - root - DEBUG - Current time in IST: 13:12:50.255760
2025-06-02 13:12:50,256 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:12:50,256 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:13:00,875 - root - DEBUG - Checking market hours...
2025-06-02 13:13:00,875 - root - DEBUG - Market open: True
2025-06-02 13:13:00,876 - root - DEBUG - Fetching current market data...
2025-06-02 13:13:00,876 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:13:00,877 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:13:01,079 - root - INFO - Successfully fetched price for ^NSEI: 24697.69921875
2025-06-02 13:13:01,081 - root - DEBUG - Got spot price: 24697.69921875
2025-06-02 13:13:01,081 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:13:01,082 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:13:01.082537 to 2025-06-02 13:13:01.082537
2025-06-02 13:13:01,087 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:13:01,110 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:13:01,111 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:13:01,111 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:13:01,111 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:13:01,111 - root - DEBUG - Getting strike price...
2025-06-02 13:13:01,111 - root - INFO - Current spot: 24697.69921875, Selected strike: 24300
2025-06-02 13:13:01,112 - root - DEBUG - Current time in IST: 13:13:01.112274
2025-06-02 13:13:01,113 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:13:01,113 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:13:14,271 - root - DEBUG - Checking market hours...
2025-06-02 13:13:14,271 - root - DEBUG - Market open: True
2025-06-02 13:13:14,271 - root - DEBUG - Fetching current market data...
2025-06-02 13:13:14,271 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:13:14,273 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:13:14,489 - root - INFO - Successfully fetched price for ^NSEI: 24698.94921875
2025-06-02 13:13:14,489 - root - DEBUG - Got spot price: 24698.94921875
2025-06-02 13:13:14,489 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:13:14,490 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:13:14.489763 to 2025-06-02 13:13:14.489763
2025-06-02 13:13:14,492 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:13:14,517 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:13:14,519 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:13:14,519 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:13:14,520 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:13:14,520 - root - DEBUG - Getting strike price...
2025-06-02 13:13:14,520 - root - INFO - Current spot: 24698.94921875, Selected strike: 24300
2025-06-02 13:13:14,520 - root - DEBUG - Current time in IST: 13:13:14.520957
2025-06-02 13:13:14,520 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:13:14,521 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:13:18,437 - root - DEBUG - Checking market hours...
2025-06-02 13:13:18,437 - root - DEBUG - Market open: True
2025-06-02 13:13:18,437 - root - DEBUG - Fetching current market data...
2025-06-02 13:13:18,438 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:13:18,438 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:13:18,576 - root - INFO - Successfully fetched price for ^NSEI: 24699.650390625
2025-06-02 13:13:18,576 - root - DEBUG - Got spot price: 24699.650390625
2025-06-02 13:13:18,576 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:13:18,576 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:13:18.576010 to 2025-06-02 13:13:18.576010
2025-06-02 13:13:18,580 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:13:18,593 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:13:18,593 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:13:18,593 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:13:18,593 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:13:18,593 - root - DEBUG - Getting strike price...
2025-06-02 13:13:18,593 - root - INFO - Current spot: 24699.650390625, Selected strike: 24300
2025-06-02 13:13:18,593 - root - DEBUG - Current time in IST: 13:13:18.593993
2025-06-02 13:13:18,593 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:13:18,595 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:13:50,260 - root - DEBUG - Checking market hours...
2025-06-02 13:13:50,260 - root - DEBUG - Market open: True
2025-06-02 13:13:50,260 - root - DEBUG - Fetching current market data...
2025-06-02 13:13:50,260 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:13:50,261 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:13:50,454 - root - INFO - Successfully fetched price for ^NSEI: 24696.400390625
2025-06-02 13:13:50,454 - root - DEBUG - Got spot price: 24696.400390625
2025-06-02 13:13:50,454 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:13:50,455 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:13:50.454009 to 2025-06-02 13:13:50.454009
2025-06-02 13:13:50,457 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:13:50,477 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:13:50,477 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:13:50,477 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:13:50,477 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:13:50,477 - root - DEBUG - Getting strike price...
2025-06-02 13:13:50,477 - root - INFO - Current spot: 24696.400390625, Selected strike: 24300
2025-06-02 13:13:50,477 - root - DEBUG - Current time in IST: 13:13:50.477373
2025-06-02 13:13:50,477 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:13:50,478 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:14:01,116 - root - DEBUG - Checking market hours...
2025-06-02 13:14:01,117 - root - DEBUG - Market open: True
2025-06-02 13:14:01,117 - root - DEBUG - Fetching current market data...
2025-06-02 13:14:01,117 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:14:01,117 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:14:01,319 - root - INFO - Successfully fetched price for ^NSEI: 24696.05078125
2025-06-02 13:14:01,319 - root - DEBUG - Got spot price: 24696.05078125
2025-06-02 13:14:01,319 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:14:01,319 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:14:01.319712 to 2025-06-02 13:14:01.319712
2025-06-02 13:14:01,322 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:14:01,334 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:14:01,334 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:14:01,334 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:14:01,335 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:14:01,335 - root - DEBUG - Getting strike price...
2025-06-02 13:14:01,335 - root - INFO - Current spot: 24696.05078125, Selected strike: 24300
2025-06-02 13:14:01,336 - root - DEBUG - Current time in IST: 13:14:01.335936
2025-06-02 13:14:01,336 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:14:01,336 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:14:14,532 - root - DEBUG - Checking market hours...
2025-06-02 13:14:14,532 - root - DEBUG - Market open: True
2025-06-02 13:14:14,533 - root - DEBUG - Fetching current market data...
2025-06-02 13:14:14,533 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:14:14,534 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:14:14,717 - root - INFO - Successfully fetched price for ^NSEI: 24696.55078125
2025-06-02 13:14:14,717 - root - DEBUG - Got spot price: 24696.55078125
2025-06-02 13:14:14,717 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:14:14,718 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:14:14.717200 to 2025-06-02 13:14:14.717200
2025-06-02 13:14:14,720 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:14:14,730 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:14:14,730 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:14:14,731 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:14:14,731 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:14:14,731 - root - DEBUG - Getting strike price...
2025-06-02 13:14:14,731 - root - INFO - Current spot: 24696.55078125, Selected strike: 24300
2025-06-02 13:14:14,731 - root - DEBUG - Current time in IST: 13:14:14.731873
2025-06-02 13:14:14,731 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:14:14,731 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:14:18,605 - root - DEBUG - Checking market hours...
2025-06-02 13:14:18,605 - root - DEBUG - Market open: True
2025-06-02 13:14:18,605 - root - DEBUG - Fetching current market data...
2025-06-02 13:14:18,605 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:14:18,606 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:14:18,905 - root - INFO - Successfully fetched price for ^NSEI: 24697.19921875
2025-06-02 13:14:18,905 - root - DEBUG - Got spot price: 24697.19921875
2025-06-02 13:14:18,905 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:14:18,906 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:14:18.905316 to 2025-06-02 13:14:18.905316
2025-06-02 13:14:18,923 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:14:18,934 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:14:18,934 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:14:18,934 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:14:18,934 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:14:18,934 - root - DEBUG - Getting strike price...
2025-06-02 13:14:18,935 - root - INFO - Current spot: 24697.19921875, Selected strike: 24300
2025-06-02 13:14:18,935 - root - DEBUG - Current time in IST: 13:14:18.935570
2025-06-02 13:14:18,935 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:14:18,935 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:14:50,491 - root - DEBUG - Checking market hours...
2025-06-02 13:14:50,491 - root - DEBUG - Market open: True
2025-06-02 13:14:50,491 - root - DEBUG - Fetching current market data...
2025-06-02 13:14:50,491 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:14:50,491 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:14:50,685 - root - INFO - Successfully fetched price for ^NSEI: 24701.0
2025-06-02 13:14:50,686 - root - DEBUG - Got spot price: 24701.0
2025-06-02 13:14:50,686 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:14:50,686 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:14:50.686723 to 2025-06-02 13:14:50.686723
2025-06-02 13:14:50,689 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:14:50,707 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:14:50,709 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:14:50,709 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:14:50,710 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:14:50,710 - root - DEBUG - Getting strike price...
2025-06-02 13:14:50,711 - root - INFO - Current spot: 24701.0, Selected strike: 24400
2025-06-02 13:14:50,712 - root - DEBUG - Current time in IST: 13:14:50.712027
2025-06-02 13:14:50,712 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:14:50,712 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:15:01,349 - root - DEBUG - Checking market hours...
2025-06-02 13:15:01,349 - root - DEBUG - Market open: True
2025-06-02 13:15:01,349 - root - DEBUG - Fetching current market data...
2025-06-02 13:15:01,349 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:15:01,350 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:15:01,689 - root - INFO - Successfully fetched price for ^NSEI: 24702.44921875
2025-06-02 13:15:01,689 - root - DEBUG - Got spot price: 24702.44921875
2025-06-02 13:15:01,689 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:15:01,689 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:15:01.689707 to 2025-06-02 13:15:01.689707
2025-06-02 13:15:01,693 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:15:01,708 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:15:01,709 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:15:01,709 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:15:01,709 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:15:01,710 - root - DEBUG - Getting strike price...
2025-06-02 13:15:01,710 - root - INFO - Current spot: 24702.44921875, Selected strike: 24400
2025-06-02 13:15:01,710 - root - DEBUG - Current time in IST: 13:15:01.710553
2025-06-02 13:15:01,710 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:15:01,710 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:15:14,743 - root - DEBUG - Checking market hours...
2025-06-02 13:15:14,743 - root - DEBUG - Market open: True
2025-06-02 13:15:14,743 - root - DEBUG - Fetching current market data...
2025-06-02 13:15:14,744 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:15:14,745 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:15:14,937 - root - INFO - Successfully fetched price for ^NSEI: 24703.150390625
2025-06-02 13:15:14,938 - root - DEBUG - Got spot price: 24703.150390625
2025-06-02 13:15:14,938 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:15:14,938 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:15:14.938978 to 2025-06-02 13:15:14.938978
2025-06-02 13:15:14,941 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:15:14,961 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:15:14,962 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:15:14,962 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:15:14,962 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:15:14,962 - root - DEBUG - Getting strike price...
2025-06-02 13:15:14,962 - root - INFO - Current spot: 24703.150390625, Selected strike: 24400
2025-06-02 13:15:14,962 - root - DEBUG - Current time in IST: 13:15:14.962062
2025-06-02 13:15:14,963 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:15:14,964 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:15:18,940 - root - DEBUG - Checking market hours...
2025-06-02 13:15:18,940 - root - DEBUG - Market open: True
2025-06-02 13:15:18,940 - root - DEBUG - Fetching current market data...
2025-06-02 13:15:18,940 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:15:18,941 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:15:19,122 - root - INFO - Successfully fetched price for ^NSEI: 24703.80078125
2025-06-02 13:15:19,122 - root - DEBUG - Got spot price: 24703.80078125
2025-06-02 13:15:19,122 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:15:19,122 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:15:19.122411 to 2025-06-02 13:15:19.122411
2025-06-02 13:15:19,125 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:15:19,143 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:15:19,144 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:15:19,144 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:15:19,144 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:15:19,144 - root - DEBUG - Getting strike price...
2025-06-02 13:15:19,145 - root - INFO - Current spot: 24703.80078125, Selected strike: 24400
2025-06-02 13:15:19,145 - root - DEBUG - Current time in IST: 13:15:19.145363
2025-06-02 13:15:19,145 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:15:19,146 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:15:26,137 - root - INFO - Loaded previous state. Balance: 60000
2025-06-02 13:15:26,138 - root - INFO - Starting paper trading session...
2025-06-02 13:15:26,138 - root - DEBUG - Checking market hours...
2025-06-02 13:15:26,175 - root - DEBUG - Market open: True
2025-06-02 13:15:26,175 - root - DEBUG - Fetching current market data...
2025-06-02 13:15:26,175 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:15:26,176 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2025-06-02 13:15:26,177 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:15:26,177 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2025-06-02 13:15:26,177 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 13:15:26,539 - root - INFO - Successfully fetched price for ^NSEI: 24705.849609375
2025-06-02 13:15:26,540 - root - DEBUG - Got spot price: 24705.849609375
2025-06-02 13:15:26,540 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:15:26,540 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:15:26.540359 to 2025-06-02 13:15:26.540359
2025-06-02 13:15:26,543 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:15:26,714 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 13:15:27,148 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 13:15:27,360 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:15:27,360 - yfinance - ERROR - ['NSEI.BO']: HTTPError('HTTP Error 404: ')
2025-06-02 13:15:27,362 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:15:27,362 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:15:27,362 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:15:27,362 - root - DEBUG - Getting strike price...
2025-06-02 13:15:27,362 - root - INFO - Current spot: 24705.849609375, Selected strike: 24400
2025-06-02 13:15:27,362 - root - DEBUG - Current time in IST: 13:15:27.362642
2025-06-02 13:15:27,363 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:15:27,363 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:15:50,714 - root - DEBUG - Checking market hours...
2025-06-02 13:15:50,714 - root - DEBUG - Market open: True
2025-06-02 13:15:50,715 - root - DEBUG - Fetching current market data...
2025-06-02 13:15:50,715 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:15:50,718 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:15:50,918 - root - INFO - Successfully fetched price for ^NSEI: 24704.19921875
2025-06-02 13:15:50,918 - root - DEBUG - Got spot price: 24704.19921875
2025-06-02 13:15:50,919 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:15:50,919 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:15:50.919467 to 2025-06-02 13:15:50.919467
2025-06-02 13:15:50,922 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:15:50,934 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:15:50,934 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:15:50,934 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:15:50,934 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:15:50,934 - root - DEBUG - Getting strike price...
2025-06-02 13:15:50,934 - root - INFO - Current spot: 24704.19921875, Selected strike: 24400
2025-06-02 13:15:50,934 - root - DEBUG - Current time in IST: 13:15:50.934815
2025-06-02 13:15:50,935 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:15:50,935 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:16:01,723 - root - DEBUG - Checking market hours...
2025-06-02 13:16:01,724 - root - DEBUG - Market open: True
2025-06-02 13:16:01,724 - root - DEBUG - Fetching current market data...
2025-06-02 13:16:01,724 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:16:01,726 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:16:01,911 - root - INFO - Successfully fetched price for ^NSEI: 24705.5
2025-06-02 13:16:01,912 - root - DEBUG - Got spot price: 24705.5
2025-06-02 13:16:01,912 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:16:01,912 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:16:01.912213 to 2025-06-02 13:16:01.912213
2025-06-02 13:16:01,916 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:16:01,928 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:16:01,929 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:16:01,929 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:16:01,929 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:16:01,929 - root - DEBUG - Getting strike price...
2025-06-02 13:16:01,929 - root - INFO - Current spot: 24705.5, Selected strike: 24400
2025-06-02 13:16:01,929 - root - DEBUG - Current time in IST: 13:16:01.929950
2025-06-02 13:16:01,929 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:16:01,930 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:16:14,975 - root - DEBUG - Checking market hours...
2025-06-02 13:16:14,976 - root - DEBUG - Market open: True
2025-06-02 13:16:14,976 - root - DEBUG - Fetching current market data...
2025-06-02 13:16:14,977 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:16:14,978 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:16:15,193 - root - INFO - Successfully fetched price for ^NSEI: 24701.05078125
2025-06-02 13:16:15,194 - root - DEBUG - Got spot price: 24701.05078125
2025-06-02 13:16:15,194 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:16:15,194 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:16:15.194401 to 2025-06-02 13:16:15.194401
2025-06-02 13:16:15,197 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:16:15,208 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:16:15,209 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:16:15,209 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:16:15,209 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:16:15,209 - root - DEBUG - Getting strike price...
2025-06-02 13:16:15,209 - root - INFO - Current spot: 24701.05078125, Selected strike: 24400
2025-06-02 13:16:15,209 - root - DEBUG - Current time in IST: 13:16:15.209373
2025-06-02 13:16:15,209 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:16:15,210 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:16:19,157 - root - DEBUG - Checking market hours...
2025-06-02 13:16:19,158 - root - DEBUG - Market open: True
2025-06-02 13:16:19,158 - root - DEBUG - Fetching current market data...
2025-06-02 13:16:19,158 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:16:19,159 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:16:19,333 - root - INFO - Successfully fetched price for ^NSEI: 24702.349609375
2025-06-02 13:16:19,333 - root - DEBUG - Got spot price: 24702.349609375
2025-06-02 13:16:19,333 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:16:19,333 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:16:19.333521 to 2025-06-02 13:16:19.333521
2025-06-02 13:16:19,336 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:16:19,360 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:16:19,362 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:16:19,362 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:16:19,362 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:16:19,363 - root - DEBUG - Getting strike price...
2025-06-02 13:16:19,363 - root - INFO - Current spot: 24702.349609375, Selected strike: 24400
2025-06-02 13:16:19,363 - root - DEBUG - Current time in IST: 13:16:19.363615
2025-06-02 13:16:19,363 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:16:19,364 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:16:27,370 - root - DEBUG - Checking market hours...
2025-06-02 13:16:27,371 - root - DEBUG - Market open: True
2025-06-02 13:16:27,371 - root - DEBUG - Fetching current market data...
2025-06-02 13:16:27,371 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:16:27,372 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:16:27,504 - root - INFO - Successfully fetched price for ^NSEI: 24702.349609375
2025-06-02 13:16:27,504 - root - DEBUG - Got spot price: 24702.349609375
2025-06-02 13:16:27,504 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:16:27,504 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:16:27.504724 to 2025-06-02 13:16:27.504724
2025-06-02 13:16:27,507 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:16:27,676 - peewee - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['curlCffi', 1, 0])
2025-06-02 13:16:27,915 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:16:27,916 - yfinance - ERROR - ['NSEI.BO']: HTTPError('HTTP Error 404: ')
2025-06-02 13:16:27,919 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:16:27,919 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:16:27,920 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:16:27,920 - root - DEBUG - Getting strike price...
2025-06-02 13:16:27,920 - root - INFO - Current spot: 24702.349609375, Selected strike: 24400
2025-06-02 13:16:27,920 - root - DEBUG - Current time in IST: 13:16:27.920791
2025-06-02 13:16:27,920 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:16:27,921 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:16:50,950 - root - DEBUG - Checking market hours...
2025-06-02 13:16:50,951 - root - DEBUG - Market open: True
2025-06-02 13:16:50,951 - root - DEBUG - Fetching current market data...
2025-06-02 13:16:50,951 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:16:50,955 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:16:51,159 - root - INFO - Successfully fetched price for ^NSEI: 24712.44921875
2025-06-02 13:16:51,159 - root - DEBUG - Got spot price: 24712.44921875
2025-06-02 13:16:51,159 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:16:51,159 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:16:51.159263 to 2025-06-02 13:16:51.159263
2025-06-02 13:16:51,163 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:16:51,183 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:16:51,184 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:16:51,184 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:16:51,184 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:16:51,184 - root - DEBUG - Getting strike price...
2025-06-02 13:16:51,184 - root - INFO - Current spot: 24712.44921875, Selected strike: 24400
2025-06-02 13:16:51,184 - root - DEBUG - Current time in IST: 13:16:51.184598
2025-06-02 13:16:51,185 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:16:51,185 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:17:01,934 - root - DEBUG - Checking market hours...
2025-06-02 13:17:01,934 - root - DEBUG - Market open: True
2025-06-02 13:17:01,935 - root - DEBUG - Fetching current market data...
2025-06-02 13:17:01,935 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:17:01,935 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:17:02,139 - root - INFO - Successfully fetched price for ^NSEI: 24712.30078125
2025-06-02 13:17:02,139 - root - DEBUG - Got spot price: 24712.30078125
2025-06-02 13:17:02,139 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:17:02,140 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:17:02.140804 to 2025-06-02 13:17:02.140804
2025-06-02 13:17:02,145 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:17:02,169 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:17:02,169 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:17:02,169 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:17:02,169 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:17:02,169 - root - DEBUG - Getting strike price...
2025-06-02 13:17:02,169 - root - INFO - Current spot: 24712.30078125, Selected strike: 24400
2025-06-02 13:17:02,169 - root - DEBUG - Current time in IST: 13:17:02.169901
2025-06-02 13:17:02,169 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:17:02,170 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:17:15,224 - root - DEBUG - Checking market hours...
2025-06-02 13:17:15,225 - root - DEBUG - Market open: True
2025-06-02 13:17:15,225 - root - DEBUG - Fetching current market data...
2025-06-02 13:17:15,225 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:17:15,226 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:17:15,416 - root - INFO - Successfully fetched price for ^NSEI: 24709.400390625
2025-06-02 13:17:15,416 - root - DEBUG - Got spot price: 24709.400390625
2025-06-02 13:17:15,416 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:17:15,417 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:17:15.417744 to 2025-06-02 13:17:15.417744
2025-06-02 13:17:15,422 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:17:15,446 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:17:15,447 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:17:15,447 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:17:15,447 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:17:15,447 - root - DEBUG - Getting strike price...
2025-06-02 13:17:15,448 - root - INFO - Current spot: 24709.400390625, Selected strike: 24400
2025-06-02 13:17:15,448 - root - DEBUG - Current time in IST: 13:17:15.448343
2025-06-02 13:17:15,448 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:17:15,448 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:17:19,372 - root - DEBUG - Checking market hours...
2025-06-02 13:17:19,372 - root - DEBUG - Market open: True
2025-06-02 13:17:19,372 - root - DEBUG - Fetching current market data...
2025-06-02 13:17:19,372 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:17:19,374 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:17:19,557 - root - INFO - Successfully fetched price for ^NSEI: 24710.099609375
2025-06-02 13:17:19,557 - root - DEBUG - Got spot price: 24710.099609375
2025-06-02 13:17:19,557 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:17:19,558 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:17:19.558822 to 2025-06-02 13:17:19.558822
2025-06-02 13:17:19,563 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:17:19,575 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:17:19,576 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:17:19,576 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:17:19,576 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:17:19,576 - root - DEBUG - Getting strike price...
2025-06-02 13:17:19,576 - root - INFO - Current spot: 24710.099609375, Selected strike: 24400
2025-06-02 13:17:19,577 - root - DEBUG - Current time in IST: 13:17:19.577390
2025-06-02 13:17:19,577 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:17:19,577 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:17:27,928 - root - DEBUG - Checking market hours...
2025-06-02 13:17:27,929 - root - DEBUG - Market open: True
2025-06-02 13:17:27,929 - root - DEBUG - Fetching current market data...
2025-06-02 13:17:27,929 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:17:27,931 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:17:28,116 - root - INFO - Successfully fetched price for ^NSEI: 24709.849609375
2025-06-02 13:17:28,116 - root - DEBUG - Got spot price: 24709.849609375
2025-06-02 13:17:28,116 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:17:28,117 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:17:28.116420 to 2025-06-02 13:17:28.116420
2025-06-02 13:17:28,119 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:17:28,131 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:17:28,131 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:17:28,134 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:17:28,134 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:17:28,134 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:17:28,134 - root - DEBUG - Getting strike price...
2025-06-02 13:17:28,134 - root - INFO - Current spot: 24709.849609375, Selected strike: 24400
2025-06-02 13:17:28,134 - root - DEBUG - Current time in IST: 13:17:28.134940
2025-06-02 13:17:28,134 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:17:28,134 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:17:51,196 - root - DEBUG - Checking market hours...
2025-06-02 13:17:51,196 - root - DEBUG - Market open: True
2025-06-02 13:17:51,196 - root - DEBUG - Fetching current market data...
2025-06-02 13:17:51,197 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:17:51,198 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:17:51,384 - root - INFO - Successfully fetched price for ^NSEI: 24708.94921875
2025-06-02 13:17:51,384 - root - DEBUG - Got spot price: 24708.94921875
2025-06-02 13:17:51,384 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:17:51,385 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:17:51.384867 to 2025-06-02 13:17:51.384867
2025-06-02 13:17:51,389 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:17:51,399 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:17:51,400 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:17:51,400 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:17:51,400 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:17:51,400 - root - DEBUG - Getting strike price...
2025-06-02 13:17:51,400 - root - INFO - Current spot: 24708.94921875, Selected strike: 24400
2025-06-02 13:17:51,400 - root - DEBUG - Current time in IST: 13:17:51.400951
2025-06-02 13:17:51,400 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:17:51,402 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:18:02,180 - root - DEBUG - Checking market hours...
2025-06-02 13:18:02,181 - root - DEBUG - Market open: True
2025-06-02 13:18:02,181 - root - DEBUG - Fetching current market data...
2025-06-02 13:18:02,181 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:18:02,181 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:18:02,336 - root - INFO - Successfully fetched price for ^NSEI: 24707.099609375
2025-06-02 13:18:02,337 - root - DEBUG - Got spot price: 24707.099609375
2025-06-02 13:18:02,337 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:18:02,337 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:18:02.337464 to 2025-06-02 13:18:02.337464
2025-06-02 13:18:02,341 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:18:02,352 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:18:02,353 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:18:02,353 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:18:02,353 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:18:02,353 - root - DEBUG - Getting strike price...
2025-06-02 13:18:02,353 - root - INFO - Current spot: 24707.099609375, Selected strike: 24400
2025-06-02 13:18:02,354 - root - DEBUG - Current time in IST: 13:18:02.354966
2025-06-02 13:18:02,354 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:18:02,354 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:18:15,458 - root - DEBUG - Checking market hours...
2025-06-02 13:18:15,459 - root - DEBUG - Market open: True
2025-06-02 13:18:15,459 - root - DEBUG - Fetching current market data...
2025-06-02 13:18:15,459 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:18:15,460 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:18:15,609 - root - INFO - Successfully fetched price for ^NSEI: 24705.25
2025-06-02 13:18:15,609 - root - DEBUG - Got spot price: 24705.25
2025-06-02 13:18:15,609 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:18:15,610 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:18:15.610838 to 2025-06-02 13:18:15.610838
2025-06-02 13:18:15,617 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:18:15,630 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:18:15,631 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:18:15,631 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:18:15,631 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:18:15,631 - root - DEBUG - Getting strike price...
2025-06-02 13:18:15,631 - root - INFO - Current spot: 24705.25, Selected strike: 24400
2025-06-02 13:18:15,631 - root - DEBUG - Current time in IST: 13:18:15.631390
2025-06-02 13:18:15,631 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:18:15,631 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:18:19,592 - root - DEBUG - Checking market hours...
2025-06-02 13:18:19,593 - root - DEBUG - Market open: True
2025-06-02 13:18:19,593 - root - DEBUG - Fetching current market data...
2025-06-02 13:18:19,593 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:18:19,594 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:18:19,686 - root - INFO - Successfully fetched price for ^NSEI: 24705.25
2025-06-02 13:18:19,686 - root - DEBUG - Got spot price: 24705.25
2025-06-02 13:18:19,686 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:18:19,686 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:18:19.686931 to 2025-06-02 13:18:19.686931
2025-06-02 13:18:19,691 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:18:19,716 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:18:19,717 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:18:19,717 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:18:19,717 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:18:19,717 - root - DEBUG - Getting strike price...
2025-06-02 13:18:19,718 - root - INFO - Current spot: 24705.25, Selected strike: 24400
2025-06-02 13:18:19,718 - root - DEBUG - Current time in IST: 13:18:19.718861
2025-06-02 13:18:19,718 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:18:19,718 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:18:28,143 - root - DEBUG - Checking market hours...
2025-06-02 13:18:28,144 - root - DEBUG - Market open: True
2025-06-02 13:18:28,144 - root - DEBUG - Fetching current market data...
2025-06-02 13:18:28,144 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:18:28,146 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:18:28,288 - root - INFO - Successfully fetched price for ^NSEI: 24705.599609375
2025-06-02 13:18:28,289 - root - DEBUG - Got spot price: 24705.599609375
2025-06-02 13:18:28,289 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:18:28,289 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:18:28.289652 to 2025-06-02 13:18:28.289652
2025-06-02 13:18:28,292 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:18:28,313 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:18:28,314 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:18:28,319 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:18:28,319 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:18:28,320 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:18:28,320 - root - DEBUG - Getting strike price...
2025-06-02 13:18:28,320 - root - INFO - Current spot: 24705.599609375, Selected strike: 24400
2025-06-02 13:18:28,320 - root - DEBUG - Current time in IST: 13:18:28.320145
2025-06-02 13:18:28,320 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:18:28,320 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:18:51,415 - root - DEBUG - Checking market hours...
2025-06-02 13:18:51,416 - root - DEBUG - Market open: True
2025-06-02 13:18:51,416 - root - DEBUG - Fetching current market data...
2025-06-02 13:18:51,416 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:18:51,417 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:18:51,615 - root - INFO - Successfully fetched price for ^NSEI: 24706.349609375
2025-06-02 13:18:51,615 - root - DEBUG - Got spot price: 24706.349609375
2025-06-02 13:18:51,615 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:18:51,616 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:18:51.615796 to 2025-06-02 13:18:51.615796
2025-06-02 13:18:51,619 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:18:51,632 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:18:51,633 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:18:51,633 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:18:51,633 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:18:51,633 - root - DEBUG - Getting strike price...
2025-06-02 13:18:51,633 - root - INFO - Current spot: 24706.349609375, Selected strike: 24400
2025-06-02 13:18:51,633 - root - DEBUG - Current time in IST: 13:18:51.633794
2025-06-02 13:18:51,633 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:18:51,633 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:19:02,361 - root - DEBUG - Checking market hours...
2025-06-02 13:19:02,361 - root - DEBUG - Market open: True
2025-06-02 13:19:02,362 - root - DEBUG - Fetching current market data...
2025-06-02 13:19:02,362 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:19:02,363 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:19:02,549 - root - INFO - Successfully fetched price for ^NSEI: 24708.94921875
2025-06-02 13:19:02,550 - root - DEBUG - Got spot price: 24708.94921875
2025-06-02 13:19:02,550 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:19:02,550 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:19:02.550090 to 2025-06-02 13:19:02.550090
2025-06-02 13:19:02,555 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:19:02,577 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:19:02,577 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:19:02,577 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:19:02,577 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:19:02,577 - root - DEBUG - Getting strike price...
2025-06-02 13:19:02,577 - root - INFO - Current spot: 24708.94921875, Selected strike: 24400
2025-06-02 13:19:02,577 - root - DEBUG - Current time in IST: 13:19:02.577886
2025-06-02 13:19:02,577 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:19:02,578 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:19:15,637 - root - DEBUG - Checking market hours...
2025-06-02 13:19:15,638 - root - DEBUG - Market open: True
2025-06-02 13:19:15,638 - root - DEBUG - Fetching current market data...
2025-06-02 13:19:15,638 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:19:15,639 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:19:15,822 - root - INFO - Successfully fetched price for ^NSEI: 24709.69921875
2025-06-02 13:19:15,822 - root - DEBUG - Got spot price: 24709.69921875
2025-06-02 13:19:15,822 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:19:15,822 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:19:15.822774 to 2025-06-02 13:19:15.822774
2025-06-02 13:19:15,825 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:19:15,839 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:19:15,840 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:19:15,840 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:19:15,840 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:19:15,840 - root - DEBUG - Getting strike price...
2025-06-02 13:19:15,840 - root - INFO - Current spot: 24709.69921875, Selected strike: 24400
2025-06-02 13:19:15,840 - root - DEBUG - Current time in IST: 13:19:15.840036
2025-06-02 13:19:15,840 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:19:15,841 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:19:19,749 - root - DEBUG - Checking market hours...
2025-06-02 13:19:19,750 - root - DEBUG - Market open: True
2025-06-02 13:19:19,750 - root - DEBUG - Fetching current market data...
2025-06-02 13:19:19,750 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:19:19,752 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:19:19,866 - root - INFO - Successfully fetched price for ^NSEI: 24709.69921875
2025-06-02 13:19:19,866 - root - DEBUG - Got spot price: 24709.69921875
2025-06-02 13:19:19,867 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:19:19,867 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:19:19.867943 to 2025-06-02 13:19:19.867943
2025-06-02 13:19:19,872 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:19:19,897 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:19:19,933 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:19:19,933 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:19:19,933 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:19:19,933 - root - DEBUG - Getting strike price...
2025-06-02 13:19:19,933 - root - INFO - Current spot: 24709.69921875, Selected strike: 24400
2025-06-02 13:19:19,934 - root - DEBUG - Current time in IST: 13:19:19.934230
2025-06-02 13:19:19,934 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:19:19,934 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:19:28,321 - root - DEBUG - Checking market hours...
2025-06-02 13:19:28,322 - root - DEBUG - Market open: True
2025-06-02 13:19:28,322 - root - DEBUG - Fetching current market data...
2025-06-02 13:19:28,322 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:19:28,323 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:19:28,620 - root - INFO - Successfully fetched price for ^NSEI: 24711.0
2025-06-02 13:19:28,620 - root - DEBUG - Got spot price: 24711.0
2025-06-02 13:19:28,620 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:19:28,620 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:19:28.620250 to 2025-06-02 13:19:28.620250
2025-06-02 13:19:28,623 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:19:28,632 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:19:28,633 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:19:28,636 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:19:28,636 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:19:28,636 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:19:28,636 - root - DEBUG - Getting strike price...
2025-06-02 13:19:28,636 - root - INFO - Current spot: 24711.0, Selected strike: 24400
2025-06-02 13:19:28,637 - root - DEBUG - Current time in IST: 13:19:28.637351
2025-06-02 13:19:28,637 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:19:28,637 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:19:51,639 - root - DEBUG - Checking market hours...
2025-06-02 13:19:51,640 - root - DEBUG - Market open: True
2025-06-02 13:19:51,640 - root - DEBUG - Fetching current market data...
2025-06-02 13:19:51,640 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:19:51,641 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:19:51,806 - root - INFO - Successfully fetched price for ^NSEI: 24711.25
2025-06-02 13:19:51,806 - root - DEBUG - Got spot price: 24711.25
2025-06-02 13:19:51,806 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:19:51,806 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:19:51.806166 to 2025-06-02 13:19:51.806166
2025-06-02 13:19:51,809 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:19:51,824 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:19:51,826 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:19:51,826 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:19:51,826 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:19:51,826 - root - DEBUG - Getting strike price...
2025-06-02 13:19:51,826 - root - INFO - Current spot: 24711.25, Selected strike: 24400
2025-06-02 13:19:51,826 - root - DEBUG - Current time in IST: 13:19:51.826827
2025-06-02 13:19:51,827 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:19:51,827 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:20:02,593 - root - DEBUG - Checking market hours...
2025-06-02 13:20:02,593 - root - DEBUG - Market open: True
2025-06-02 13:20:02,594 - root - DEBUG - Fetching current market data...
2025-06-02 13:20:02,594 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:20:02,595 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:20:02,733 - root - INFO - Successfully fetched price for ^NSEI: 24710.44921875
2025-06-02 13:20:02,733 - root - DEBUG - Got spot price: 24710.44921875
2025-06-02 13:20:02,733 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:20:02,733 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:20:02.733689 to 2025-06-02 13:20:02.733689
2025-06-02 13:20:02,736 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:20:02,748 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:20:02,749 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:20:02,749 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:20:02,750 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:20:02,750 - root - DEBUG - Getting strike price...
2025-06-02 13:20:02,750 - root - INFO - Current spot: 24710.44921875, Selected strike: 24400
2025-06-02 13:20:02,750 - root - DEBUG - Current time in IST: 13:20:02.750529
2025-06-02 13:20:02,750 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:20:02,751 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:20:15,844 - root - DEBUG - Checking market hours...
2025-06-02 13:20:15,844 - root - DEBUG - Market open: True
2025-06-02 13:20:15,844 - root - DEBUG - Fetching current market data...
2025-06-02 13:20:15,845 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:20:15,845 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:20:15,979 - root - INFO - Successfully fetched price for ^NSEI: 24711.849609375
2025-06-02 13:20:15,980 - root - DEBUG - Got spot price: 24711.849609375
2025-06-02 13:20:15,980 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:20:15,980 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:20:15.980575 to 2025-06-02 13:20:15.980575
2025-06-02 13:20:15,983 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:20:15,999 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:20:15,999 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:20:15,999 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:20:16,000 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:20:16,000 - root - DEBUG - Getting strike price...
2025-06-02 13:20:16,000 - root - INFO - Current spot: 24711.849609375, Selected strike: 24400
2025-06-02 13:20:16,000 - root - DEBUG - Current time in IST: 13:20:16.000861
2025-06-02 13:20:16,000 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:20:16,000 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:20:19,947 - root - DEBUG - Checking market hours...
2025-06-02 13:20:19,947 - root - DEBUG - Market open: True
2025-06-02 13:20:19,947 - root - DEBUG - Fetching current market data...
2025-06-02 13:20:19,947 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:20:19,948 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:20:20,175 - root - INFO - Successfully fetched price for ^NSEI: 24711.650390625
2025-06-02 13:20:20,175 - root - DEBUG - Got spot price: 24711.650390625
2025-06-02 13:20:20,175 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:20:20,175 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:20:20.175507 to 2025-06-02 13:20:20.175507
2025-06-02 13:20:20,179 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:20:20,201 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:20:20,202 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:20:20,202 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:20:20,203 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:20:20,203 - root - DEBUG - Getting strike price...
2025-06-02 13:20:20,203 - root - INFO - Current spot: 24711.650390625, Selected strike: 24400
2025-06-02 13:20:20,203 - root - DEBUG - Current time in IST: 13:20:20.203621
2025-06-02 13:20:20,203 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:20:20,203 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:20:28,645 - root - DEBUG - Checking market hours...
2025-06-02 13:20:28,645 - root - DEBUG - Market open: True
2025-06-02 13:20:28,645 - root - DEBUG - Fetching current market data...
2025-06-02 13:20:28,645 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:20:28,645 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:20:28,797 - root - INFO - Successfully fetched price for ^NSEI: 24711.349609375
2025-06-02 13:20:28,797 - root - DEBUG - Got spot price: 24711.349609375
2025-06-02 13:20:28,798 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:20:28,798 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:20:28.798428 to 2025-06-02 13:20:28.798428
2025-06-02 13:20:28,801 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:20:28,815 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:20:28,815 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:20:28,820 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:20:28,820 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:20:28,820 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:20:28,820 - root - DEBUG - Getting strike price...
2025-06-02 13:20:28,820 - root - INFO - Current spot: 24711.349609375, Selected strike: 24400
2025-06-02 13:20:28,820 - root - DEBUG - Current time in IST: 13:20:28.820897
2025-06-02 13:20:28,820 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:20:28,821 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:20:51,843 - root - DEBUG - Checking market hours...
2025-06-02 13:20:51,844 - root - DEBUG - Market open: True
2025-06-02 13:20:51,844 - root - DEBUG - Fetching current market data...
2025-06-02 13:20:51,844 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:20:51,845 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:20:52,022 - root - INFO - Successfully fetched price for ^NSEI: 24717.099609375
2025-06-02 13:20:52,022 - root - DEBUG - Got spot price: 24717.099609375
2025-06-02 13:20:52,022 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:20:52,023 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:20:52.023962 to 2025-06-02 13:20:52.023962
2025-06-02 13:20:52,025 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:20:52,044 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:20:52,044 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:20:52,044 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:20:52,045 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:20:52,045 - root - DEBUG - Getting strike price...
2025-06-02 13:20:52,045 - root - INFO - Current spot: 24717.099609375, Selected strike: 24400
2025-06-02 13:20:52,045 - root - DEBUG - Current time in IST: 13:20:52.045292
2025-06-02 13:20:52,045 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:20:52,045 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:21:02,762 - root - DEBUG - Checking market hours...
2025-06-02 13:21:02,763 - root - DEBUG - Market open: True
2025-06-02 13:21:02,763 - root - DEBUG - Fetching current market data...
2025-06-02 13:21:02,763 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:21:02,765 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:21:02,918 - root - INFO - Successfully fetched price for ^NSEI: 24717.5
2025-06-02 13:21:02,919 - root - DEBUG - Got spot price: 24717.5
2025-06-02 13:21:02,919 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:21:02,919 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:21:02.919986 to 2025-06-02 13:21:02.919986
2025-06-02 13:21:02,922 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:21:02,935 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:21:02,936 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:21:02,936 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:21:02,936 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:21:02,936 - root - DEBUG - Getting strike price...
2025-06-02 13:21:02,936 - root - INFO - Current spot: 24717.5, Selected strike: 24400
2025-06-02 13:21:02,936 - root - DEBUG - Current time in IST: 13:21:02.936357
2025-06-02 13:21:02,937 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:21:02,937 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:21:16,011 - root - DEBUG - Checking market hours...
2025-06-02 13:21:16,011 - root - DEBUG - Market open: True
2025-06-02 13:21:16,012 - root - DEBUG - Fetching current market data...
2025-06-02 13:21:16,014 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:21:16,016 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:21:16,297 - root - INFO - Successfully fetched price for ^NSEI: 24708.19921875
2025-06-02 13:21:16,297 - root - DEBUG - Got spot price: 24708.19921875
2025-06-02 13:21:16,297 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:21:16,298 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:21:16.297691 to 2025-06-02 13:21:16.297691
2025-06-02 13:21:16,300 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:21:16,322 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:21:16,322 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:21:16,322 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:21:16,322 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:21:16,322 - root - DEBUG - Getting strike price...
2025-06-02 13:21:16,322 - root - INFO - Current spot: 24708.19921875, Selected strike: 24400
2025-06-02 13:21:16,322 - root - DEBUG - Current time in IST: 13:21:16.322956
2025-06-02 13:21:16,322 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:21:16,323 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:21:20,210 - root - DEBUG - Checking market hours...
2025-06-02 13:21:20,211 - root - DEBUG - Market open: True
2025-06-02 13:21:20,211 - root - DEBUG - Fetching current market data...
2025-06-02 13:21:20,211 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:21:20,213 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:21:20,377 - root - INFO - Successfully fetched price for ^NSEI: 24706.75
2025-06-02 13:21:20,377 - root - DEBUG - Got spot price: 24706.75
2025-06-02 13:21:20,377 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:21:20,377 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:21:20.377466 to 2025-06-02 13:21:20.377466
2025-06-02 13:21:20,381 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:21:20,395 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:21:20,396 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:21:20,396 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:21:20,396 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:21:20,396 - root - DEBUG - Getting strike price...
2025-06-02 13:21:20,397 - root - INFO - Current spot: 24706.75, Selected strike: 24400
2025-06-02 13:21:20,397 - root - DEBUG - Current time in IST: 13:21:20.397899
2025-06-02 13:21:20,397 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:21:20,397 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:21:28,825 - root - DEBUG - Checking market hours...
2025-06-02 13:21:28,826 - root - DEBUG - Market open: True
2025-06-02 13:21:28,826 - root - DEBUG - Fetching current market data...
2025-06-02 13:21:28,826 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:21:28,826 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:21:28,965 - root - INFO - Successfully fetched price for ^NSEI: 24706.849609375
2025-06-02 13:21:28,966 - root - DEBUG - Got spot price: 24706.849609375
2025-06-02 13:21:28,966 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:21:28,966 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:21:28.966528 to 2025-06-02 13:21:28.966528
2025-06-02 13:21:28,970 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:21:28,981 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:21:28,981 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:21:28,986 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:21:28,986 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:21:28,986 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:21:28,986 - root - DEBUG - Getting strike price...
2025-06-02 13:21:28,987 - root - INFO - Current spot: 24706.849609375, Selected strike: 24400
2025-06-02 13:21:28,987 - root - DEBUG - Current time in IST: 13:21:28.987640
2025-06-02 13:21:28,987 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:21:28,987 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:21:52,051 - root - DEBUG - Checking market hours...
2025-06-02 13:21:52,052 - root - DEBUG - Market open: True
2025-06-02 13:21:52,052 - root - DEBUG - Fetching current market data...
2025-06-02 13:21:52,052 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:21:52,053 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:21:52,221 - root - INFO - Successfully fetched price for ^NSEI: 24710.0
2025-06-02 13:21:52,221 - root - DEBUG - Got spot price: 24710.0
2025-06-02 13:21:52,221 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:21:52,221 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:21:52.221551 to 2025-06-02 13:21:52.221551
2025-06-02 13:21:52,225 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:21:52,238 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:21:52,239 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:21:52,239 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:21:52,239 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:21:52,239 - root - DEBUG - Getting strike price...
2025-06-02 13:21:52,239 - root - INFO - Current spot: 24710.0, Selected strike: 24400
2025-06-02 13:21:52,239 - root - DEBUG - Current time in IST: 13:21:52.239352
2025-06-02 13:21:52,240 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:21:52,240 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:22:02,945 - root - DEBUG - Checking market hours...
2025-06-02 13:22:02,946 - root - DEBUG - Market open: True
2025-06-02 13:22:02,946 - root - DEBUG - Fetching current market data...
2025-06-02 13:22:02,946 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:22:02,950 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:22:03,154 - root - INFO - Successfully fetched price for ^NSEI: 24710.94921875
2025-06-02 13:22:03,154 - root - DEBUG - Got spot price: 24710.94921875
2025-06-02 13:22:03,154 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:22:03,155 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:22:03.154046 to 2025-06-02 13:22:03.154046
2025-06-02 13:22:03,157 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:22:03,179 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:22:03,182 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:22:03,182 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:22:03,182 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:22:03,183 - root - DEBUG - Getting strike price...
2025-06-02 13:22:03,183 - root - INFO - Current spot: 24710.94921875, Selected strike: 24400
2025-06-02 13:22:03,183 - root - DEBUG - Current time in IST: 13:22:03.183139
2025-06-02 13:22:03,183 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:22:03,183 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:22:16,336 - root - DEBUG - Checking market hours...
2025-06-02 13:22:16,336 - root - DEBUG - Market open: True
2025-06-02 13:22:16,336 - root - DEBUG - Fetching current market data...
2025-06-02 13:22:16,337 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:22:16,337 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:22:16,853 - root - INFO - Successfully fetched price for ^NSEI: 24712.5
2025-06-02 13:22:16,853 - root - DEBUG - Got spot price: 24712.5
2025-06-02 13:22:16,853 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:22:16,854 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:22:16.853784 to 2025-06-02 13:22:16.853784
2025-06-02 13:22:16,856 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:22:16,880 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:22:16,881 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:22:16,881 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:22:16,881 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:22:16,881 - root - DEBUG - Getting strike price...
2025-06-02 13:22:16,883 - root - INFO - Current spot: 24712.5, Selected strike: 24400
2025-06-02 13:22:16,883 - root - DEBUG - Current time in IST: 13:22:16.883023
2025-06-02 13:22:16,883 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:22:16,884 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:22:20,402 - root - DEBUG - Checking market hours...
2025-06-02 13:22:20,403 - root - DEBUG - Market open: True
2025-06-02 13:22:20,403 - root - DEBUG - Fetching current market data...
2025-06-02 13:22:20,403 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:22:20,404 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:22:20,668 - root - INFO - Successfully fetched price for ^NSEI: 24712.0
2025-06-02 13:22:20,669 - root - DEBUG - Got spot price: 24712.0
2025-06-02 13:22:20,669 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:22:20,669 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:22:20.669578 to 2025-06-02 13:22:20.669578
2025-06-02 13:22:20,677 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:22:20,699 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:22:20,700 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:22:20,700 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:22:20,700 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:22:20,700 - root - DEBUG - Getting strike price...
2025-06-02 13:22:20,701 - root - INFO - Current spot: 24712.0, Selected strike: 24400
2025-06-02 13:22:20,701 - root - DEBUG - Current time in IST: 13:22:20.701672
2025-06-02 13:22:20,701 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:22:20,701 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:22:28,998 - root - DEBUG - Checking market hours...
2025-06-02 13:22:28,999 - root - DEBUG - Market open: True
2025-06-02 13:22:28,999 - root - DEBUG - Fetching current market data...
2025-06-02 13:22:28,999 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:22:29,000 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:22:29,184 - root - INFO - Successfully fetched price for ^NSEI: 24711.5
2025-06-02 13:22:29,185 - root - DEBUG - Got spot price: 24711.5
2025-06-02 13:22:29,185 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:22:29,185 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:22:29.185341 to 2025-06-02 13:22:29.185341
2025-06-02 13:22:29,189 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:22:29,200 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:22:29,200 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:22:29,202 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:22:29,202 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:22:29,202 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:22:29,202 - root - DEBUG - Getting strike price...
2025-06-02 13:22:29,202 - root - INFO - Current spot: 24711.5, Selected strike: 24400
2025-06-02 13:22:29,202 - root - DEBUG - Current time in IST: 13:22:29.202503
2025-06-02 13:22:29,202 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:22:29,202 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:22:52,253 - root - DEBUG - Checking market hours...
2025-06-02 13:22:52,253 - root - DEBUG - Market open: True
2025-06-02 13:22:52,253 - root - DEBUG - Fetching current market data...
2025-06-02 13:22:52,253 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:22:52,255 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:22:52,440 - root - INFO - Successfully fetched price for ^NSEI: 24715.5
2025-06-02 13:22:52,440 - root - DEBUG - Got spot price: 24715.5
2025-06-02 13:22:52,440 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:22:52,441 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:22:52.440219 to 2025-06-02 13:22:52.440219
2025-06-02 13:22:52,443 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:22:52,457 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:22:52,458 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:22:52,458 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:22:52,459 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:22:52,459 - root - DEBUG - Getting strike price...
2025-06-02 13:22:52,459 - root - INFO - Current spot: 24715.5, Selected strike: 24400
2025-06-02 13:22:52,459 - root - DEBUG - Current time in IST: 13:22:52.459348
2025-06-02 13:22:52,459 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:22:52,460 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:23:03,198 - root - DEBUG - Checking market hours...
2025-06-02 13:23:03,198 - root - DEBUG - Market open: True
2025-06-02 13:23:03,199 - root - DEBUG - Fetching current market data...
2025-06-02 13:23:03,199 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:23:03,200 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:23:03,387 - root - INFO - Successfully fetched price for ^NSEI: 24716.30078125
2025-06-02 13:23:03,387 - root - DEBUG - Got spot price: 24716.30078125
2025-06-02 13:23:03,387 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:23:03,388 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:23:03.387770 to 2025-06-02 13:23:03.387770
2025-06-02 13:23:03,390 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:23:03,401 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:23:03,401 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:23:03,401 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:23:03,402 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:23:03,402 - root - DEBUG - Getting strike price...
2025-06-02 13:23:03,402 - root - INFO - Current spot: 24716.30078125, Selected strike: 24400
2025-06-02 13:23:03,402 - root - DEBUG - Current time in IST: 13:23:03.402703
2025-06-02 13:23:03,402 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:23:03,402 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:23:16,897 - root - DEBUG - Checking market hours...
2025-06-02 13:23:16,898 - root - DEBUG - Market open: True
2025-06-02 13:23:16,898 - root - DEBUG - Fetching current market data...
2025-06-02 13:23:16,898 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:23:16,899 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:23:17,106 - root - INFO - Successfully fetched price for ^NSEI: 24718.150390625
2025-06-02 13:23:17,124 - root - DEBUG - Got spot price: 24718.150390625
2025-06-02 13:23:17,124 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:23:17,125 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:23:17.125610 to 2025-06-02 13:23:17.125610
2025-06-02 13:23:17,129 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:23:17,145 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:23:17,147 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:23:17,147 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:23:17,147 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:23:17,147 - root - DEBUG - Getting strike price...
2025-06-02 13:23:17,147 - root - INFO - Current spot: 24718.150390625, Selected strike: 24400
2025-06-02 13:23:17,147 - root - DEBUG - Current time in IST: 13:23:17.147619
2025-06-02 13:23:17,147 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:23:17,147 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:23:20,713 - root - DEBUG - Checking market hours...
2025-06-02 13:23:20,713 - root - DEBUG - Market open: True
2025-06-02 13:23:20,714 - root - DEBUG - Fetching current market data...
2025-06-02 13:23:20,715 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:23:20,718 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:23:20,926 - root - INFO - Successfully fetched price for ^NSEI: 24717.55078125
2025-06-02 13:23:20,927 - root - DEBUG - Got spot price: 24717.55078125
2025-06-02 13:23:20,927 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:23:20,928 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:23:20.927184 to 2025-06-02 13:23:20.927184
2025-06-02 13:23:20,931 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:23:20,948 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:23:20,948 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:23:20,948 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:23:20,948 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:23:20,948 - root - DEBUG - Getting strike price...
2025-06-02 13:23:20,949 - root - INFO - Current spot: 24717.55078125, Selected strike: 24400
2025-06-02 13:23:20,949 - root - DEBUG - Current time in IST: 13:23:20.949359
2025-06-02 13:23:20,949 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:23:20,949 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:23:29,212 - root - DEBUG - Checking market hours...
2025-06-02 13:23:29,213 - root - DEBUG - Market open: True
2025-06-02 13:23:29,213 - root - DEBUG - Fetching current market data...
2025-06-02 13:23:29,213 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:23:29,215 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:23:29,327 - root - INFO - Successfully fetched price for ^NSEI: 24717.55078125
2025-06-02 13:23:29,327 - root - DEBUG - Got spot price: 24717.55078125
2025-06-02 13:23:29,327 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:23:29,328 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:23:29.328105 to 2025-06-02 13:23:29.328105
2025-06-02 13:23:29,332 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:23:29,350 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:23:29,350 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:23:29,358 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:23:29,359 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:23:29,359 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:23:29,360 - root - DEBUG - Getting strike price...
2025-06-02 13:23:29,360 - root - INFO - Current spot: 24717.55078125, Selected strike: 24400
2025-06-02 13:23:29,360 - root - DEBUG - Current time in IST: 13:23:29.360526
2025-06-02 13:23:29,360 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:23:29,361 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:23:52,468 - root - DEBUG - Checking market hours...
2025-06-02 13:23:52,469 - root - DEBUG - Market open: True
2025-06-02 13:23:52,469 - root - DEBUG - Fetching current market data...
2025-06-02 13:23:52,469 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:23:52,470 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:23:52,642 - root - INFO - Successfully fetched price for ^NSEI: 24717.599609375
2025-06-02 13:23:52,643 - root - DEBUG - Got spot price: 24717.599609375
2025-06-02 13:23:52,643 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:23:52,643 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:23:52.643615 to 2025-06-02 13:23:52.643615
2025-06-02 13:23:52,646 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:23:52,671 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:23:52,671 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:23:52,671 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:23:52,671 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:23:52,671 - root - DEBUG - Getting strike price...
2025-06-02 13:23:52,671 - root - INFO - Current spot: 24717.599609375, Selected strike: 24400
2025-06-02 13:23:52,671 - root - DEBUG - Current time in IST: 13:23:52.671765
2025-06-02 13:23:52,671 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:23:52,671 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:24:03,411 - root - DEBUG - Checking market hours...
2025-06-02 13:24:03,412 - root - DEBUG - Market open: True
2025-06-02 13:24:03,412 - root - DEBUG - Fetching current market data...
2025-06-02 13:24:03,412 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:24:03,417 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:24:03,633 - root - INFO - Successfully fetched price for ^NSEI: 24718.0
2025-06-02 13:24:03,633 - root - DEBUG - Got spot price: 24718.0
2025-06-02 13:24:03,633 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:24:03,633 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:24:03.633352 to 2025-06-02 13:24:03.633352
2025-06-02 13:24:03,636 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:24:03,659 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:24:03,660 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:24:03,661 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:24:03,661 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:24:03,661 - root - DEBUG - Getting strike price...
2025-06-02 13:24:03,661 - root - INFO - Current spot: 24718.0, Selected strike: 24400
2025-06-02 13:24:03,662 - root - DEBUG - Current time in IST: 13:24:03.662866
2025-06-02 13:24:03,662 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:24:03,662 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:24:17,149 - root - DEBUG - Checking market hours...
2025-06-02 13:24:17,150 - root - DEBUG - Market open: True
2025-06-02 13:24:17,150 - root - DEBUG - Fetching current market data...
2025-06-02 13:24:17,150 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:24:17,151 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:24:17,423 - root - INFO - Successfully fetched price for ^NSEI: 24718.94921875
2025-06-02 13:24:17,425 - root - DEBUG - Got spot price: 24718.94921875
2025-06-02 13:24:17,425 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:24:17,426 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:24:17.425201 to 2025-06-02 13:24:17.425201
2025-06-02 13:24:17,430 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:24:17,445 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:24:17,445 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:24:17,445 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:24:17,445 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:24:17,445 - root - DEBUG - Getting strike price...
2025-06-02 13:24:17,446 - root - INFO - Current spot: 24718.94921875, Selected strike: 24400
2025-06-02 13:24:17,446 - root - DEBUG - Current time in IST: 13:24:17.446752
2025-06-02 13:24:17,446 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:24:17,446 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:24:20,967 - root - DEBUG - Checking market hours...
2025-06-02 13:24:20,970 - root - DEBUG - Market open: True
2025-06-02 13:24:20,970 - root - DEBUG - Fetching current market data...
2025-06-02 13:24:20,970 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:24:20,971 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:24:21,139 - root - INFO - Successfully fetched price for ^NSEI: 24717.80078125
2025-06-02 13:24:21,139 - root - DEBUG - Got spot price: 24717.80078125
2025-06-02 13:24:21,139 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:24:21,140 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:24:21.139606 to 2025-06-02 13:24:21.139606
2025-06-02 13:24:21,142 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:24:21,167 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:24:21,190 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:24:21,190 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:24:21,191 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:24:21,191 - root - DEBUG - Getting strike price...
2025-06-02 13:24:21,191 - root - INFO - Current spot: 24717.80078125, Selected strike: 24400
2025-06-02 13:24:21,191 - root - DEBUG - Current time in IST: 13:24:21.191768
2025-06-02 13:24:21,191 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:24:21,192 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:24:29,363 - root - DEBUG - Checking market hours...
2025-06-02 13:24:29,364 - root - DEBUG - Market open: True
2025-06-02 13:24:29,364 - root - DEBUG - Fetching current market data...
2025-06-02 13:24:29,364 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:24:29,365 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:24:29,469 - root - INFO - Successfully fetched price for ^NSEI: 24717.80078125
2025-06-02 13:24:29,470 - root - DEBUG - Got spot price: 24717.80078125
2025-06-02 13:24:29,471 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:24:29,471 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:24:29.471473 to 2025-06-02 13:24:29.471473
2025-06-02 13:24:29,476 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:24:29,487 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:24:29,488 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:24:29,496 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:24:29,496 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:24:29,496 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:24:29,499 - root - DEBUG - Getting strike price...
2025-06-02 13:24:29,503 - root - INFO - Current spot: 24717.80078125, Selected strike: 24400
2025-06-02 13:24:29,504 - root - DEBUG - Current time in IST: 13:24:29.504220
2025-06-02 13:24:29,504 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:24:29,504 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:24:52,681 - root - DEBUG - Checking market hours...
2025-06-02 13:24:52,681 - root - DEBUG - Market open: True
2025-06-02 13:24:52,681 - root - DEBUG - Fetching current market data...
2025-06-02 13:24:52,682 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:24:52,683 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:24:52,845 - root - INFO - Successfully fetched price for ^NSEI: 24718.75
2025-06-02 13:24:52,845 - root - DEBUG - Got spot price: 24718.75
2025-06-02 13:24:52,845 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:24:52,845 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:24:52.845087 to 2025-06-02 13:24:52.845087
2025-06-02 13:24:52,847 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:24:52,866 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:24:52,867 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:24:52,867 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:24:52,867 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:24:52,867 - root - DEBUG - Getting strike price...
2025-06-02 13:24:52,867 - root - INFO - Current spot: 24718.75, Selected strike: 24400
2025-06-02 13:24:52,867 - root - DEBUG - Current time in IST: 13:24:52.867991
2025-06-02 13:24:52,867 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:24:52,867 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:25:03,667 - root - DEBUG - Checking market hours...
2025-06-02 13:25:03,667 - root - DEBUG - Market open: True
2025-06-02 13:25:03,668 - root - DEBUG - Fetching current market data...
2025-06-02 13:25:03,668 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:25:03,668 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:25:03,845 - root - INFO - Successfully fetched price for ^NSEI: 24718.75
2025-06-02 13:25:03,846 - root - DEBUG - Got spot price: 24718.75
2025-06-02 13:25:03,846 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:25:03,846 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:25:03.846545 to 2025-06-02 13:25:03.846545
2025-06-02 13:25:03,850 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:25:03,867 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:25:03,868 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:25:03,868 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:25:03,868 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:25:03,868 - root - DEBUG - Getting strike price...
2025-06-02 13:25:03,869 - root - INFO - Current spot: 24718.75, Selected strike: 24400
2025-06-02 13:25:03,869 - root - DEBUG - Current time in IST: 13:25:03.869081
2025-06-02 13:25:03,869 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:25:03,869 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:25:17,458 - root - DEBUG - Checking market hours...
2025-06-02 13:25:17,459 - root - DEBUG - Market open: True
2025-06-02 13:25:17,459 - root - DEBUG - Fetching current market data...
2025-06-02 13:25:17,459 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:25:17,460 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:25:17,775 - root - INFO - Successfully fetched price for ^NSEI: 24719.099609375
2025-06-02 13:25:17,775 - root - DEBUG - Got spot price: 24719.099609375
2025-06-02 13:25:17,775 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:25:17,776 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:25:17.775737 to 2025-06-02 13:25:17.775737
2025-06-02 13:25:17,779 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:25:17,796 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:25:17,797 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:25:17,797 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:25:17,797 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:25:17,797 - root - DEBUG - Getting strike price...
2025-06-02 13:25:17,798 - root - INFO - Current spot: 24719.099609375, Selected strike: 24400
2025-06-02 13:25:17,798 - root - DEBUG - Current time in IST: 13:25:17.798297
2025-06-02 13:25:17,798 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:25:17,798 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:25:21,208 - root - DEBUG - Checking market hours...
2025-06-02 13:25:21,209 - root - DEBUG - Market open: True
2025-06-02 13:25:21,209 - root - DEBUG - Fetching current market data...
2025-06-02 13:25:21,209 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:25:21,211 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:25:21,408 - root - INFO - Successfully fetched price for ^NSEI: 24718.80078125
2025-06-02 13:25:21,409 - root - DEBUG - Got spot price: 24718.80078125
2025-06-02 13:25:21,409 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:25:21,409 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:25:21.409336 to 2025-06-02 13:25:21.409336
2025-06-02 13:25:21,413 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:25:21,425 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:25:21,426 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:25:21,426 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:25:21,426 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:25:21,426 - root - DEBUG - Getting strike price...
2025-06-02 13:25:21,426 - root - INFO - Current spot: 24718.80078125, Selected strike: 24400
2025-06-02 13:25:21,427 - root - DEBUG - Current time in IST: 13:25:21.427183
2025-06-02 13:25:21,427 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:25:21,427 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:25:29,511 - root - DEBUG - Checking market hours...
2025-06-02 13:25:29,511 - root - DEBUG - Market open: True
2025-06-02 13:25:29,511 - root - DEBUG - Fetching current market data...
2025-06-02 13:25:29,511 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:25:29,512 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:25:29,658 - root - INFO - Successfully fetched price for ^NSEI: 24718.80078125
2025-06-02 13:25:29,659 - root - DEBUG - Got spot price: 24718.80078125
2025-06-02 13:25:29,659 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:25:29,659 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:25:29.659983 to 2025-06-02 13:25:29.659983
2025-06-02 13:25:29,663 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:25:29,682 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:25:29,683 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:25:29,685 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:25:29,685 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:25:29,685 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:25:29,685 - root - DEBUG - Getting strike price...
2025-06-02 13:25:29,686 - root - INFO - Current spot: 24718.80078125, Selected strike: 24400
2025-06-02 13:25:29,686 - root - DEBUG - Current time in IST: 13:25:29.686792
2025-06-02 13:25:29,686 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:25:29,687 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:25:52,877 - root - DEBUG - Checking market hours...
2025-06-02 13:25:52,877 - root - DEBUG - Market open: True
2025-06-02 13:25:52,877 - root - DEBUG - Fetching current market data...
2025-06-02 13:25:52,877 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:25:52,878 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:25:53,025 - root - INFO - Successfully fetched price for ^NSEI: 24718.0
2025-06-02 13:25:53,025 - root - DEBUG - Got spot price: 24718.0
2025-06-02 13:25:53,025 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:25:53,025 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:25:53.025345 to 2025-06-02 13:25:53.025345
2025-06-02 13:25:53,029 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:25:53,048 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:25:53,049 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:25:53,049 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:25:53,049 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:25:53,050 - root - DEBUG - Getting strike price...
2025-06-02 13:25:53,050 - root - INFO - Current spot: 24718.0, Selected strike: 24400
2025-06-02 13:25:53,050 - root - DEBUG - Current time in IST: 13:25:53.050346
2025-06-02 13:25:53,050 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:25:53,050 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:26:03,878 - root - DEBUG - Checking market hours...
2025-06-02 13:26:03,878 - root - DEBUG - Market open: True
2025-06-02 13:26:03,878 - root - DEBUG - Fetching current market data...
2025-06-02 13:26:03,879 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:26:03,882 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:26:04,023 - root - INFO - Successfully fetched price for ^NSEI: 24717.30078125
2025-06-02 13:26:04,023 - root - DEBUG - Got spot price: 24717.30078125
2025-06-02 13:26:04,023 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:26:04,024 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:26:04.023387 to 2025-06-02 13:26:04.023387
2025-06-02 13:26:04,027 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:26:04,048 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:26:04,049 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:26:04,049 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:26:04,049 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:26:04,049 - root - DEBUG - Getting strike price...
2025-06-02 13:26:04,049 - root - INFO - Current spot: 24717.30078125, Selected strike: 24400
2025-06-02 13:26:04,050 - root - DEBUG - Current time in IST: 13:26:04.050284
2025-06-02 13:26:04,050 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:26:04,050 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:26:17,813 - root - DEBUG - Checking market hours...
2025-06-02 13:26:17,813 - root - DEBUG - Market open: True
2025-06-02 13:26:17,813 - root - DEBUG - Fetching current market data...
2025-06-02 13:26:17,813 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:26:17,815 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:26:17,966 - root - INFO - Successfully fetched price for ^NSEI: 24717.44921875
2025-06-02 13:26:17,967 - root - DEBUG - Got spot price: 24717.44921875
2025-06-02 13:26:17,967 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:26:17,967 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:26:17.967952 to 2025-06-02 13:26:17.967952
2025-06-02 13:26:17,971 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:26:17,984 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:26:17,985 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:26:17,985 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:26:17,985 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:26:17,985 - root - DEBUG - Getting strike price...
2025-06-02 13:26:17,985 - root - INFO - Current spot: 24717.44921875, Selected strike: 24400
2025-06-02 13:26:17,985 - root - DEBUG - Current time in IST: 13:26:17.985786
2025-06-02 13:26:17,986 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:26:17,986 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:26:21,431 - root - DEBUG - Checking market hours...
2025-06-02 13:26:21,432 - root - DEBUG - Market open: True
2025-06-02 13:26:21,432 - root - DEBUG - Fetching current market data...
2025-06-02 13:26:21,432 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:26:21,433 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:26:21,567 - root - INFO - Successfully fetched price for ^NSEI: 24716.80078125
2025-06-02 13:26:21,567 - root - DEBUG - Got spot price: 24716.80078125
2025-06-02 13:26:21,568 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:26:21,568 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:26:21.568963 to 2025-06-02 13:26:21.568963
2025-06-02 13:26:21,571 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:26:21,586 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:26:21,591 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:26:21,591 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:26:21,591 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:26:21,591 - root - DEBUG - Getting strike price...
2025-06-02 13:26:21,591 - root - INFO - Current spot: 24716.80078125, Selected strike: 24400
2025-06-02 13:26:21,591 - root - DEBUG - Current time in IST: 13:26:21.591866
2025-06-02 13:26:21,591 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:26:21,591 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:26:29,693 - root - DEBUG - Checking market hours...
2025-06-02 13:26:29,693 - root - DEBUG - Market open: True
2025-06-02 13:26:29,694 - root - DEBUG - Fetching current market data...
2025-06-02 13:26:29,694 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:26:29,695 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:26:29,860 - root - INFO - Successfully fetched price for ^NSEI: 24716.80078125
2025-06-02 13:26:29,860 - root - DEBUG - Got spot price: 24716.80078125
2025-06-02 13:26:29,860 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:26:29,861 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:26:29.861915 to 2025-06-02 13:26:29.861915
2025-06-02 13:26:29,866 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:26:29,877 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:26:29,877 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:26:29,880 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:26:29,880 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:26:29,880 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:26:29,880 - root - DEBUG - Getting strike price...
2025-06-02 13:26:29,880 - root - INFO - Current spot: 24716.80078125, Selected strike: 24400
2025-06-02 13:26:29,881 - root - DEBUG - Current time in IST: 13:26:29.881474
2025-06-02 13:26:29,881 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:26:29,881 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:26:53,052 - root - DEBUG - Checking market hours...
2025-06-02 13:26:53,052 - root - DEBUG - Market open: True
2025-06-02 13:26:53,052 - root - DEBUG - Fetching current market data...
2025-06-02 13:26:53,052 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:26:53,053 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:26:53,361 - root - INFO - Successfully fetched price for ^NSEI: 24715.650390625
2025-06-02 13:26:53,361 - root - DEBUG - Got spot price: 24715.650390625
2025-06-02 13:26:53,361 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:26:53,361 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:26:53.361527 to 2025-06-02 13:26:53.361527
2025-06-02 13:26:53,365 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:26:53,377 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:26:53,378 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:26:53,378 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:26:53,378 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:26:53,378 - root - DEBUG - Getting strike price...
2025-06-02 13:26:53,378 - root - INFO - Current spot: 24715.650390625, Selected strike: 24400
2025-06-02 13:26:53,378 - root - DEBUG - Current time in IST: 13:26:53.378975
2025-06-02 13:26:53,378 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:26:53,378 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:27:04,054 - root - DEBUG - Checking market hours...
2025-06-02 13:27:04,054 - root - DEBUG - Market open: True
2025-06-02 13:27:04,055 - root - DEBUG - Fetching current market data...
2025-06-02 13:27:04,055 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:27:04,055 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:27:04,250 - root - INFO - Successfully fetched price for ^NSEI: 24715.5
2025-06-02 13:27:04,251 - root - DEBUG - Got spot price: 24715.5
2025-06-02 13:27:04,251 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:27:04,251 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:27:04.251620 to 2025-06-02 13:27:04.251620
2025-06-02 13:27:04,255 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:27:04,271 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:27:04,272 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:27:04,272 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:27:04,272 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:27:04,272 - root - DEBUG - Getting strike price...
2025-06-02 13:27:04,272 - root - INFO - Current spot: 24715.5, Selected strike: 24400
2025-06-02 13:27:04,272 - root - DEBUG - Current time in IST: 13:27:04.272149
2025-06-02 13:27:04,272 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:27:04,272 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:27:17,992 - root - DEBUG - Checking market hours...
2025-06-02 13:27:17,992 - root - DEBUG - Market open: True
2025-06-02 13:27:17,992 - root - DEBUG - Fetching current market data...
2025-06-02 13:27:17,993 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:27:17,994 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:27:18,144 - root - INFO - Successfully fetched price for ^NSEI: 24712.650390625
2025-06-02 13:27:18,144 - root - DEBUG - Got spot price: 24712.650390625
2025-06-02 13:27:18,144 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:27:18,144 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:27:18.144490 to 2025-06-02 13:27:18.144490
2025-06-02 13:27:18,148 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:27:18,163 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:27:18,165 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:27:18,165 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:27:18,165 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:27:18,165 - root - DEBUG - Getting strike price...
2025-06-02 13:27:18,166 - root - INFO - Current spot: 24712.650390625, Selected strike: 24400
2025-06-02 13:27:18,166 - root - DEBUG - Current time in IST: 13:27:18.166532
2025-06-02 13:27:18,166 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:27:18,167 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:27:21,603 - root - DEBUG - Checking market hours...
2025-06-02 13:27:21,604 - root - DEBUG - Market open: True
2025-06-02 13:27:21,604 - root - DEBUG - Fetching current market data...
2025-06-02 13:27:21,604 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:27:21,605 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:27:21,856 - root - INFO - Successfully fetched price for ^NSEI: 24713.69921875
2025-06-02 13:27:21,856 - root - DEBUG - Got spot price: 24713.69921875
2025-06-02 13:27:21,856 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:27:21,857 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:27:21.857302 to 2025-06-02 13:27:21.857302
2025-06-02 13:27:21,861 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:27:21,883 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:27:21,883 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:27:21,884 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:27:21,884 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:27:21,884 - root - DEBUG - Getting strike price...
2025-06-02 13:27:21,884 - root - INFO - Current spot: 24713.69921875, Selected strike: 24400
2025-06-02 13:27:21,884 - root - DEBUG - Current time in IST: 13:27:21.884170
2025-06-02 13:27:21,884 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:27:21,885 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:27:29,887 - root - DEBUG - Checking market hours...
2025-06-02 13:27:29,887 - root - DEBUG - Market open: True
2025-06-02 13:27:29,887 - root - DEBUG - Fetching current market data...
2025-06-02 13:27:29,887 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:27:29,888 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:27:30,080 - root - INFO - Successfully fetched price for ^NSEI: 24711.44921875
2025-06-02 13:27:30,081 - root - DEBUG - Got spot price: 24711.44921875
2025-06-02 13:27:30,081 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:27:30,082 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:27:30.081727 to 2025-06-02 13:27:30.081727
2025-06-02 13:27:30,086 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:27:30,099 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:27:30,099 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:27:30,108 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:27:30,108 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:27:30,109 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:27:30,109 - root - DEBUG - Getting strike price...
2025-06-02 13:27:30,109 - root - INFO - Current spot: 24711.44921875, Selected strike: 24400
2025-06-02 13:27:30,109 - root - DEBUG - Current time in IST: 13:27:30.109243
2025-06-02 13:27:30,109 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:27:30,110 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:27:53,394 - root - DEBUG - Checking market hours...
2025-06-02 13:27:53,394 - root - DEBUG - Market open: True
2025-06-02 13:27:53,394 - root - DEBUG - Fetching current market data...
2025-06-02 13:27:53,394 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:27:53,396 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:27:53,749 - root - INFO - Successfully fetched price for ^NSEI: 24713.900390625
2025-06-02 13:27:53,749 - root - DEBUG - Got spot price: 24713.900390625
2025-06-02 13:27:53,749 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:27:53,749 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:27:53.749003 to 2025-06-02 13:27:53.749003
2025-06-02 13:27:53,753 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:27:53,767 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:27:53,769 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:27:53,769 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:27:53,769 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:27:53,769 - root - DEBUG - Getting strike price...
2025-06-02 13:27:53,769 - root - INFO - Current spot: 24713.900390625, Selected strike: 24400
2025-06-02 13:27:53,769 - root - DEBUG - Current time in IST: 13:27:53.769637
2025-06-02 13:27:53,769 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:27:53,770 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:28:04,283 - root - DEBUG - Checking market hours...
2025-06-02 13:28:04,283 - root - DEBUG - Market open: True
2025-06-02 13:28:04,284 - root - DEBUG - Fetching current market data...
2025-06-02 13:28:04,284 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:28:04,284 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:28:04,447 - root - INFO - Successfully fetched price for ^NSEI: 24713.75
2025-06-02 13:28:04,447 - root - DEBUG - Got spot price: 24713.75
2025-06-02 13:28:04,447 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:28:04,448 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:28:04.447462 to 2025-06-02 13:28:04.447462
2025-06-02 13:28:04,452 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:28:04,470 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:28:04,471 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:28:04,472 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:28:04,472 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:28:04,472 - root - DEBUG - Getting strike price...
2025-06-02 13:28:04,472 - root - INFO - Current spot: 24713.75, Selected strike: 24400
2025-06-02 13:28:04,472 - root - DEBUG - Current time in IST: 13:28:04.472080
2025-06-02 13:28:04,472 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:28:04,473 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:28:18,180 - root - DEBUG - Checking market hours...
2025-06-02 13:28:18,181 - root - DEBUG - Market open: True
2025-06-02 13:28:18,181 - root - DEBUG - Fetching current market data...
2025-06-02 13:28:18,181 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:28:18,182 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:28:18,341 - root - INFO - Successfully fetched price for ^NSEI: 24713.849609375
2025-06-02 13:28:18,341 - root - DEBUG - Got spot price: 24713.849609375
2025-06-02 13:28:18,341 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:28:18,341 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:28:18.341401 to 2025-06-02 13:28:18.341401
2025-06-02 13:28:18,344 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:28:18,367 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:28:18,369 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:28:18,369 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:28:18,369 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:28:18,369 - root - DEBUG - Getting strike price...
2025-06-02 13:28:18,369 - root - INFO - Current spot: 24713.849609375, Selected strike: 24400
2025-06-02 13:28:18,369 - root - DEBUG - Current time in IST: 13:28:18.369951
2025-06-02 13:28:18,369 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:28:18,370 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:28:21,892 - root - DEBUG - Checking market hours...
2025-06-02 13:28:21,892 - root - DEBUG - Market open: True
2025-06-02 13:28:21,892 - root - DEBUG - Fetching current market data...
2025-06-02 13:28:21,892 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:28:21,893 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:28:22,031 - root - INFO - Successfully fetched price for ^NSEI: 24712.900390625
2025-06-02 13:28:22,032 - root - DEBUG - Got spot price: 24712.900390625
2025-06-02 13:28:22,032 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:28:22,032 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:28:22.032098 to 2025-06-02 13:28:22.032098
2025-06-02 13:28:22,034 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:28:22,048 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:28:22,049 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:28:22,049 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:28:22,049 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:28:22,049 - root - DEBUG - Getting strike price...
2025-06-02 13:28:22,049 - root - INFO - Current spot: 24712.900390625, Selected strike: 24400
2025-06-02 13:28:22,049 - root - DEBUG - Current time in IST: 13:28:22.049636
2025-06-02 13:28:22,049 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:28:22,050 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:28:30,119 - root - DEBUG - Checking market hours...
2025-06-02 13:28:30,120 - root - DEBUG - Market open: True
2025-06-02 13:28:30,120 - root - DEBUG - Fetching current market data...
2025-06-02 13:28:30,120 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:28:30,121 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:28:30,207 - root - INFO - Successfully fetched price for ^NSEI: 24712.900390625
2025-06-02 13:28:30,208 - root - DEBUG - Got spot price: 24712.900390625
2025-06-02 13:28:30,208 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:28:30,209 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:28:30.208622 to 2025-06-02 13:28:30.208622
2025-06-02 13:28:30,215 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:28:30,227 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:28:30,227 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:28:30,236 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:28:30,236 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:28:30,237 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:28:30,237 - root - DEBUG - Getting strike price...
2025-06-02 13:28:30,237 - root - INFO - Current spot: 24712.900390625, Selected strike: 24400
2025-06-02 13:28:30,237 - root - DEBUG - Current time in IST: 13:28:30.237270
2025-06-02 13:28:30,237 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:28:30,238 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:28:53,772 - root - DEBUG - Checking market hours...
2025-06-02 13:28:53,772 - root - DEBUG - Market open: True
2025-06-02 13:28:53,772 - root - DEBUG - Fetching current market data...
2025-06-02 13:28:53,772 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:28:53,773 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:28:53,970 - root - INFO - Successfully fetched price for ^NSEI: 24713.05078125
2025-06-02 13:28:53,970 - root - DEBUG - Got spot price: 24713.05078125
2025-06-02 13:28:53,970 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:28:53,970 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:28:53.970425 to 2025-06-02 13:28:53.970425
2025-06-02 13:28:53,974 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:28:53,989 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:28:53,991 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:28:53,991 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:28:53,991 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:28:53,991 - root - DEBUG - Getting strike price...
2025-06-02 13:28:53,991 - root - INFO - Current spot: 24713.05078125, Selected strike: 24400
2025-06-02 13:28:53,991 - root - DEBUG - Current time in IST: 13:28:53.991340
2025-06-02 13:28:53,991 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:28:53,992 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:29:04,487 - root - DEBUG - Checking market hours...
2025-06-02 13:29:04,487 - root - DEBUG - Market open: True
2025-06-02 13:29:04,487 - root - DEBUG - Fetching current market data...
2025-06-02 13:29:04,487 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:29:04,488 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:29:04,671 - root - INFO - Successfully fetched price for ^NSEI: 24709.25
2025-06-02 13:29:04,671 - root - DEBUG - Got spot price: 24709.25
2025-06-02 13:29:04,671 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:29:04,671 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:29:04.671269 to 2025-06-02 13:29:04.671269
2025-06-02 13:29:04,675 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:29:04,689 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:29:04,690 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:29:04,691 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:29:04,691 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:29:04,691 - root - DEBUG - Getting strike price...
2025-06-02 13:29:04,691 - root - INFO - Current spot: 24709.25, Selected strike: 24400
2025-06-02 13:29:04,692 - root - DEBUG - Current time in IST: 13:29:04.692721
2025-06-02 13:29:04,692 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:29:04,692 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:29:18,386 - root - DEBUG - Checking market hours...
2025-06-02 13:29:18,386 - root - DEBUG - Market open: True
2025-06-02 13:29:18,386 - root - DEBUG - Fetching current market data...
2025-06-02 13:29:18,386 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:29:18,387 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:29:18,573 - root - INFO - Successfully fetched price for ^NSEI: 24709.75
2025-06-02 13:29:18,574 - root - DEBUG - Got spot price: 24709.75
2025-06-02 13:29:18,574 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:29:18,574 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:29:18.574171 to 2025-06-02 13:29:18.574171
2025-06-02 13:29:18,578 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:29:18,588 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:29:18,589 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:29:18,589 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:29:18,589 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:29:18,589 - root - DEBUG - Getting strike price...
2025-06-02 13:29:18,589 - root - INFO - Current spot: 24709.75, Selected strike: 24400
2025-06-02 13:29:18,589 - root - DEBUG - Current time in IST: 13:29:18.589193
2025-06-02 13:29:18,589 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:29:18,590 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:29:22,057 - root - DEBUG - Checking market hours...
2025-06-02 13:29:22,057 - root - DEBUG - Market open: True
2025-06-02 13:29:22,058 - root - DEBUG - Fetching current market data...
2025-06-02 13:29:22,058 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:29:22,059 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:29:22,272 - root - INFO - Successfully fetched price for ^NSEI: 24710.150390625
2025-06-02 13:29:22,272 - root - DEBUG - Got spot price: 24710.150390625
2025-06-02 13:29:22,273 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:29:22,273 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:29:22.273713 to 2025-06-02 13:29:22.273713
2025-06-02 13:29:22,279 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:29:22,289 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:29:22,289 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:29:22,289 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:29:22,289 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:29:22,290 - root - DEBUG - Getting strike price...
2025-06-02 13:29:22,290 - root - INFO - Current spot: 24710.150390625, Selected strike: 24400
2025-06-02 13:29:22,290 - root - DEBUG - Current time in IST: 13:29:22.290447
2025-06-02 13:29:22,290 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:29:22,290 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:29:30,299 - root - DEBUG - Checking market hours...
2025-06-02 13:29:30,299 - root - DEBUG - Market open: True
2025-06-02 13:29:30,299 - root - DEBUG - Fetching current market data...
2025-06-02 13:29:30,299 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:29:30,300 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:29:30,625 - root - INFO - Successfully fetched price for ^NSEI: 24709.349609375
2025-06-02 13:29:30,625 - root - DEBUG - Got spot price: 24709.349609375
2025-06-02 13:29:30,626 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:29:30,626 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:29:30.626512 to 2025-06-02 13:29:30.626512
2025-06-02 13:29:30,628 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:29:30,638 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:29:30,638 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:29:30,641 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:29:30,641 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:29:30,641 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:29:30,642 - root - DEBUG - Getting strike price...
2025-06-02 13:29:30,642 - root - INFO - Current spot: 24709.349609375, Selected strike: 24400
2025-06-02 13:29:30,642 - root - DEBUG - Current time in IST: 13:29:30.642507
2025-06-02 13:29:30,642 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:29:30,643 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:29:53,995 - root - DEBUG - Checking market hours...
2025-06-02 13:29:53,995 - root - DEBUG - Market open: True
2025-06-02 13:29:53,995 - root - DEBUG - Fetching current market data...
2025-06-02 13:29:53,996 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:29:53,996 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:29:54,363 - root - INFO - Successfully fetched price for ^NSEI: 24709.30078125
2025-06-02 13:29:54,363 - root - DEBUG - Got spot price: 24709.30078125
2025-06-02 13:29:54,363 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:29:54,363 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:29:54.363857 to 2025-06-02 13:29:54.363857
2025-06-02 13:29:54,367 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:29:54,385 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:29:54,385 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:29:54,385 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:29:54,385 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:29:54,385 - root - DEBUG - Getting strike price...
2025-06-02 13:29:54,385 - root - INFO - Current spot: 24709.30078125, Selected strike: 24400
2025-06-02 13:29:54,386 - root - DEBUG - Current time in IST: 13:29:54.386977
2025-06-02 13:29:54,386 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:29:54,388 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:30:04,700 - root - DEBUG - Checking market hours...
2025-06-02 13:30:04,700 - root - DEBUG - Market open: True
2025-06-02 13:30:04,700 - root - DEBUG - Fetching current market data...
2025-06-02 13:30:04,700 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:30:04,701 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:30:05,856 - root - INFO - Successfully fetched price for ^NSEI: 24705.900390625
2025-06-02 13:30:05,857 - root - DEBUG - Got spot price: 24705.900390625
2025-06-02 13:30:05,857 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:30:05,857 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:30:05.857507 to 2025-06-02 13:30:05.857507
2025-06-02 13:30:05,860 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:30:05,885 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:30:05,885 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:30:05,885 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:30:05,887 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:30:05,887 - root - DEBUG - Getting strike price...
2025-06-02 13:30:05,887 - root - INFO - Current spot: 24705.900390625, Selected strike: 24400
2025-06-02 13:30:05,887 - root - DEBUG - Current time in IST: 13:30:05.887014
2025-06-02 13:30:05,887 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:30:05,888 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:30:18,594 - root - DEBUG - Checking market hours...
2025-06-02 13:30:18,594 - root - DEBUG - Market open: True
2025-06-02 13:30:18,594 - root - DEBUG - Fetching current market data...
2025-06-02 13:30:18,594 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:30:18,595 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:30:18,782 - root - INFO - Successfully fetched price for ^NSEI: 24706.650390625
2025-06-02 13:30:18,782 - root - DEBUG - Got spot price: 24706.650390625
2025-06-02 13:30:18,782 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:30:18,783 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:30:18.782562 to 2025-06-02 13:30:18.782562
2025-06-02 13:30:18,785 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:30:18,796 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:30:18,796 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:30:18,796 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:30:18,796 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:30:18,796 - root - DEBUG - Getting strike price...
2025-06-02 13:30:18,796 - root - INFO - Current spot: 24706.650390625, Selected strike: 24400
2025-06-02 13:30:18,796 - root - DEBUG - Current time in IST: 13:30:18.796059
2025-06-02 13:30:18,796 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:30:18,797 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:30:22,303 - root - DEBUG - Checking market hours...
2025-06-02 13:30:22,303 - root - DEBUG - Market open: True
2025-06-02 13:30:22,303 - root - DEBUG - Fetching current market data...
2025-06-02 13:30:22,303 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:30:22,303 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:30:22,477 - root - INFO - Successfully fetched price for ^NSEI: 24706.349609375
2025-06-02 13:30:22,477 - root - DEBUG - Got spot price: 24706.349609375
2025-06-02 13:30:22,477 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:30:22,477 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:30:22.477870 to 2025-06-02 13:30:22.477870
2025-06-02 13:30:22,485 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:30:22,504 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:30:22,504 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:30:22,504 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:30:22,505 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:30:22,505 - root - DEBUG - Getting strike price...
2025-06-02 13:30:22,505 - root - INFO - Current spot: 24706.349609375, Selected strike: 24400
2025-06-02 13:30:22,505 - root - DEBUG - Current time in IST: 13:30:22.505165
2025-06-02 13:30:22,505 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    if current_time >= time(9, 30) and self.positions:
TypeError: 'module' object is not callable
2025-06-02 13:30:22,505 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:30:30,647 - root - DEBUG - Checking market hours...
2025-06-02 13:30:30,648 - root - DEBUG - Market open: True
2025-06-02 13:30:30,648 - root - DEBUG - Fetching current market data...
2025-06-02 13:30:30,648 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:30:30,649 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:30:30,879 - root - INFO - Successfully fetched price for ^NSEI: 24708.19921875
2025-06-02 13:30:30,879 - root - DEBUG - Got spot price: 24708.19921875
2025-06-02 13:30:30,879 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:30:30,880 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:30:30.880779 to 2025-06-02 13:30:30.880779
2025-06-02 13:30:30,883 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:30:30,896 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:30:30,896 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:30:30,901 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:30:30,901 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:30:30,901 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:30:30,901 - root - DEBUG - Getting strike price...
2025-06-02 13:30:30,901 - root - INFO - Current spot: 24708.19921875, Selected strike: 24400
2025-06-02 13:30:30,901 - root - DEBUG - Current time in IST: 13:30:30.901163
2025-06-02 13:30:30,901 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:30:30,902 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:30:54,391 - root - DEBUG - Checking market hours...
2025-06-02 13:30:54,391 - root - DEBUG - Market open: True
2025-06-02 13:30:54,392 - root - DEBUG - Fetching current market data...
2025-06-02 13:30:54,392 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:30:54,393 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:30:54,983 - root - INFO - Successfully fetched price for ^NSEI: 24708.94921875
2025-06-02 13:30:54,983 - root - DEBUG - Got spot price: 24708.94921875
2025-06-02 13:30:54,984 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:30:54,984 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:30:54.984790 to 2025-06-02 13:30:54.984790
2025-06-02 13:30:54,988 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:30:55,012 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:30:55,013 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:30:55,013 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:30:55,013 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:30:55,013 - root - DEBUG - Getting strike price...
2025-06-02 13:30:55,013 - root - INFO - Current spot: 24708.94921875, Selected strike: 24400
2025-06-02 13:30:55,013 - root - DEBUG - Current time in IST: 13:30:55.013045
2025-06-02 13:30:55,014 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:30:55,015 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:31:05,894 - root - DEBUG - Checking market hours...
2025-06-02 13:31:05,894 - root - DEBUG - Market open: True
2025-06-02 13:31:05,895 - root - DEBUG - Fetching current market data...
2025-06-02 13:31:05,895 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:31:05,896 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:31:06,076 - root - INFO - Successfully fetched price for ^NSEI: 24709.599609375
2025-06-02 13:31:06,076 - root - DEBUG - Got spot price: 24709.599609375
2025-06-02 13:31:06,077 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:31:06,077 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:31:06.077161 to 2025-06-02 13:31:06.077161
2025-06-02 13:31:06,080 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:31:06,094 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:31:06,094 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:31:06,094 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:31:06,094 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:31:06,095 - root - DEBUG - Getting strike price...
2025-06-02 13:31:06,095 - root - INFO - Current spot: 24709.599609375, Selected strike: 24400
2025-06-02 13:31:06,095 - root - DEBUG - Current time in IST: 13:31:06.095838
2025-06-02 13:31:06,095 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:31:06,095 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:31:18,809 - root - DEBUG - Checking market hours...
2025-06-02 13:31:18,809 - root - DEBUG - Market open: True
2025-06-02 13:31:18,810 - root - DEBUG - Fetching current market data...
2025-06-02 13:31:18,810 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:31:18,811 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:31:22,506 - root - DEBUG - Checking market hours...
2025-06-02 13:31:22,506 - root - DEBUG - Market open: True
2025-06-02 13:31:22,506 - root - DEBUG - Fetching current market data...
2025-06-02 13:31:22,507 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:31:22,507 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:31:24,022 - root - INFO - Successfully fetched price for ^NSEI: 24714.349609375
2025-06-02 13:31:24,022 - root - DEBUG - Got spot price: 24714.349609375
2025-06-02 13:31:24,023 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:31:24,023 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:31:24.023563 to 2025-06-02 13:31:24.023563
2025-06-02 13:31:24,026 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:31:24,051 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:31:24,052 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:31:24,052 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:31:24,052 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:31:24,052 - root - DEBUG - Getting strike price...
2025-06-02 13:31:24,052 - root - INFO - Current spot: 24714.349609375, Selected strike: 24400
2025-06-02 13:31:24,053 - root - DEBUG - Current time in IST: 13:31:24.053685
2025-06-02 13:31:24,053 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:31:24,054 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:31:24,451 - root - INFO - Successfully fetched price for ^NSEI: 24714.349609375
2025-06-02 13:31:24,452 - root - DEBUG - Got spot price: 24714.349609375
2025-06-02 13:31:24,452 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:31:24,452 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:31:24.452290 to 2025-06-02 13:31:24.452290
2025-06-02 13:31:24,455 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:31:24,466 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:31:24,467 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:31:24,467 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:31:24,467 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:31:24,467 - root - DEBUG - Getting strike price...
2025-06-02 13:31:24,467 - root - INFO - Current spot: 24714.349609375, Selected strike: 24400
2025-06-02 13:31:24,467 - root - DEBUG - Current time in IST: 13:31:24.467597
2025-06-02 13:31:24,467 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:31:24,468 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:31:30,907 - root - DEBUG - Checking market hours...
2025-06-02 13:31:30,909 - root - DEBUG - Market open: True
2025-06-02 13:31:30,910 - root - DEBUG - Fetching current market data...
2025-06-02 13:31:30,910 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:31:30,911 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:31:31,171 - root - INFO - Successfully fetched price for ^NSEI: 24714.55078125
2025-06-02 13:31:31,172 - root - DEBUG - Got spot price: 24714.55078125
2025-06-02 13:31:31,172 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:31:31,172 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:31:31.172439 to 2025-06-02 13:31:31.172439
2025-06-02 13:31:31,176 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:31:31,199 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:31:31,199 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:31:31,206 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:31:31,206 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:31:31,207 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:31:31,207 - root - DEBUG - Getting strike price...
2025-06-02 13:31:31,207 - root - INFO - Current spot: 24714.55078125, Selected strike: 24400
2025-06-02 13:31:31,207 - root - DEBUG - Current time in IST: 13:31:31.207793
2025-06-02 13:31:31,207 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:31:31,207 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:31:55,024 - root - DEBUG - Checking market hours...
2025-06-02 13:31:55,024 - root - DEBUG - Market open: True
2025-06-02 13:31:55,024 - root - DEBUG - Fetching current market data...
2025-06-02 13:31:55,024 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:31:55,025 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:31:55,248 - root - INFO - Successfully fetched price for ^NSEI: 24716.44921875
2025-06-02 13:31:55,248 - root - DEBUG - Got spot price: 24716.44921875
2025-06-02 13:31:55,248 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:31:55,248 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:31:55.248998 to 2025-06-02 13:31:55.248998
2025-06-02 13:31:55,252 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:31:55,270 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:31:55,270 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:31:55,271 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:31:55,271 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:31:55,271 - root - DEBUG - Getting strike price...
2025-06-02 13:31:55,271 - root - INFO - Current spot: 24716.44921875, Selected strike: 24400
2025-06-02 13:31:55,271 - root - DEBUG - Current time in IST: 13:31:55.271685
2025-06-02 13:31:55,271 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:31:55,271 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:32:06,102 - root - DEBUG - Checking market hours...
2025-06-02 13:32:06,103 - root - DEBUG - Market open: True
2025-06-02 13:32:06,103 - root - DEBUG - Fetching current market data...
2025-06-02 13:32:06,103 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:32:06,105 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:32:06,286 - root - INFO - Successfully fetched price for ^NSEI: 24715.25
2025-06-02 13:32:06,286 - root - DEBUG - Got spot price: 24715.25
2025-06-02 13:32:06,286 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:32:06,286 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:32:06.286655 to 2025-06-02 13:32:06.286655
2025-06-02 13:32:06,289 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:32:06,304 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:32:06,304 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:32:06,304 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:32:06,305 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:32:06,305 - root - DEBUG - Getting strike price...
2025-06-02 13:32:06,305 - root - INFO - Current spot: 24715.25, Selected strike: 24400
2025-06-02 13:32:06,305 - root - DEBUG - Current time in IST: 13:32:06.305949
2025-06-02 13:32:06,305 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:32:06,305 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:32:24,067 - root - DEBUG - Checking market hours...
2025-06-02 13:32:24,067 - root - DEBUG - Market open: True
2025-06-02 13:32:24,067 - root - DEBUG - Fetching current market data...
2025-06-02 13:32:24,067 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:32:24,069 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:32:24,218 - root - INFO - Successfully fetched price for ^NSEI: 24710.150390625
2025-06-02 13:32:24,219 - root - DEBUG - Got spot price: 24710.150390625
2025-06-02 13:32:24,219 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:32:24,219 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:32:24.219423 to 2025-06-02 13:32:24.219423
2025-06-02 13:32:24,222 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:32:24,240 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:32:24,241 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:32:24,241 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:32:24,241 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:32:24,241 - root - DEBUG - Getting strike price...
2025-06-02 13:32:24,241 - root - INFO - Current spot: 24710.150390625, Selected strike: 24400
2025-06-02 13:32:24,241 - root - DEBUG - Current time in IST: 13:32:24.241109
2025-06-02 13:32:24,242 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:32:24,242 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:32:24,473 - root - DEBUG - Checking market hours...
2025-06-02 13:32:24,473 - root - DEBUG - Market open: True
2025-06-02 13:32:24,473 - root - DEBUG - Fetching current market data...
2025-06-02 13:32:24,473 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:32:24,475 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:32:24,623 - root - INFO - Successfully fetched price for ^NSEI: 24710.150390625
2025-06-02 13:32:24,623 - root - DEBUG - Got spot price: 24710.150390625
2025-06-02 13:32:24,623 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:32:24,623 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:32:24.623705 to 2025-06-02 13:32:24.623705
2025-06-02 13:32:24,627 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:32:24,644 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:32:24,644 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:32:24,644 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:32:24,644 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:32:24,645 - root - DEBUG - Getting strike price...
2025-06-02 13:32:24,645 - root - INFO - Current spot: 24710.150390625, Selected strike: 24400
2025-06-02 13:32:24,645 - root - DEBUG - Current time in IST: 13:32:24.645978
2025-06-02 13:32:24,645 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:32:24,645 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:32:31,218 - root - DEBUG - Checking market hours...
2025-06-02 13:32:31,219 - root - DEBUG - Market open: True
2025-06-02 13:32:31,219 - root - DEBUG - Fetching current market data...
2025-06-02 13:32:31,219 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:32:31,220 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:32:31,369 - root - INFO - Successfully fetched price for ^NSEI: 24710.75
2025-06-02 13:32:31,370 - root - DEBUG - Got spot price: 24710.75
2025-06-02 13:32:31,370 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:32:31,370 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:32:31.370365 to 2025-06-02 13:32:31.370365
2025-06-02 13:32:31,372 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:32:31,387 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:32:31,387 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:32:31,390 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:32:31,390 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:32:31,390 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:32:31,390 - root - DEBUG - Getting strike price...
2025-06-02 13:32:31,390 - root - INFO - Current spot: 24710.75, Selected strike: 24400
2025-06-02 13:32:31,390 - root - DEBUG - Current time in IST: 13:32:31.390126
2025-06-02 13:32:31,390 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:32:31,390 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:32:55,284 - root - DEBUG - Checking market hours...
2025-06-02 13:32:55,284 - root - DEBUG - Market open: True
2025-06-02 13:32:55,284 - root - DEBUG - Fetching current market data...
2025-06-02 13:32:55,284 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:32:55,286 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:32:55,479 - root - INFO - Successfully fetched price for ^NSEI: 24710.55078125
2025-06-02 13:32:55,479 - root - DEBUG - Got spot price: 24710.55078125
2025-06-02 13:32:55,481 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:32:55,481 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:32:55.481007 to 2025-06-02 13:32:55.481007
2025-06-02 13:32:55,484 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:32:55,498 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:32:55,498 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:32:55,499 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:32:55,499 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:32:55,499 - root - DEBUG - Getting strike price...
2025-06-02 13:32:55,499 - root - INFO - Current spot: 24710.55078125, Selected strike: 24400
2025-06-02 13:32:55,499 - root - DEBUG - Current time in IST: 13:32:55.499739
2025-06-02 13:32:55,499 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:32:55,499 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:33:06,312 - root - DEBUG - Checking market hours...
2025-06-02 13:33:06,312 - root - DEBUG - Market open: True
2025-06-02 13:33:06,312 - root - DEBUG - Fetching current market data...
2025-06-02 13:33:06,312 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:33:06,313 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:33:06,460 - root - INFO - Successfully fetched price for ^NSEI: 24707.400390625
2025-06-02 13:33:06,460 - root - DEBUG - Got spot price: 24707.400390625
2025-06-02 13:33:06,460 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:33:06,460 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:33:06.460817 to 2025-06-02 13:33:06.460817
2025-06-02 13:33:06,465 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:33:06,484 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:33:06,485 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:33:06,485 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:33:06,485 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:33:06,485 - root - DEBUG - Getting strike price...
2025-06-02 13:33:06,485 - root - INFO - Current spot: 24707.400390625, Selected strike: 24400
2025-06-02 13:33:06,485 - root - DEBUG - Current time in IST: 13:33:06.485317
2025-06-02 13:33:06,485 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:33:06,485 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:33:24,247 - root - DEBUG - Checking market hours...
2025-06-02 13:33:24,247 - root - DEBUG - Market open: True
2025-06-02 13:33:24,247 - root - DEBUG - Fetching current market data...
2025-06-02 13:33:24,247 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:33:24,249 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:33:24,477 - root - INFO - Successfully fetched price for ^NSEI: 24706.150390625
2025-06-02 13:33:24,477 - root - DEBUG - Got spot price: 24706.150390625
2025-06-02 13:33:24,477 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:33:24,477 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:33:24.477185 to 2025-06-02 13:33:24.477185
2025-06-02 13:33:24,480 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:33:24,497 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:33:24,497 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:33:24,497 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:33:24,497 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:33:24,497 - root - DEBUG - Getting strike price...
2025-06-02 13:33:24,497 - root - INFO - Current spot: 24706.150390625, Selected strike: 24400
2025-06-02 13:33:24,497 - root - DEBUG - Current time in IST: 13:33:24.497661
2025-06-02 13:33:24,497 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:33:24,498 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:33:24,651 - root - DEBUG - Checking market hours...
2025-06-02 13:33:24,651 - root - DEBUG - Market open: True
2025-06-02 13:33:24,651 - root - DEBUG - Fetching current market data...
2025-06-02 13:33:24,652 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:33:24,653 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:33:24,851 - root - INFO - Successfully fetched price for ^NSEI: 24706.150390625
2025-06-02 13:33:24,851 - root - DEBUG - Got spot price: 24706.150390625
2025-06-02 13:33:24,851 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:33:24,851 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:33:24.851912 to 2025-06-02 13:33:24.851912
2025-06-02 13:33:24,854 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:33:24,868 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:33:24,869 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:33:24,869 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:33:24,869 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:33:24,869 - root - DEBUG - Getting strike price...
2025-06-02 13:33:24,869 - root - INFO - Current spot: 24706.150390625, Selected strike: 24400
2025-06-02 13:33:24,869 - root - DEBUG - Current time in IST: 13:33:24.869958
2025-06-02 13:33:24,869 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:33:24,869 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:33:31,400 - root - DEBUG - Checking market hours...
2025-06-02 13:33:31,400 - root - DEBUG - Market open: True
2025-06-02 13:33:31,400 - root - DEBUG - Fetching current market data...
2025-06-02 13:33:31,400 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:33:31,401 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:33:31,647 - root - INFO - Successfully fetched price for ^NSEI: 24704.400390625
2025-06-02 13:33:31,647 - root - DEBUG - Got spot price: 24704.400390625
2025-06-02 13:33:31,647 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:33:31,647 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:33:31.647680 to 2025-06-02 13:33:31.647680
2025-06-02 13:33:31,649 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:33:31,664 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:33:31,664 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:33:31,666 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:33:31,666 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:33:31,666 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:33:31,666 - root - DEBUG - Getting strike price...
2025-06-02 13:33:31,666 - root - INFO - Current spot: 24704.400390625, Selected strike: 24400
2025-06-02 13:33:31,666 - root - DEBUG - Current time in IST: 13:33:31.666321
2025-06-02 13:33:31,666 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:33:31,666 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:33:55,512 - root - DEBUG - Checking market hours...
2025-06-02 13:33:55,512 - root - DEBUG - Market open: True
2025-06-02 13:33:55,513 - root - DEBUG - Fetching current market data...
2025-06-02 13:33:55,513 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:33:55,514 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:33:58,995 - root - INFO - Successfully fetched price for ^NSEI: 24703.80078125
2025-06-02 13:33:58,995 - root - DEBUG - Got spot price: 24703.80078125
2025-06-02 13:33:58,996 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:33:58,996 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:33:58.996612 to 2025-06-02 13:33:58.996612
2025-06-02 13:33:58,999 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:33:59,020 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:33:59,020 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:33:59,021 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:33:59,021 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:33:59,021 - root - DEBUG - Getting strike price...
2025-06-02 13:33:59,021 - root - INFO - Current spot: 24703.80078125, Selected strike: 24400
2025-06-02 13:33:59,022 - root - DEBUG - Current time in IST: 13:33:59.021762
2025-06-02 13:33:59,022 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:33:59,023 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:34:06,492 - root - DEBUG - Checking market hours...
2025-06-02 13:34:06,492 - root - DEBUG - Market open: True
2025-06-02 13:34:06,492 - root - DEBUG - Fetching current market data...
2025-06-02 13:34:06,492 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:34:06,493 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:34:06,775 - root - INFO - Successfully fetched price for ^NSEI: 24703.94921875
2025-06-02 13:34:06,776 - root - DEBUG - Got spot price: 24703.94921875
2025-06-02 13:34:06,776 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:34:06,777 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:34:06.776354 to 2025-06-02 13:34:06.776354
2025-06-02 13:34:06,781 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:34:06,803 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:34:06,804 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:34:06,804 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:34:06,806 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:34:06,806 - root - DEBUG - Getting strike price...
2025-06-02 13:34:06,806 - root - INFO - Current spot: 24703.94921875, Selected strike: 24400
2025-06-02 13:34:06,806 - root - DEBUG - Current time in IST: 13:34:06.806056
2025-06-02 13:34:06,806 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:34:06,807 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:34:24,514 - root - DEBUG - Checking market hours...
2025-06-02 13:34:24,514 - root - DEBUG - Market open: True
2025-06-02 13:34:24,514 - root - DEBUG - Fetching current market data...
2025-06-02 13:34:24,514 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:34:24,514 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:34:24,883 - root - DEBUG - Checking market hours...
2025-06-02 13:34:24,883 - root - DEBUG - Market open: True
2025-06-02 13:34:24,883 - root - DEBUG - Fetching current market data...
2025-06-02 13:34:24,884 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:34:24,884 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:34:24,905 - root - INFO - Successfully fetched price for ^NSEI: 24703.55078125
2025-06-02 13:34:24,905 - root - DEBUG - Got spot price: 24703.55078125
2025-06-02 13:34:24,905 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:34:24,906 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:34:24.905038 to 2025-06-02 13:34:24.905038
2025-06-02 13:34:24,908 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:34:24,930 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:34:24,931 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:34:24,931 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:34:24,931 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:34:24,931 - root - DEBUG - Getting strike price...
2025-06-02 13:34:24,932 - root - INFO - Current spot: 24703.55078125, Selected strike: 24400
2025-06-02 13:34:24,932 - root - DEBUG - Current time in IST: 13:34:24.932031
2025-06-02 13:34:24,932 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:34:24,933 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:34:25,221 - root - INFO - Successfully fetched price for ^NSEI: 24703.55078125
2025-06-02 13:34:25,222 - root - DEBUG - Got spot price: 24703.55078125
2025-06-02 13:34:25,222 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:34:25,222 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:34:25.222298 to 2025-06-02 13:34:25.222298
2025-06-02 13:34:25,225 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:34:25,243 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:34:25,249 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:34:25,250 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:34:25,250 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:34:25,250 - root - DEBUG - Getting strike price...
2025-06-02 13:34:25,250 - root - INFO - Current spot: 24703.55078125, Selected strike: 24400
2025-06-02 13:34:25,250 - root - DEBUG - Current time in IST: 13:34:25.250306
2025-06-02 13:34:25,250 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:34:25,250 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:34:31,675 - root - DEBUG - Checking market hours...
2025-06-02 13:34:31,676 - root - DEBUG - Market open: True
2025-06-02 13:34:31,676 - root - DEBUG - Fetching current market data...
2025-06-02 13:34:31,676 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:34:31,677 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:34:31,861 - root - INFO - Successfully fetched price for ^NSEI: 24703.650390625
2025-06-02 13:34:31,861 - root - DEBUG - Got spot price: 24703.650390625
2025-06-02 13:34:31,862 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:34:31,862 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:34:31.862185 to 2025-06-02 13:34:31.862185
2025-06-02 13:34:31,866 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:34:31,877 - yfinance - ERROR - 
1 Failed download:
2025-06-02 13:34:31,878 - yfinance - ERROR - ['NSEI.BO']: YFTzMissingError('possibly delisted; no timezone found')
2025-06-02 13:34:31,885 - src.data_handler - ERROR - No data returned for NSEI.BO
2025-06-02 13:34:31,886 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:34:31,886 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:34:31,886 - root - DEBUG - Getting strike price...
2025-06-02 13:34:31,886 - root - INFO - Current spot: 24703.650390625, Selected strike: 24400
2025-06-02 13:34:31,886 - root - DEBUG - Current time in IST: 13:34:31.886738
2025-06-02 13:34:31,886 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:34:31,887 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:34:59,032 - root - DEBUG - Checking market hours...
2025-06-02 13:34:59,032 - root - DEBUG - Market open: True
2025-06-02 13:34:59,032 - root - DEBUG - Fetching current market data...
2025-06-02 13:34:59,032 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:34:59,034 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:35:01,305 - root - INFO - Successfully fetched price for ^NSEI: 24699.30078125
2025-06-02 13:35:01,305 - root - DEBUG - Got spot price: 24699.30078125
2025-06-02 13:35:01,305 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:35:01,305 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:35:01.305613 to 2025-06-02 13:35:01.305613
2025-06-02 13:35:01,308 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:35:01,328 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:35:01,328 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:35:01,328 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:35:01,328 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:35:01,329 - root - DEBUG - Getting strike price...
2025-06-02 13:35:01,329 - root - INFO - Current spot: 24699.30078125, Selected strike: 24300
2025-06-02 13:35:01,329 - root - DEBUG - Current time in IST: 13:35:01.329084
2025-06-02 13:35:01,329 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:35:01,329 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
2025-06-02 13:35:06,822 - root - DEBUG - Checking market hours...
2025-06-02 13:35:06,824 - root - DEBUG - Market open: True
2025-06-02 13:35:06,824 - root - DEBUG - Fetching current market data...
2025-06-02 13:35:06,824 - root - DEBUG - Attempting to fetch data for ^NSEI (attempt 1/3)
2025-06-02 13:35:06,825 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['^NSEI', 1, 0])
2025-06-02 13:35:07,288 - root - INFO - Successfully fetched price for ^NSEI: 24700.150390625
2025-06-02 13:35:07,288 - root - DEBUG - Got spot price: 24700.150390625
2025-06-02 13:35:07,288 - root - DEBUG - Calculating historical volatility...
2025-06-02 13:35:07,289 - src.data_handler - INFO - Fetching historical data for NSEI.BO from 2024-06-02 13:35:07.289529 to 2025-06-02 13:35:07.289529
2025-06-02 13:35:07,295 - peewee - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NSEI.BO', 1, 0])
2025-06-02 13:35:07,308 - src.data_handler - ERROR - Error fetching data: [Errno 22] Invalid argument
2025-06-02 13:35:07,309 - src.data_handler - DEBUG - Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\data_handler.py", line 22, in fetch_historical_data
    self.data = yf.download(self.symbol, start=start_date, end=end_date)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 99, in wrapper
    result = func(*args, **kwargs)
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\multi.py", line 179, in download
    shared._PROGRESS_BAR.completed()
  File "C:\Users\kumar\AppData\Local\Programs\Python\Python310\lib\site-packages\yfinance\utils.py", line 928, in completed
    print('\r' + str(self), end='', file=_sys.stderr)
OSError: [Errno 22] Invalid argument

2025-06-02 13:35:07,310 - src.data_handler - ERROR - Failed to fetch historical data for volatility calculation
2025-06-02 13:35:07,310 - root - WARNING - Could not calculate historical volatility. Using default value.
2025-06-02 13:35:07,310 - root - DEBUG - Getting strike price...
2025-06-02 13:35:07,310 - root - INFO - Current spot: 24700.150390625, Selected strike: 24400
2025-06-02 13:35:07,310 - root - DEBUG - Current time in IST: 13:35:07.310100
2025-06-02 13:35:07,310 - root - ERROR - Error in market data processing: 'module' object is not callable
Traceback (most recent call last):
  File "C:\Users\kumar\surf-workspace\backtesting\src\paper_trader.py", line 265, in run_paper_trading
    )
TypeError: 'module' object is not callable
2025-06-02 13:35:07,311 - root - WARNING - Will retry in 60 seconds. Attempt 1/5
